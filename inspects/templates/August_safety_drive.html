{% extends 'base.html' %} 
{% block content %}
{% load static %}
<head>
    
    <!-- buttons -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.6.1/css/buttons.dataTables.min.css">
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.print.min.js"></script>

    <script type="text/javascript">
        $(".sidebar").addClass('close');
      </script>

      <link rel="stylesheet" type="text/css" media="screen" href="{% static '/css/forms_common.css' %}">  

  <!-- loader start -->
<style>
    /* .select2-hidden-accessible{
        width: 100px !important;
    } */
     .select2-selection__rendered {
    box-sizing: border-box;
    list-style: none;
    margin: 0;
    padding: 0 5px;
    width: 400px !important;
}
   
    #divGeneralInspectionSecondary {
     position: fixed;
     top: 0;
     left: 0;
     width: 100%;
     height: 100%;
     background-color: rgba(0, 0, 0, 0.1); /* semi-transparent black background */
     z-index: 9999; /* ensure it's above other content */
     display: flex;
     justify-content: center;
     align-items: center;
 }
    .loader123 {
       --c1: #673b14;
       --c2: #f8b13b;
       width: 40px;
       height: 80px;
       border-top: 4px solid var(--c1);
       border-bottom: 4px solid var(--c1);
       background: linear-gradient(90deg, var(--c1) 2px, var(--c2) 0 5px, var(--c1) 0) 50%/7px 8px no-repeat;
       display: grid;
       overflow: hidden;
       animation: l5-0 2s infinite linear;
   }
 
   .loader123::before,
   .loader123::after {
       content: "";
       grid-area: 1/1;
       width: 75%;
       height: calc(50% - 4px);
       margin: 0 auto;
       border: 2px solid var(--c1);
       border-top: 0;
       box-sizing: content-box;
       border-radius: 0 0 40% 40%;
       -webkit-mask:
           linear-gradient(#000 0 0) bottom/4px 2px no-repeat,
           linear-gradient(#000 0 0);
       -webkit-mask-composite: destination-out;
       mask-composite: exclude;
       background:
           linear-gradient(var(--d, 0deg), var(--c2) 50%, #0000 0) bottom /100% 205%,
           linear-gradient(var(--c2) 0 0) center/0 100%;
       background-repeat: no-repeat;
       animation: inherit;
       animation-name: l5-1;
   }
 
   .loader123::after {
       transform-origin: 50% calc(100% + 2px);
       transform: scaleY(-1);
       --s: 3px;
       --d: 180deg;
   }
 
   @keyframes l5-0 {
       80% {
           transform: rotate(0)
       }
 
       100% {
           transform: rotate(0.5turn)
       }
   }
 
   @keyframes l5-1 {
 
       10%,
       70% {
           background-size: 100% 205%, var(--s, 0) 100%
       }
 
       70%,
       100% {
           background-position: top, center
       }
   }
 
   .loader1234 {
       width: fit-content;
       font-weight: bold;
       font-family: monospace;
       font-size: 15px;
       color: #0000;
       background: linear-gradient(90deg, #000 calc(50% - 0.5ch), #db1536 0 calc(50% + 0.5ch), #000 0) right/calc(200% + 1ch) 100%;
       -webkit-background-clip: text;
       background-clip: text;
       animation: l8 2s infinite steps(25);
   }
 
   .loader1234:before {
       content: "Loading..."
   }
 
   @keyframes l8 {
       to {
           background-position: left
       }
   }
 </style>
 <!-- loader end -->
  </head>

<h3 class="report_heading">August Safety Drive Inspection Report</h3><br>
<div class="container-fluid">
    <div class="inpt-container" id="container1" >
         <div class="acc-head" data-toggle="collapse" data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
            <div class="row">
                <div class="col-5">
                    <h5>Inspection Filters</h5>
                </div>
                <div class="col-6">
                    <h5  style="text-align: right;padding-right:5px;"><label id="collapseOneIdNoteNo"></label></h5>
                </div>
                <div class="col-1" style="text-align: right;">
                    <button class="btn btn-sm btn-outline-dark ">
                        <i class="fas fa-angle-double-up fa-lg"></i>&nbsp;&nbsp;
                        <i class="fas fa-angle-double-down fa-lg"></i>
                    </button>

                </div>
            </div>
        </div>
        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#accordion"> 
            <div class="row" style="margin-left: 1em; margin-right: 5em;">
                <div class="col-md-3 form-group">
                    <label for="rly_id" class="lbl-caption">Rly./Org.</label>
                    <select class="form-control self-control" id="zones"   name="zones" class="custom-select" 
                    data-placeholder="Rly/Org..."  multiple required >
                        <option value=""  disabled hidden>All</option>
                        {% for z in zones %}
                        <option value="{{z}}">{{z}}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-3 form-group">
                    <label for="div_id" class="lbl-caption" >Div./Unit</label>
                    <select class="form-control self-control" id="division" 
                    name="division" class="custom-select" data-placeholder="Div/Unit..." multiple >
                            <option value="" disabled hidden>All</option>
                            {% for d in division %}
                            <option value="{{d}}">{{d}}</option> 
                            {% endfor %}
                
                    </select>
                    
                </div>


                <div class="col-md-3 form-group" >
                    <label for="department_name" class="lbl-caption">Place of Inspection</label>
                    <select class="form-control sel-control" id="place" name="place" 
                                class="custom-select" data-placeholder="Place of insp..." multiple>
                
                            <option value="" disabled hidden>select</option>
                            {% for d in place %}
                            <option value="{{d}}">{{d}}</option>
                            {% endfor %}
                
                    </select>
                    
                </div>

                <div class="col-md-3 form-group">
                    <label for="date" class="lbl-caption">Date of Insp</label>
                    <input class="form-control " id="created_on" name="created_on"
                    autocomplete='off' placeholder='Select Date' style="margin-top:0em; background-color: #fff;" readonly >  
                </div>

            </div>
            <div class="row" style="margin-left: 1em; margin-right: 5em;">
                <div class="col-md-3 form-group">
                <label for="typeInsp_name" class="lbl-caption">Inspection Type</label>
                <select class="form-control sel-control" id="typeInsp" name="typeInsp" 
                                class="custom-select" data-placeholder="Insp Type..."  >
                        <option value="all">All</option>
                        {% for d in type_of_insp %}
                        <option value="{{d}}">{{d}}</option>
                        {% endfor %}
            
                </select>
                
                </div>

                <div class="col-md-3 form-group">
                <label for="designation"  class="lbl-caption">Designation</label>
                <select class="form-control sel-control" id="designation"
                        name="designation" class="custom-select" multiple data-placeholder="Designation...">
                    <option value="" disabled hidden >select</option>
                    {% for d in officer_desig %}
                    <option value="{{d}}">{{d}}</option>
                    {% endfor %}

                </select>
                <!-- <p style="font-size: 15px;">Note: To filter a designation you can either select from dropdown or, type the Designation in the search box and enter to select.</p> -->
                </div>


                <div class="col-md-3 form-group">
                <label for="status" class="lbl-caption">Officer Grade</label>
                <select class="form-control sel-control" id="ofc_grade"
                        name="ofc_grade" class="custom-select" multiple data-placeholder="Name...">
                    <option value="" disabled hidden >select</option>
                    {% for d in officer_grade_code %}
                    <option value="{{d}}">{{d}}</option>
                    {% endfor %}

                </select>
                </div>

                <div class="col-md-3 form-group">
                    <label for="status" class="lbl-caption">Officer Phone No.</label>
                    <select class="form-control sel-control" id="phone_no"
                            name="phone_no" class="custom-select" multiple data-placeholder="Officer Phone No...">
                        <option value="" disabled hidden >select</option>
                        {% for d in officer_grade_code %}
                        <option value="{{d}}">{{d}}</option>
                        {% endfor %}
    
                    </select>
                    </div>
            </div>
            <div class="row" style="margin-left: 1em; margin-right: 5em;">
                <div class="col-md-4  form-group" id ='shortcomings'> 
                    <table style="width: 100%;">
                        <tr>
                            <th>
                                <input type="radio" id="shortcomings_and" name="shortcomings_radio" value="AND">
                                <label for="shortcomings_and">AND</label>
                            </th>
                            <th>
                                <input type="radio" id="shortcomings_or" name="shortcomings_radio" value="OR" checked="true">
                                <label for="shortcomings_or">OR</label>
                            </th>
                            <th>
                                <input class="form-control" id="query_shortcomings" name="query" placeholder='Search shortcomings' 
                            class="custom-select">
                            </th>
                        </tr>
                    </table>
                    
                    
                </div>
                <div class="col-md-4  form-group" id ='action_taken'> 
                    <table style="width: 100%;">
                        <tr>
                            <th>
                                <input type="radio" id="query_action_taken_and" name="query_action_taken_radio" value="AND">
                                <label for="query_action_taken_and">AND</label>
                            </th>
                            <th>
                                <input type="radio" id="query_action_taken_or" name="query_action_taken_radio" value="OR" checked="true">
                                <label for="query_action_taken_or">OR</label>
                            </th>
                            <th>
                                <input class="form-control" id="query_action_taken" name="query" placeholder='Search action taken' 
                                    class="custom-select">
                            </th>
                        </tr>
                    </table>

                    
                </div>
                <div class="col-md-4  form-group" id ='comments'> 
                    <table style="width: 100%;">
                        <tr>
                            <th>
                                <input type="radio" id="query_comments_and" name="query_comments_radio" value="AND">
                                <label for="query_comments_and">AND</label>
                            </th>
                            <th>
                                <input type="radio" id="query_comments_or" name="query_comments_radio" value="OR" checked="true">
                                <label for="query_comments_or">OR</label>
                            </th>
                            <th>
                                <input class="form-control" id="query_comments" name="query" placeholder='Search comments' 
                    class="custom-select">
                            </th>
                        </tr>
                    </table>
                    
                </div>
            </div>
            <div class="row" style="margin-left: 1em; margin-right: 5em;">
                <div class="col-md-10">
                    <p style="font-size: 15px;">Note: To search multiple keywords in shortcomings, action taken and comments enter comma separated values. Check the radio buttons for 'AND' or 'OR' operations.</p>
                </div>
                <div class="col-md-2">
                    <div class="btn-toolbar" role="toolbar" >
                        <div class="btn-group" role="group" >
                            <button type="button" onclick="myFunction()" style=" margin-left:58%;" class="btn btn-warning btn-sm" id='search_ob'>Continue</button>
                            <a class="btn btn-secondary btn-sm" href="/August_safety_drive/">Reset</a> 
                        </div>
                    </div>
                    <br>
                </div>
                
            </div>
        </div> 
            
    </div>
    <div id="spinnerDiv" class="box-body no-padding" style="margin-top: 10%;margin-left: 50%;">
        <div class="loader123"></div>
        <div class="loader1234" style="margin-top: 6%;margin-left: -3%;"></div>
    </div>
    <div id="tablediv" class="box-body no-padding" style="margin-left: 5em; margin-right: 5em;">
        <table id="tableid" name="tableid" class="table table-striped table-bordered table-sm table-data table-responsive " cellspacing="0">
            <thead style="background-color: #343a40;white-space: nowrap; color:white;text-align: left;">
            <tr>
                <!-- <th style="width: 2%;">S.No.</th> -->
                <th style="width: 2%;"><input class="pan_checks_all" type="checkbox" id="panel_checks_all" value="all"
                    onchange="pan_checks_all_fun()">Mark</th>
                <th style="width: 3%;">Sys. ID</th>
                <th style="width: 5%;">Insp ID</th>
                <th style="width: 5%;">Insp. Officer</th>
                <th style="width: 5%;">Officer Designation</th>
                <th style="width: 5%;">Post Grade</th>
                <th style="width: 5%;">Grade Code</th>
                <th style="width: 5%;">Posted In</th>
                <th style="width: 5%;">Insp. Date </th>
                <th style="width: 5%;">Place of Insp </th>
                <th style="width: 5%;">Rly./Org.</th>
                <th style="width: 5%;">Div./Unit</th>
                <th style="width: 10%;">Insp. Type</th> 
                <th style="width: 10%;">Shortcomings found during the Inspection</th>                            
                <th style="width: 10%;">Action taken for addressing the shortcomings</th> 
                <th style="width: 5%;">Any other comment/ suggestion</th>                            
                <th style="width: 5%;">Email Address</th>   
                <th style="width: 5%;">Mobile Number </th>   
            </tr>
            </thead>

            <tbody>
                <!-- {% for d in data %}
                    <tr>
                        <td>{{forloop.counter}}</td>
                        <td>{{d.system_id}}</td>
                        <td>{{d.inspection_id}}</td>
                        <td>{{d.officer_name}}</td>
                        <td>{{d.officer_desig}}</td>
                        <td>{{d.officer_post_grade}}</td>
                        <td>{{d.officer_grade_code}}</td>
                        <td>{{d.officer_posted_in}}</td>
                        <td>{{d.insp_date}}</td>
                        <td>{{d.place_of_insp}}</td>
                        <td>{{d.zone_of_insp}}</td>
                        <td>{{d.div_of_insp}}</td>
                        <td>{{d.type_of_insp}}</td>
                        <td>{{d.shortcomings}}</td>
                        <td>{{d.action_taken}}</td>
                        <td>{{d.comments}}</td>
                        <td>{{d.officer_email}}</td>
                        <td>{{d.officer_mobile}}</td>
                    </tr>
                {% endfor %} -->
            </tbody>

        </table>
    </div>
</div>

<script>
    
    table=$('#tableid').DataTable();
   
 // $(".dataTables_wrapper > .dt-buttons").appendTo("div.buttonpdf");
    $(document).ready(function() {
        
        $('#zones').select2();
        $('#division').select2();
        // $('#place').select2();
        // $('#designation').select2();
        // $('#typeInsp').select2();
        $('#ofc_grade').select2();
        $("#place").select2({
            // tags: true,
            tokenSeparators: [','],  
            minimumInputLength: 3,
            maximumInputLength: 50,
            language: {
                inputTooShort: function() {
                return 'Please enter atleast 3 letters';
                }
            },
        
            ajax: {
                url: '{% url "autoFetch_augustSafety" %}',
                dataType: 'json',
                type: "GET",
                quietMillis: 50,
                data: function (term) {
                
                    return {
                        last_val: term.term,
                        type:'place'
                    };
                },
                processResults: function (data) {
                
                    return {
                        results: $.map(data, function (item) {
                    
                            return{
                            text: item,
                            
                            id: item,
                            
                            }
                        })
                    };
                
                },
                
                
            }
        });
        
        $("#designation").select2({
            // tags: true,
            tokenSeparators: [','],  
            minimumInputLength: 3,
            maximumInputLength: 50,
            language: {
                inputTooShort: function() {
                return 'Please enter atleast 3 letters';
                }
            },
        
            ajax: {
                url: '{% url "autoFetch_augustSafety" %}',
                dataType: 'json',
                type: "GET",
                quietMillis: 50,
                data: function (term) {
                
                    return {
                        last_val: term.term,
                        type:'designation'
                    };
                },
                processResults: function (data) {
                
                    return {
                        results: $.map(data, function (item) {
                    
                            return{
                            text: item,
                            
                            id: item,
                            
                            }
                        })
                    };
                
                },
                
                
            }
        });
        $("#typeInsp").select2({
            // tags: true,
            // tokenSeparators: [','],  
            minimumInputLength: 3,
            maximumInputLength: 50,
            language: {
                inputTooShort: function() {
                return 'Please enter atleast 3 letters';
                }
            },
        
            ajax: {
                url: '{% url "autoFetch_augustSafety" %}',
                dataType: 'json',
                type: "GET",
                quietMillis: 50,
                data: function (term) {
                
                    return {
                        last_val: term.term,
                        type:'typeInsp'
                    };
                },
                processResults: function (data) {
                
                    return {
                        results: $.map(data, function (item) {
                    
                            return{
                            text: item,
                            
                            id: item,
                            
                            }
                        })
                    };
                
                },
                
                
            }
        });
        $("#ofc_grade").select2({
            // tags: true,
            tokenSeparators: [','],  
            minimumInputLength: 0,
            maximumInputLength: 50,
            language: {
                inputTooShort: function() {
                return 'Please enter atleast 1 letters';
                }
            },
        
            ajax: {
                url: '{% url "autoFetch_augustSafety" %}',
                dataType: 'json',
                type: "GET",
                quietMillis: 50,
                data: function (term) {
                
                    return {
                        last_val: term.term,
                        type:'ofc_grade'
                    };
                },
                processResults: function (data) {
                
                    return {
                        results: $.map(data, function (item) {
                    
                            return{
                            text: item,
                            
                            id: item,
                            
                            }
                        })
                    };
                
                },
                
                
            }
        });
        
        $("#phone_no").select2({
            // tags: true,
            tokenSeparators: [','],  
            minimumInputLength: 0,
            maximumInputLength: 50,
            language: {
                inputTooShort: function() {
                return 'Please enter atleast 3 nos.';
                }
            },
        
            ajax: {
                url: '{% url "autoFetch_augustSafety" %}',
                dataType: 'json',
                type: "GET",
                quietMillis: 50,
                data: function (term) {
                
                    return {
                        last_val: term.term,
                        type:'phone_no'
                    };
                },
                processResults: function (data) {
                
                    return {
                        results: $.map(data, function (item) {
                    
                            return{
                            text: item,
                            
                            id: item,
                            
                            }
                        })
                    };
                
                },
                
                
            }
        });
        
        $('.js-btn-tooltip').tooltip();
     
        $('.js-btn-tooltip--custom-alt').tooltip({
          customClass: 'tooltip-custom-alt'
        });
        // myFunction()
        $('#tablediv').hide();
        $('#spinnerDiv').hide();
  
    });

    $(function() {

        $('input[name="created_on"]').daterangepicker({
            autoUpdateInput: false,
            autoApply: true,
            maxDate: new Date(),
            "opens": "left",
            locale: {
                cancelLabel: 'Clear'
            }
        });
        $('input[name="created_on"]').on('apply.daterangepicker', function(ev, picker) {
        $(this).val(picker.startDate.format('DD/MM/YYYY') + ' to ' + picker.endDate.format('DD/MM/YYYY'));
        
        if(picker.startDate.format('DD/MM/YYYY') == picker.endDate.format('DD/MM/YYYY')){
            $(this).val(picker.startDate.format('DD/MM/YYYY'))
            }
            else{
            $(this).val(picker.startDate.format('DD/MM/YYYY') + ' to ' + picker.endDate.format('DD/MM/YYYY'));
            
            }
        
        $('.applyButtonClasses').click()
    
        
        });
    
        $('input[name="created_on"]').on('cancel.daterangepicker', function(ev, picker) {
            $(this).val('');
        });
      
    });
      
      
      

    function myFunction() {
        $('#tablediv').hide();
        $('#spinnerDiv').show();
          
        count=0;
        var zones=$('#zones').val()
        var division=$('#division').val()
        var designation=$('#designation').val()
        var place=$('#place').val()
        var created_on=$('#created_on').val()
        var ofc_grade=$('#ofc_grade').val()
        var phone_no=$('#phone_no').val()
        var typeInsp=$('#typeInsp').val()
        var query_shortcomings=$('#query_shortcomings').val()
        var query_action_taken=$('#query_action_taken').val()
        var query_comments=$('#query_comments').val()
        var query_shortcomings_radio =$('input[name="shortcomings_radio"]:checked').val();
        var query_action_taken_radio =$('input[name="query_action_taken_radio"]:checked').val();
        var query_comments_radio =$('input[name="query_comments_radio"]:checked').val();
        
        data={
            'zones':JSON.stringify(zones),
            'division':JSON.stringify(division),
            'designation':JSON.stringify(designation),
            'place':JSON.stringify(place),
            'created_on':created_on,
            'ofc_grade':JSON.stringify(ofc_grade),
            'phone_no':JSON.stringify(phone_no),
            'typeInsp':typeInsp,
            'query_shortcomings':query_shortcomings,
            'query_action_taken':query_action_taken,
            'query_comments':query_comments,
            'query_shortcomings_radio':query_shortcomings_radio,
            'query_action_taken_radio':query_action_taken_radio,
            'query_comments_radio':query_comments_radio,
          }
          $.ajax({
            type:'GET',
            url:"{% url 'August_safety_drive' %}",
            dataType:'json',
            data: data,
            //data:{location_code,location_type,designation,dept,created_on},
            
            success: function (response) {
                table.destroy();       
                $('#tableid tbody').empty();
                listsearch = response.listsearch;
                row=''
                for(var i =0; i<listsearch.length; i++){
                    row+=`
                    <tr>
                        <td><input class="pan_checks" type="checkbox" id ="chck${listsearch[i]['id']}" value="${listsearch[i]['id']}"></td>
                        <td>${listsearch[i]['system_id']}</td>
                        <td>${listsearch[i]['inspection_id']}</td>
                        <td>${listsearch[i]['officer_name']}</td>
                        <td>${listsearch[i]['officer_desig']}</td>
                        <td>${listsearch[i]['officer_post_grade']}</td>
                        <td>${listsearch[i]['officer_grade_code']}</td>
                        <td>${listsearch[i]['officer_posted_in']}</td>
                        <td>${listsearch[i]['insp_date']}</td>
                        <td>${listsearch[i]['place_of_insp']}</td>
                        <td>${listsearch[i]['zone_of_insp']}</td>
                        <td>${listsearch[i]['div_of_insp']}</td>
                        <td>${listsearch[i]['type_of_insp']}</td>
                        <td>${listsearch[i]['shortcomings']}</td>
                        <td>${listsearch[i]['action_taken']}</td>
                        <td>${listsearch[i]['comments']}</td>
                        <td>${listsearch[i]['officer_email']}</td>
                        <td>${listsearch[i]['officer_mobile']}</td>
                    </tr>
                    `
                }
                $('#tableid tbody').append(row); 
                table=$('#tableid').DataTable({
                    dom: 'Blfrtip',
                    columnDefs: [{ orderable: false, targets: 0 }],
                    buttons: [
                                
                                {
                                    extend: 'excel',
                                    title: function (e) {
                                        var stre = 'Inspection Report';
                                        return stre
                                    },
                                    // orientation: 'landscape',
                                    // pageSize: 'LEGAL',
                                    
                                },
                                
                                {
                                    extend:'pdfHtml5',
                                    title: function (e) {
                                        var stre = 'Inspection Report';
                                        return stre
                                    },
                                    exportOptions: {
                                        alignment: 'right',
                                        columns: [3,4,8,9,10,11,12,13,14],
                                        },
                                    customize: function(doc) {
                                        doc.styles.title = {
                                            fontSize: '12',
                                            bold: false
                                        },
                                        doc['footer']=(function(page, pages) {
                                            return {
                                            columns: [
                                            '',
                                            {
                                            alignment: 'right',
                                            text: [
                                            'page ',
                                            { text: page.toString(), italics: true },
                                            ' of ',
                                            { text: pages.toString(), italics: true }
                                            ]
                                            }
                                            ],
                                            margin: [10, 0]
                                            }
                                        });
                                    },
             
                                    text :'Print all (not just selected)',
                                    title:"Inspection Report ",
                                    orientation : 'landscape',
                                    pageSize : 'A0',
                                    pageBreakBefore: function(currentNode, followingNodesOnPage, nodesOnNextPage, previousNodesOnPage) {
                                        return currentNode.id == 'branchrow';
                                    }
                                },
                               

                                {
                                    text: 'Print selected',
                                    action: function ( e, dt, node, config ) {
                                        makePDF();
                                    }
        }
                            ],
      
                });
                
                $('#tablediv').show();
                $('#spinnerDiv').hide();
            }
          })
        }
        function pan_checks_all_fun() {
        alert(document.getElementById("panel_checks_all").checked)
    if (document.getElementById("panel_checks_all").checked == true) {
        elements = document.getElementsByClassName("pan_checks");
        for (i = 0; i < elements.length; i++) {
            // console.log(elements[i].id)
            elements[i].checked = true
        }
    }
    else {
        
        elements = document.getElementsByClassName("pan_checks");
        for (i = 0; i < elements.length; i++) {
            elements[i].checked = false
        }
    }
}

   
    
    function makePDF(){
        id_array=[]
        elements = document.getElementsByClassName("pan_checks");
        for (i = 0; i < elements.length; i++) {
            if (elements[i].checked == true){
                id_array.push(elements[i].value)
            }
        }
        console.log(id_array)
        id_array = JSON.stringify(id_array)

        urls='/August_safety_drive_pdf/'+"?id_array=" + id_array;
        window.open(urls)
    }
    
    
    </script>
{% endblock %}