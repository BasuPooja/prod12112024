
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- ########################### -->
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous"> 
     <script src="{% static '/js/jquery-3.4.1.min.js' %}" ></script>
    <script src="{% static '/js/popper.min.js' %}" ></script>
    <script src="{% static '/js/Chart.min.js' %}"></script>
    <script src="{% static '/js/jquery-3.3.1.slim.min.js' %}" ></script>
    <script src="{% static '/js/bootstrap.min.js' %}" ></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="{% static '/js/jquery-ui.js' %}"></script>
    <script src="{% static '/js/jquery-1.12.4.js' %}"></script>
    <script src="{% static '/js/select2.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static '/css/select2.min.css' %}"  />
    <script src="{% static '/js/moment.min.js' %}"></script>

    <script src="{% static '/js/jquery-3.3.1.js' %}"></script>
    <script src="{% static '/js/sweetalert.min.js' %}"></script>
    <script src="{% static '/js/jquery.min.js' %}"></script>
    <script src="{% static '/js/bootstrap.min1.js' %}"></script>
    <script src="{% static '/js/jquery.min1.js' %}"></script>
    <script src="{% static '/js/jquery-ui.min.js' %}"></script>
    <script src="{% static '/js/jspdf.min.js' %}"></script>

    <script src="{% static '/DataTables/datatables.min.js' %}"></script>
    <script src="{% static '/js/dataTables.bootstrap4.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static '/DataTables/datatables.min.css' %}"  />


    <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap.min.css' %}"  />
    <link rel="stylesheet" type="text/css" href="{% static '/css/jquery-ui.css' %}"  />
    
    <script src="{% static '/js/jquery.timepicker.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static '/css/jquery.timepicker.min.css' %}"  />

<script type="text/javascript" src="{% static '/daterangepicker-master/moment.min.js'%}"></script>
<script type="text/javascript" src="{% static '/daterangepicker-master/daterangepicker.js'%}"></script>

<link rel="stylesheet" type="text/css" href="{%static '/daterangepicker-master/daterangepicker.css'%}" /> 
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous"> 

 
    <title>Parliament References</title>
</head>
<body>
    <br>
   <h3 class="report_heading" style="text-align: center;">Parliamentary References Indian Railways</h3>
   <br>
<div class="container">
   <div class="row">
    <div class="col-md-6">
          
        <div class="card-body">
           
           <div class="div card border-dark text-dark " style="height:500px; background-color: whitesmoke;">
         
            
                <div class="card-header" style="color: black; text-align: center; background-color: #fff; "><b>Status of Pendency (as on date)</b>
           
                </div>
              
                  <!-- inside cards  -->              
        <div class="row">                
            <div class="col-lg-4">
  
                <div class="card-body px-0 pl-2">
                    
                    <div class="div card border-dark text-dark " style="height:150px; margin-left: 2vw; background-color: #009ccc;">
                       <h6 style="text-align: center;">Parl Assurances</h6>
                       <div class="row">
                        <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">LS</h5></div>
                        <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">RS</h5></div>
                       </div>
                       <div class="row">
                        <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">{{assuranceleft}}</h5></div>
                        <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">{{assuranceright}}</h5></div>
                       </div>
                     
                    </div>
                   
                </div>
           
             </div>
             <div class="col-lg-4">
  
                <div class="card-body px-0">
                    
                    <div class="div card border-dark text-dark " style="height:150px; background-color: green;">
                        <h6 style="text-align: center;">Zero Hour</h6>
                        <div class="row">
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">LS</h5></div>
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">RS</h5></div>
                           </div>
                           <div class="row">
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">{{zerohourleft}}</h5></div>
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">{{zerohourright}}</h5></div>
                           </div>
                    </div>
                </div>
           
             </div>
             <div class="col-lg-4">
  
                <div class="card-body px-0 pr-2">
                    
                    <div class="div card border-dark text-dark " style="height:150px; margin-right: 2vw; background-color: rgb(212, 161, 19);">
                        <h6 style="text-align: center;">Petition</h6>
                        <div class="row">
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">LS</h5></div>
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">RS</h5></div>
                           </div>
                           <div class="row">
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">{{petleft}}</h5></div>
                            <div class="col md-6 ml-4"> <h5 style="color:whitesmoke;">{{petright}}</h5></div>
                           </div>
                    </div>
                </div>
           
             </div>
            </div>

            <div class="row">
                <div class="col-lg-6">
  
                    <div class="card-body px-0 pl-2 pt-0 pb-2">
                        
                        <div class="div card border-dark text-dark " style="height:140px; margin-left: 2vw; background-color: red;">
                            <h6 style="text-align: center;">Rule (LS)</h6>
                           
                                 <h5 style="color:whitesmoke; margin-left: 100px;">LS</h5>
                               
                              
                                <h5 style="color:whitesmoke; margin-left: 100px;">{{rule377left}}</h5>
                               
                              
                        </div>
                    </div>
               
                 </div>
                 <div class="col-lg-6">
  
                    <div class="card-body px-0 pr-2 pt-0 pb-2">
                        
                        <div class="div card border-dark text-dark " style="height:140px; margin-right: 2vw; background-color: gray;">
                            <h6 style="text-align: center;">Special Mention (RS)</h6>

                           <h5 style="color:whitesmoke;  margin-left: 100px;">RS</h5>
                             
                                <h5 style="color:whitesmoke;  margin-left: 100px;">{{smright}}</h5>
                              
                        </div>
                    </div>
               
                 </div>
            </div>
             <!-- inside cards done -->
            </div>
          
        </div>
   
     </div>



    <div class="col-md-6">
    <div class="card-body h-100" style="height:25%">
            <div class="div card border-dark text-dark" style="height:500px ;background-color: rgb(233, 238, 229);" >
                <div class="card-header" style="color: black; text-align: center; font-size: large; background-color: #fff;"><b>Progress During Selected Period</b></div>
              
               <div class="row">
               
                <div id="date-picker-example" class="col-md-6 pt-2 md-form md-outline input-with-post-icon datepicker" inline="true">
                  
                    <input readonly type="text" style="max-width:100%;height:2em;" autocomplete="off" placeholder="Select FROM date"  class="form-control dateofInsp" name="dateofInsp" onchange="onfromdate()" id="date1">
                  
                   
                    </div>
                    <div id="date-picker-example" class="col-md-6 pt-2 md-form md-outline input-with-post-icon datepicker" inline="true">
                       
                        <input readonly type="text"  style="max-width:100%;height:2em;" autocomplete="off" placeholder="Select TO date"  class="form-control dateofInsp" name="dateofInsp" onchange="ontodate()" id="date2">
                       
                      
                        </div>

               </div>
               <br>

               <div class="table_class" id="table_id">
                <table style="width: 100%;  background-color: #fff; "class="table table-bordered table-sm table-hover" cellspacing="0"  id="show_details3">
                    <thead  style="font-size:0.95em;">

                     <tr>
                        <th scope="col" style="width: 15px;">Type</th>
                        <th scope="col" style="width: 15px;">Opening Balance</th>
                        <th scope="col" style="width: 15px;">New Entries</th>
                        <th scope="col" style="width: 15px;">Finalised</th>
                        <th scope="col" style="width: 15px;">Closing Balance</th>
                       
                     </tr>
                    </thead>
                    <tbody>
                        {% for i in progress_list %}
                        <tr>
                            <td>{% if i.typee %}{{i.typee}} {% else %}{{0}} {%endif%}</td>
                            <td>{% if i.opnbal %}{{i.opnbal}} {% else %}{{0}} {%endif%}</td>
                            <td>{% if i.newentry %}{{i.newentry}} {% else %}{{0}} {%endif%}</td>
                            <td>{% if i.finalised %}{{i.finalised}} {% else %}{{0}} {%endif%}</td>
                            <td>{% if i.total %}{{i.total}} {% else %}{{0}} {%endif%}</td> 
                            
                            
                              
                        </tr>
                        {%endfor%}
                    
                    </tbody>
                   </table>
               </div>
              
              

                 
            </div>
            
        </div>
     
    </div>  
     
    </div>  

     <br>
    <div class="row">
        <div class="col-md-6">
        
        <div class="card-body">
                
              <!-- <h5 class="card-title">Primary card title</h5> -->
              <div class="div card border-dark text-dark" style="height:750px ;background-color: #f3d2e0;">
                <div class="card-header" style="color: black; text-align: center; font-size: large; background-color: #fff;"><b>Directorate/Board Member Wise Pendency</b></div>
                <div class="row  flex-row">
                    <ul class="nav nav-tabs ml-4">
                        <li class="nav-item">
                          <a class="nav-link active style=text-dark" aria-current="page"  href="#">Table Display</a>
                        </li>
                        <li class="nav-item">
                          <a class="nav-link"  href="#">Graphical Display</a>
                        </li>
                        <div class="col md-3 pt-2">
                            <button type="button" id="btn1" class="btn btn-danger" style="background-color: #20038a;color: white;border: 2px solid #20038a;" onclick="directorate()">Directorate</button>
                          </div>
                        <div class="col md-3 pt-2">
                            <button type="button" id="btn2" class="btn btn-danger " style="background-color: transparent; border: 2px solid #20038a; color: #20038a; "  onclick="boardmember()">Board Member</button>
                        </div>
                     </ul>
                         </div> 
              
                    <br>
                    
               <div class="table_class" id="table_iddir">
                <table style="width: 100%;  background-color: #fff;"class="table table-bordered table-sm table-hover" cellspacing="0"  id="show_details1">
                    <thead  style="font-size:0.95em;">

                     <tr>
                        <th scope="col" style="width: 15px;">Directorate</th>
                        <th scope="col" style="width: 15px;">Assurance</th>
                        <th scope="col" style="width: 15px;">Rule377</th>
                        <th scope="col" style="width: 15px;">Special Mention</th>
                        <th scope="col" style="width: 15px;">Petition</th>
                       
                     </tr>
                    </thead>
                    <tbody>
                        {% for i in parlia_dirwise %}
                        <tr>
                              
                            <td>{% if i.designame %}{{i.designame}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countass %}{{i.countass}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countrule377 %}{{i.countrule377}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countspecialmention %}{{i.countspecialmention}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countpetition %}{{i.countpetition}} {% else %}{{0}} {%endif%}</td>

                             </tr>
                        {%endfor%}
                    </tbody>
                   </table>
               </div>

                    
               <div class="table_class" id="table_idbm">
                <table style="width: 100%;  background-color: #fff;"class="table table-bordered table-sm table-hover" cellspacing="0"  id="show_details11">
                    <thead  style="font-size:0.95em;">

                     <tr>
                        <th scope="col" style="width: 15px;">Board Member</th>
                        <th scope="col" style="width: 15px;">Assurance</th>
                        <th scope="col" style="width: 15px;">Rule377</th>
                        <th scope="col" style="width: 15px;">Special Mention</th>
                        <th scope="col" style="width: 15px;">Petition</th>
                       
                     </tr>
                    </thead>
                    <tbody>
                        {% for i in parlia_bmwise %}
                        <tr>
                            <td>{% if i.designame %}{{i.designame}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countass %}{{i.countass}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countrule377 %}{{i.countrule377}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countspecialmention %}{{i.countspecialmention}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countpetition %}{{i.countpetition}} {% else %}{{0}} {%endif%}</td>
                             

                             </tr>
                        {%endfor%}
                    </tbody>
                   </table>
               </div>

              
                
            </div>
            </div>
        </div>
        <br>
        <div class="col-md-6">
         <div class="card-body h-100" style="height:25%">
                <div class="div card border-dark text-dark" style="height:750px ;background-color:  #d3e1ef;">
                    <div class="card-header" style="color: black; text-align: center; font-size: large; background-color: #fff;"><b>AM/PED Wise Current Pendency</b></div>
                   <div class="row">

                    <div class="btn-group col-md-3 pt-3 ml-4">
                      
                        
                        <select class="form-control" id="dropd" data-live-search="true" data-actions-box="true" onchange="getdata()" style="max-width:100%; height:3em;">
                            <option>Board Member</option>

                           {% for i in bm_names_list %}

                            <option value="{{i.bm_name}}">{{ i.bm_name }}</option>
                          
                          {%endfor%}
                           
                        </select>

                      </div>
                      
                    <div class="btn-group col-md-3 pt-3">
                      
                        <select class="form-control" id="dropd1" data-live-search="true" onchange="getdata1()" data-actions-box="true" style="max-width:100%; height:3em;">
                            <option>Directorate</option>
                            {% for i in directory_names_list %}
                           
                            <option value="{{i.dir_name}}">{{i.dir_name}}</option>
                          
                          {%endfor%}
                           
                        </select>
                      </div>
                  
                   </div>
                   <br>
               <div class="table_class" id="table_id">
                <table style="width: 100%; background-color: #fff;"class="table table-bordered table-sm table-hover" cellspacing="0"  id="show_details2">
                    <thead  style="font-size:0.95em;">

                     <tr>
                        <th scope="col" style="width: 15px;">Officer</th>
                        <th scope="col" style="width: 15px;">Assurance</th>
                        <th scope="col" style="width: 15px;">Rule377</th>
                        <th scope="col" style="width: 15px;">Special Mention</th>
                        <th scope="col" style="width: 15px;">Zero hour</th>
                        <th scope="col" style="width: 15px;">Petition</th>
                       
                     </tr>
                    </thead>
                    <tbody>
                        {% for i in officerwise_dir %}
                        <tr>
                            <td>{% if i.desigcode %}{{i.desigcode}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countasur %}{{i.countasur}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.count377 %}{{i.count377}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.specialmentioncount %}{{i.specialmentioncount}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countzerohour %}{{i.countzerohour}} {% else %}{{0}} {%endif%}</td> 
                            <td>{% if i.countpetition %}{{i.countpetition}} {% else %}{{0}} {%endif%}</td> 
                           
                            
                        </tr>
                        {%endfor%}
                    
                    </tbody>
                   </table>
               </div>
                    
                </div>
            </div>
         
        </div>  
         
        </div>  
    

   
 
</div>

</body>
<script>
  $(document).ready(function(){
    $('#table_idbm').hide();
     $('#show_details1').DataTable({
        "lengthChange":false,
        searching:true,
        scrollX:true,
        scrollY:true,
        paging:true,
        // pageLength:4,
        scrollCollapse:true,
     }
       
     )
     $('#show_details2').DataTable({
        "lengthChange":false,
        searching:true,
        scrollX:true,
        scrollY:true,
        paging:true,
        // pageLength:10,
        scrollCollapse:true,
     })
     $('#show_details3').DataTable({
        "lengthChange":false,
        searching:true,
        scrollX:true,
        scrollY:true,
        paging:true,
        pageLength:4,
        scrollCollapse:true,
     })
    });

    function directorate(){
        alert('directorate clicked')
        $('#table_idbm').hide();  // board member vala table
        $('#table_iddir').show();
    }

    function boardmember(){
        alert('board member clicked')
        $('#table_iddir').hide(); // hide directorate vala table
        $('#table_idbm').show();
        $('#show_details11').DataTable({
        "lengthChange":false,
        searching:true,
        scrollX:true,
        scrollY:true,
        paging:true,
        pageLength:4,
        scrollCollapse:true,
        // pagingType:"simple",
       
     })
    }
   $( function() {
    var currentdate= new Date();
    $( "#date1" ).datepicker({ 
        maxDate: currentdate,
      enddate: "currentdate",
      dateFormat: "dd/mm/yy",
      changeMonth: true,
      changeYear: true,
      todayHighlight: true,
      clearBtn: true,
      pageLength:4,
    });

    $( "#date2" ).datepicker({ 
        maxDate: currentdate,
      enddate: "currentdate",
      dateFormat: "dd/mm/yy",
      changeMonth: true,
      changeYear: true,
      todayHighlight: true,
      clearBtn: true,
      pageLength:4,
    });
   
 } );

 function getdata(){
    var x=$('#dropd').val()
    data={
        'x':x,
    }
    
    $.ajax({
        url: "{% url 'getdata' %}",
        dataType: 'json',
        data: data,
        type: 'GET',
        success:function(response){
            console.log(response)
            $('#table_id tbody').empty()
           
            for(let i=0;i<response.finallist.length;i++){
                let row='<tr>'
                row+=`<td>`+response.finallist[i].desigcode+`</td>`
                if(response.finallist[i].countasur==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist[i].countasur+`</td>`
                }
                // row+=`<td>`+response.finallist2[i].countasur+`</td>`
                if(response.finallist[i].count377==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist[i].count377+`</td>`
                }
                if(response.finallist[i].specialmentioncount==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist[i].specialmentioncount+`</td>`
                }
                if(response.finallist[i].countzerohour==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist[i].countzerohour+`</td>`
                }
                if(response.finallist[i].countpetition==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist[i].countpetition+`</td>`
                }

                row +=`</tr>`
                $('#table_id tbody').append(row)
            }
        }
    })
   
 }


 function getdata1(){
    var y=$('#dropd1').val()
    data={
        'y':y,
    }
    
    $.ajax({
        url: "{% url 'getdata1' %}",
        dataType: 'json',
        data: data,
        type: 'GET',
        success:function(response){
            console.log(response)
            $('#table_id tbody').empty()
           
            for(let i=0;i<response.finallist2.length;i++){
                let row='<tr>'
                row+=`<td>`+response.finallist2[i].desigcode+`</td>`
                if(response.finallist2[i].countasur==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist2[i].countasur+`</td>`
                }
                // row+=`<td>`+response.finallist2[i].countasur+`</td>`
                if(response.finallist2[i].count377==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist2[i].count377+`</td>`
                }
                if(response.finallist2[i].specialmentioncount==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist2[i].specialmentioncount+`</td>`
                }
                if(response.finallist2[i].countzerohour==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist2[i].countzerohour+`</td>`
                }
                if(response.finallist2[i].countpetition==null){
                    row+=`<td>0</td>`
                }else{
                    row+=`<td>`+response.finallist2[i].countpetition+`</td>`
                }

                row +=`</tr>`
                $('#table_id tbody').append(row)
            }
        }
    })
   
 }

 function onfromdate(){
    var from=$('#date1').val()
    alert(from)
    data={
        'from':from,
    }
    $.ajax({
        url: "{% url 'onfromdate' %}",
        dataType: 'json',
        data: data,
        type: 'GET',
        success:function(){

        }
    })
 }

 function ontodate(){
    var to=$('#date2').val()
    alert(to)
    data={
       'to':to,
    }
    $.ajax({
        url: "{% url 'ontodate' %}",
        dataType: 'json',
        data: data,
        type: 'GET',
        success:function(){

        }
    })
 }

</script>

</html>
