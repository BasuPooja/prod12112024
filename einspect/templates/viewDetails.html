{% extends 'base.html' %} 
{% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous"> -->
    <script src="{% static '/js/jquery-3.4.1.min.js' %}" ></script>
    <script src="{% static '/js/popper.min.js' %}" ></script>
    <script src="{% static '/js/Chart.min.js' %}"></script>
    <script src="{% static '/js/jquery-3.3.1.slim.min.js' %}" ></script>
    <script src="{% static '/js/bootstrap.min.js' %}" ></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
    <script src="{% static '/js/jquery-ui.js' %}"></script>
    <script src="{% static '/js/jquery-1.12.4.js' %}"></script>
    <script src="{% static '/js/select2.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static '/css/select2.min.css' %}"  />
    <script src="{% static '/js/moment.min.js' %}"></script>

    <script src="{% static '/js/jquery-3.3.1.js' %}"></script>
    <script src="{% static '/js/sweetalert.min.js' %}"></script>
    <script src="{% static '/js/jquery.min.js' %}"></script>
    <script src="{% static '/js/bootstrap.min1.js' %}"></script>
    <script src="{% static '/js/jquery.min1.js' %}"></script>
    <script src="{% static '/js/jquery-ui.min.js' %}"></script>
    <script src="{% static '/js/jspdf.min.js' %}"></script>

    <script src="{% static '/DataTables/datatables.min.js' %}"></script>
    <!-- <script src="{% static '/js/dataTables.bootstrap4.min.js' %}"></script> -->
    <link rel="stylesheet" type="text/css" href="{% static '/DataTables/datatables.min.css' %}"  />


    <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap.min.css' %}"  />
    <link rel="stylesheet" type="text/css" href="{% static '/css/jquery-ui.css' %}"  />
    
    <script src="{% static '/js/jquery.timepicker.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static '/css/jquery.timepicker.min.css' %}"  />
    
  <!-- swasti link -->

<script type="text/javascript" src="{% static '/daterangepicker-master/moment.min.js'%}"></script>
<script type="text/javascript" src="{% static '/datepicker-master/moment.min.js'%}"></script>
<script type="text/javascript" src="{% static '/daterangepicker-master/daterangepicker.js'%}"></script>

<link rel="stylesheet" type="text/css" href="{%static '/daterangepicker-master/daterangepicker.css'%}" />
<link ;href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>

<link rel="stylesheet" type="text/css" href="{% static '/css/forms_common.css' %}" />

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Document</title>
<style>
  .checked {
  color: orange;
}
    .tab {
    display: none;
  }
  .rating {
display: flex;
flex-direction: row-reverse;
justify-content: center;
}


.rating > input{ display:none;}

.rating > label {
position: relative;
width: 1em;
font-size: 2vw;
color: #FFD700;
cursor: pointer;
}

.rating > label::before{
content: "\2605";
position: absolute;
opacity: 0;
}

.rating > label:hover:before,
.rating > label:hover ~ label:before {
opacity: 1 !important;
}

.rating > input:checked ~ label:before{
opacity:1;
}

.rating:hover > input:checked ~ label:before{ opacity: 0.4; }


.active{
  background-color: red;
}
.child:hover{
  background-color: gray;
}

</style>
</head>
<body>

  <div>
    <h3 class="report_heading">{{instype.0.name}} Inspection of {{l1.0.entitydetails}} {{l2.0.entityid}} by {{desgn.0.designation}} on {{date.0.inspected_on|date:'d/m/Y'}}</h3>
  </div>

    <div class="container mt-5">
        <div class="tab">
            <h6 class="text-justify"><u>INSPECTION DETAILS</u></h6>

              <div class="form-row mt-3">
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">Railways</label>
                  <input type="text" name="name1" id="userdata3" class="form-control" style="max-width:100%;height:2em;" value="{{rly.0.location_description}}" disabled />
                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">Division
                  </label><br>
                  <input type="text" name="name1" id="userdata3" class="form-control"  style="max-width:100%;height:2em;" value="{{div.0.location_description}}" disabled />
                </div>                               
              </div>

              <div class="form-row my-2">
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">Officer Name
                  </label><br>
                  <input type="text" name="name1" id="userdata2" class="form-control"  style="max-width:100%;height:2em;" value="{{request.user.first_name}}" disabled />
                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">Officer Designation
                  </label><br>
                  <input type="text" name="name1" id="userdata3" class="form-control" style="max-width:100%;height:2em;" value="{{desgn.0.designation}}" disabled />
                </div>
              </div>

              <div class="form-row my-2">
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">Start Date
                  </label><br>
                  <input type="text" name="name1" id="userdata9" class="form-control" style="max-width:100%;height:2em;" value="{{stdate.0.start_date}}" maxlength="6" disabled/>
                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">Start Time
                  </label><br>
                  <input type="text" name="name1" id="userdata9" class="form-control" style="max-width:100%;height:2em;" value="{{sttime.0.start_time}}" maxlength="6" disabled/>
                </div>
              </div>

              <div class="form-row my-2">
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">End Date
                    
                  </label><br>
                  <input type="text" name="name1" id="userdata9" class="form-control" style="max-width:100%;height:2em;" value="{{enddate.0.end_date}}" maxlength="6" disabled/>
                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">End Time
                  </label><br>
                  <input type="text" name="name1" id="userdata9" class="form-control" style="max-width:100%;height:2em;" value="{{endtime.0.end_time}}" maxlength="6" disabled/>
                </div>
              </div>

              <div class="form-row my-2">
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class="lbl-caption p-0" name="userLabel">Inspection Of
                  </label><br>
                  <input type="text" name="name1" id="userdata8" class="form-control" style="max-width:100%;height:2em;" value="{{instype.0.name}}" disabled />
                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="fromstation" class=" lbl-caption p-0" name="userLabel">{{l1.0.entitydetails}}{{' Details'}}
                  </label><br>
                  <input type="text" name="name1" id="userdata9" class="form-control" style="max-width:100%;height:2em;" value="{{l2.0.entityid}}" maxlength="6" disabled/>              
                </div>
              </div>
            </div>

            {% for i,j in question.items %}
            <div class="tab">
              <h6 class="text-justify text-uppercase"><u>{{i}}</u></h6>
              <div class="form-row mt-3">
              {% for k,l in j.items %}
              <div class="form-group col-lg-6 col-md-6 col-sm-12">
                <label class="lbl-caption p-0" for="exampleInputEmail1">{{k}}</label>
                <input type="text" style="max-width:100%;height:2em;" class="form-control" readonly value="{{l.0.value|default:'NA'}}">
              </div>
              {% endfor %}
            </div>      
            </div>
            {% endfor %}

            <div class="tab">
              <h6 class="text-justify text-uppercase"><u>Inspection Conclusion</u></h6>

              <div class="form-row mt-3">
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="priority" class="lbl-caption p-0">Any Other Abnormality Noticed</sup></label>
                  <input type="text" name="name1" id="userdata3" class="form-control" style="max-width:100%;height:2em;" value="{{abn}}" disabled />
                </div>
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <label for="priority" class="lbl-caption p-0">Remarks</label>
                <input type="text" name="name1" id="userdata3" class="form-control" style="max-width:100%;height:2em;" value="{{remark}}" disabled />
                </div> 
                <div class="form-group col-lg-6 col-md-6 col-sm-12">
                  <input id="ratings" type="text" value="{{rating.0.ratings}}" hidden>
                  <label for="priority" class="lbl-caption">Overall Rating</label>           
                  <div style="color: rgb(208, 208, 62); font-size: 20px;">
                    <span data-id="4" class="fa fa-star"></span>
                    <span data-id="3" class="fa fa-star"></span>
                    <span data-id="2" class="fa fa-star"></span>
                    <span data-id="1" class="fa fa-star"></span>
                    <span data-id="0" class="fa fa-star"></span>
                  </div>
                </div>                               
              </div>
            </div>
        </div>

        <div class="container">
          <div class="row">
            <div class="col-lg-2 col-md-4 col-sm-5 mt-3">
              <div type="button" class="btn btn-info btn-block" id="prevBtn" onclick="nextPrev(-1)">&laquo; Previous</div>
            </div>
            <div class="col-lg-8 col-md-4 col-sm-2"></div>
            <div class="col-lg-2 col-md-4 col-sm-5 mt-3">
              <button type="button" class="btn btn-info btn-block" id="nextBtn" onclick="nextPrev(1)">Next &raquo;</button>
            </div>
          </div>
        </div>

 
<script>
  
$('div.demo11').each(function() {
    let ratings=parseInt($('#ratings').val());
    console.log(ratings)
    for(i1=0;i1<ratings;i1++){
      // $(this).find('span[data-id="${i}"]').addClass('checked');
      // $(this).find('span[data-id="0"]').addClass('checked');
      $(this).find(`span[data-id="${i1}"]`).addClass('checked');
      // console.log("demo"+{i1})
      // $('.demo'+{i1}).addClass('checked');
    }

  });



  var currentTab = 0; // Current tab is set to be the first tab (0)
  showTab(currentTab); // Display the current tab
  
  function showTab(n) {
    // This function will display the specified tab of the form ...
    var x = document.getElementsByClassName("tab");
    console.log("end pagination",x.length,n)
    x[n].style.display = "block";
    // ... and fix the Previous/Next buttons:
    if (n == 0) {
      document.getElementById("prevBtn").style.display = "none";
    } else {
      document.getElementById("prevBtn").style.display = "inline";
    }
    if (n == (x.length - 1)) {
      document.getElementById("nextBtn").style.display = "none";
      
    } 
    else if (n < (x.length - 1)) {
      document.getElementById("nextBtn").style.display = "inline-block";
      
    } 
    else {
      document.getElementById("nextBtn").innerHTML = "Next";
    }
    // ... and run a function that displays the correct step indicator:
  }
  
  // function nextPrev(n) {
  //   // This function will figure out which tab to display
  //   var x = document.getElementsByClassName("tab");
  //   // Exit the function if any field in the current tab is invalid:
  //   // Hide the current tab:
  //   x[currentTab].style.display = "none";
  //   // Increase or decrease the current tab by 1:
   
  //   // if you have reached the end of the form... :
  //   if(currentTab < n && (n-currentTab)!=1){
  //     currentTab = n
  //   }
  //   else if(currentTab > n && (currentTab - n)!=1){
  //     currentTab = n
  //   }
  //   else if(currentTab < n && (n-currentTab)==1){
  //     currentTab = currentTab+ (n-currentTab)
  //   }
  //   else if(currentTab > n && (currentTab - n)==1){
  //     currentTab = currentTab+ (n-currentTab)
  //   }
  //   else{
  //     currentTab = currentTab + n;
  //   }
  //   if (currentTab >= x.length) {
  //     //...the form gets submitted:
  //     document.getElementById("regForm").submit();
  //     return false;
  //   }
  //   // Otherwise, display the correct tab:
  //   showTab(currentTab);
  // }
  
  
  
  function nextPrev(n) {
    // This function will figure out which tab to display
    var x = document.getElementsByClassName("tab");
    // Exit the function if any field in the current tab is invalid:
    // Hide the current tab:
    x[currentTab].style.display = "none";
    // Increase or decrease the current tab by 1:
    currentTab = currentTab + n;
    // if you have reached the end of the form... :
    if (currentTab >= x.length) {
      //...the form gets submitted:
      document.getElementById("regForm").submit();
      return false;
    }
    // Otherwise, display the correct tab:
    showTab(currentTab);
  }
  
  function mydata(da){
    var x = document.getElementsByClassName("tab");
    var y = document.getElementsByClassName("mydata1");
    console.log("y",y)
    x[currentTab].style.display = "none";
    if(da>=1){
      currentTab = da
      // y[currentTab].style.backgroundColor = "red";
      y[currentTab].className.replace("mydata1",'active')
      console.log(currentTab)
    }
    else{
      currentTab = 0
    }
    showTab(currentTab)
  }
  </script>
  <script>
    
  </script>
   
</body>
</html>
{% endblock content %}