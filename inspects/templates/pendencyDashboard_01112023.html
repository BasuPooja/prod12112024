{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load convertoInt %}

<head>
<!--
    <script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.flash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.print.min.js"></script>
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.13.3/css/jquery.dataTables.min.css"
    />
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/buttons/2.3.5/css/buttons.dataTables.min.css"
    /> -->
    <style>
        .slash {
        font-size: 0.9em;
        }
        .backgroundImage {
           
            background-image:url('{% static "images/flag.jpg" %}');
            background-repeat: no-repeat;
            background-size: 100% 100%;
        }
        #mapZone{
            /* changes made by Ayushika */
            /* height: 75%; */
            height: 100%;
        }
       
        svg {

            transform: scale(1.2);
        }

        .box {
            border-style: solid;
            border-color: darkred;
            border-radius: 10px;
            border-width: 8px;
            background-color: beige;
            color: #fff;
        }

    </style>
    <style>
        .row
        {
            margin-top:10px;
        }
        .mainDiv{
            margin-top: -1%;
            /* background-color: aqua; */
            height: 100%;
            padding-top: 0%;
            margin-left: 0.5%;
        }
        .headingRow{
            /* background-image: radial-gradient(circle farthest-side, #fceabb, #f8b500); */
            background-color: #63a4ff;
background-image: linear-gradient(315deg, #63a4ff 0%, #83eaf1 74%);
            margin-left: 0%;
            margin-top: 0%;
            padding-left: 0%;
            padding-right: 0%;
            /* height: 80px;; */
        }
        .Rcard{
            width:100%;            
            /* background-color: #fff; */
            background-color: #e6f3ff;
            color: #0a0a0a;
            border:1px solid #aeaeae;
            box-shadow: 0 1px 2px 0 rgba(0,0,0,0.2);
            padding:5px;
            /* border: 2px solid #17a2b8; */
        }
        .totalItems{
            width:33%;
            background-color: #28a7455c;
            /* border: 2px solid #28a745; */
            color: #000000;
        }
        .pendingItems{
            width:34%;
            background-color: #ffc10754;
            /* border: 2px solid #ffc107; */
            color: #000000;
        }
        .overdueItems{
            width:33%;
            background-color: #dc354570;
            /* border: 2px solid #dc3545; */
            color: #000000;
        }
        .cardsHeaders{
            background-color: #e7eff9;
            background-image: linear-gradient(315deg, #e7eff9 0%, #cfd6e6 74%);
        }
       
    .card-body{
        padding: 0%;
    }
    table{
        width: 100%;
        text-align: center;
    }
    .summary-card{
        height:100%;
        /* overflow: hidden; */
        /* overflow-y:scroll;
        overflow: hidden; */
       
    }
    .summary-card table td, .summary-card table th{
       padding:0px;
       width:25%;        
    }
    .summary-card .card-body{
        /* background:#eee6ff; */
         /* overflow: hidden; changes made by ayushika */
    }
    .summary-card
    .list-group-item{
        padding-top: 0%;
        /* border: 2px solid #ffb27a; */
        border-radius: 7px;
        background-color: #ffe9d9
    }
    /* .col-md-4{
        padding: 0%;
    }
    .col-md-6{
        padding: 0%;
    }
    .col-12{
        padding: 0%;
    } */
   
    </style>
    <style>
        .cards2 {
           
          /* padding: 1px !important; */
          text-align: center;
          background-color: blanchedalmond;
          margin-left: -20%;

      }

      .cards3 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: rgb(188, 253, 188);
          margin-left: 4%;
      }

      .cards4 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: rgb(204, 235, 251);
          margin-left: 4%;

      }

      .cards5 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: rgb(251, 245, 192);
          margin-left: 4%;
      }

      .cards6 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: blanchedalmond;
          margin-left: 4%;
      }
      .PendTable td{
        padding: 0.5%;
      }
      .PendTable th{
        padding: 0.5%;
      }
      .PendTable thead{
        /* chnages made by ayushika */
        /* background: #b32400; */
        background: #eee6ff;
        color:#000000;
        font-weight:500;
        /* text-transform:uppercase; */
      }
     .entity{
        text-align: left;
        font-weight: 600;
        /* background-color: #f7b4ac; */
     }
     .alertscard{
        /* border: 2px solid #ffb27a; */
        border-radius: 7px;
        background-color: #ffe9d9
     }
     .card-caption
     {
        font-size:0.9rem;
        color:#4d4d4d;
        font-weight:600
     }
     .stats-val
     {
        font-size:0.9rem;
        color:#0059b3;
        font-weight:500
     }
     .stats-val2
     {
        font-size:0.9rem;
        color:#2b2b2b;
        font-weight:500
     }
     .stats-head
     {
        font-weight:600;
        text-transform:uppercase;
        color:#000;
        font-size:0.9rem;
        text-align:left;
     }
     /* .overalStatsTable th
     {
        color:#595959;
        font-size:0.9rem;
        font-weight:500;
     }*/
     .overalStatsTable td
     {
        color:#000;
        font-size:1.1rem;
        font-weight:600;
     }
     .overalStatsTable td a
     {
        font-weight:600;
        color:#0059b3;
        text-decoration:none;
        cursor:pointer;
     }
     .overalStatsTable td a:hover
     {
        color:#ff6600;
     }
     .pendency-head
     {
        margin-bottom:0px;
        font-weight:600;
        width:100%;
        text-align: left;
        font-size:1rem;
        position: relative;
    padding-bottom: 3px;
    padding-left:1rem;
    color:#b32400;
     }
.custom-table
{
    margin-top:4px;
}
.custom-table th.days
{
   color:#4d4d4d;
   font-size:1rem;
   font-weight:500;
   text-align:center;
   /* padding-left:1rem; */
}
.custom-table td.count
{
   color:#000;
   font-size:1.1rem;
   font-weight:600;
   padding:0%;
}
.lbl-caption
{
    font-weight:600;
    color:#000;
    font-size:14px;
}
.form-group {
  margin-bottom: 10px !important;
}
    </style>
    <style>
        .badge{
    font-size: 100%;
}
.overalStatsTable th
     {
        background-color: #cce6ff ;
        color:#595959;
        font-size:0.9rem;
        font-weight:500;
     }
      .overalStatsTable th:nth-child(2) {
        background-color: #ffffb3 ;
    }

    .overalStatsTable th:nth-child(3) {
        background-color: #ffcccc;
    }
    /* changes made  */
    .overalStatsTable th:nth-child(4) {
        background-color: #DFCCFB;
    }
    </style>
    <style>
        .alert-card{
        height:165px;
        overflow-y:scroll;
        overflow: hidden;
       
    }
    .alert-card table td, .alert-card table th{
       padding:2px;
       width:33%;        
    }
    .alert-card .card-body{
        background:#eee6ff;
    }
    .alert-card
    .list-group-item{
        padding-top: 0%;
        border-radius: 7px;
        background-color: #d9ffda
    }
    </style>
    <style>
        /* The Modal */
        .modal {
             display: none;
             /* position: fixed;
             width: 100%;
             height: 100%;  */
             background-color: rgba(0, 0, 0, 0.5); /* Black with opacity */
            }
           
           /* #modaldismis{
            float: right;
            margin-top :-80px;
            font-size: large;
            padding-inline: 10px;
            margin-top: 10px;
        } */
/* Modal Content */
.modal-content {
    background-color: #F5F5F4;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-height: 80%;
    background-color: #F5F5F4;
}

#table-container {
    max-height: 100%;
     overflow: auto;  
   
}
#table_id1 thead {
    position: sticky;
    top: 0;
    background-color: #2b7bea;
    white-space: nowrap;
    font-size: 1.2rem;
    color: white;
    z-index: 1;
}
#table_id thead {
    position: sticky;
    top: 0;
    background-color: #2b7bea;
    white-space: nowrap;
    font-size: 1.2rem;
    color: white;
    z-index: 1;
}

/* Table within Modal */


/* Close Button */
.closebtn {

    margin-top: -40%;
    cursor: pointer;
    font-size: large;
    padding-inline: 10px;
    margin-left: 95%;
}
  .custom-excel-button{
    background-color: green;
  }

 
/* Style for the container around the radio buttons */
#anvi {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px; /* Add some padding for spacing */
    margin-bottom: -2.5%;
}
#gurleen {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px; /* Add some padding for spacing */
    margin-bottom: -2.5%;
}

/* Style for individual radio button boxes */
.radio-box {
    border: 1px solid #ccc; /* Add a border around each radio button box */
    padding: 5px; /* Add padding to create space within each box */
    margin-right: 10px; /* Add margin between radio button boxes */
    border-radius: 10%;
    /* background: linear-gradient(110.1deg, rgb(241, 115, 30) 18.9%, rgb(235, 41, 64) 90.7%); */
    /* background: radial-gradient(circle at 10% 20%, rgb(186, 190, 245) 0%, rgb(192, 192, 245) 33.1%, rgb(218, 203, 246) 90%); */
    background-color: #EBDEF0;  
   
}
.check-box
{
    border: 1px solid #ccc; /* Add a border around each radio button box */
    padding: 5px; /* Add padding to create space within each box */
    margin-right: 10px; /* Add margin between radio button boxes */
    border-radius: 10%;
    /* background: linear-gradient(110.1deg, rgb(241, 115, 30) 18.9%, rgb(235, 41, 64) 90.7%); */
    /* background: radial-gradient(circle at 10% 20%, rgb(186, 190, 245) 0%, rgb(192, 192, 245) 33.1%, rgb(218, 203, 246) 90%); */
    background-color: #EBDEF0;  
   
   
}
 #check {
   
    align-items: center;
    margin-top: 2.5%;
   
   
   
}
#check1{
    align-items: center;
    margin-top: 2.5%;
}

/* Style for the radio buttons */
.custom-label {
    margin: 0; /* Reset margin for radio labels */
}

/* Style for the select elements */
.form-control {
    max-width: 100%;
}

/* Style for the heading */
.heading {
    font-size: 20px;
}

/* Style for the Close button */
/* #modaldismis { */
   /* Add margin to separate from the heading */
/* } */

.heading-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-left: 42%;
  }

  .heading {
    font-size: 23px;
   
   
  }

  .close-button {
    margin-left: auto;
  }





</style>

<style>
    #thead1 th {
    background-color:#966FD6;  
    color:whitesmoke;
}
#thead2 th {
    background-color:#966FD6;  
    color:whitesmoke;
}

/* Change table border and cell separation to yellow */
#table_id {
    border: 3px solid #966FD6;
    border-collapse: separate;
    border-spacing: 5px; /* Adjust the value as needed */
    width: 100%;
    overflow-y: auto; /* Enable scrolling within the table */
    overflow-x: auto;
    max-height: calc(100% - 40px); /* Subtract padding from modal content */
    margin-top: 70px;
}
#table_id1 {
    border: 3px solid #966FD6;
    border-collapse: separate;
    border-spacing: 5px; /* Adjust the value as needed */
    width: 100%;
    overflow-y: auto; /* Enable scrolling within the table */
    overflow-x: auto;
    max-height: calc(100% - 40px); /* Subtract padding from modal content */
    margin-top: 70px;
}

#table_id tr:nth-child(even) {
    background-color: #EBDEF0; /* Even rows are white   # #*/
}
#table_id1 tr:nth-child(even) {
    background-color: #EBDEF0; /* Even rows are white   # #*/
}

#table_id tr:nth-child(odd) {
    background-color: white; /* Odd rows are orange  #facf7e*/
}
#table_id1 tr:nth-child(odd) {
    background-color: white; /* Odd rows are orange  #facf7e*/
}
/* .table-striped > tbody > tr:nth-child(odd) > td,
.table-striped > tbody > tr:nth-child(odd) > th {
  white-space: nowrap;
}
#table_id {
  overflow: auto;
}
#table_id1 {
  overflow: auto;
} */

div.dt-buttons button.dt-button.buttons-excel {
    background-color: green;
    color: white;
    border-radius: 10%;
}

/* PDF button color */
div.dt-buttons button.dt-button.buttons-pdf {
    background-color: red;
    color: white;
    border-radius: 5%;
}

/* Print button color */
div.dt-buttons button.dt-button.buttons-print {
    background-color: rgb(93, 93, 254);
    color: white;
    border-radius: 5%;
}


/* Add red underline to the heading */
#demo {
    position: relative;
    margin-top: 2%;
}

#demo::after {
    content: "";
    position: absolute;
    bottom: -2px; /* Adjust this value to control the underline position */
    left: 0;
    width: 100%;
    height: 6%;
    margin: -1%;
    background-color: #966FD6;
}
.zonetable-show-hide {
            display: none;
        }

</style>
<style>
    /* changes made by ayushika for pending item table */

    .selected {
            color: red;
        }

    /* Set equal width for each table column */
    .summary-card .table th,
    .summary-card .table td {
        width: calc(100% / 7); /* Distributing equally among 6 columns */
        text-align: center; /* Center-align content in columns */
    }
    .summary-card .button {
        cursor: pointer;
        position: relative;
        font-size: 0.9rem;
    }
    .summary-card .button:hover {
        color: red;
    }
    .active {
        font-weight: bold;
    }
   
</style>
<style>
    .border-left {
    border-left: 1px solid  #d0e1e1!important;
}
    .border-bottom{
     border-bottom: 2px solid  #d0e1e1 !important;
    }
   
   .cardt{
       background-color:  #fadccd;
   
   }
   .cardp{
    background-color:   #ffe6ff;
   }
   .cardp1{
    background-color:  #ecffe6;
   }
   .cardo{
    background-color:  #ffffd6;
   }
   .sumtable th, td{
    padding:0.5%;
   }
 .sumtable{
    margin-bottom: 0rem;
   }
   .long-and-truncated-with-child{
    overflow: hidden;
    max-width: 100%;
    text-overflow: ellipsis;
    width: fit-content;
    white-space: nowrap;
   }
   table td {
    max-width: 400px; /* Adjust this value as needed */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

   
</style>
</head>
<body>  

    <input type="hidden" id="typeID" value="IR">
    <input type="hidden" id="zoneID" value="">
    <input type="hidden" id="divID" value="">
    <input type="hidden" id="INSPITEMTYPE" value="">
    <div id="main">
    <div class="container-fluid mainDiv">
        <div class="row headingRow">
            <div class="col-sm-12 col-md-12 col-lg-4 d-flex align-items-center">
                <img src="../static/images/irlogo.png" alt="IR" width="60" height="60">
                <div class="ml-3"> <!-- Add some margin to separate the image and heading -->
                    <h3 class="font-weight-bold text-black text-center" style="font-size: 1.5rem; font-weight: 600;">INSPECTION OVERVIEW</h3>
                </div>
            </div>
            <!-- <div class="col-sm-12 col-md-12 col-lg-4"><h3 class="font-weight-bold text-black float-justify text-center" style="margin-top:2rem;font-size:1.5rem;font-weight:600;"> PENDENCY
                DASHBOARD </h3></div> -->
            <div class="col-lg-8">
                <div class="" id="filterForm">
                    <form method="POST">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">From Date</label>
                                    <input readonly type="text" autocomplete="off" placeholder="Select Start Date" style="background-color: white"
                                        class="form-control" name="startDate" id="startDate" value="{{irStartDate}}">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">To Date</label>
                                    <input readonly type="text" autocomplete="off" placeholder="Select End Date" style="background-color: white"
                                        class="form-control" name="endDate" id="endDate" value="{{irEndDate}}">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-3">
                                <div class="form-group">
                                    <label class="lbl-caption">Department</label>
                                   



                                    <select class="form-control" data-live-search="true" name="searchDepartment" onchange="getDataOfFilter('all')"
                                        id="searchDepartment" data-actions-box="true" >  
                                        <option value="All">All</option>
                                        {% for i in allDepartment %}
                                       
                                        <option value="{{i.department_code}}" {% if irSearchDept == i.department_code %} selected {% endif %}>{{i.department_name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-3">
                                <div class="form-group">
                                    <label class="lbl-caption">Designation</label>
                                    <select class="form-control" data-live-search="true" name="searchDesignation" onchange="getDataOfFilter('desig')"
                                        id="searchDesignation" data-actions-box="true">
                                        <option value="All">All</option>  
                                        {% for i in allDesignation %}
                                        <option value="{{i.designation_code}}" {% if irSearchDesig == i.designation_code %} selected {% endif %}>{{i.designation}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">Level</label>
                                    <select class="form-control" data-live-search="true" name="searchLevel" onchange="getDataOfFilter('level')"
                                        id="searchLevel" data-actions-box="true">
                                        <option value="All">All</option>  
                                        <option value="BM">BM</option>
                                        <option value="GM">GM</option>
                                        <option value="DRM">DRM</option>
                                        <option value="SAG">HAG/SAG</option>
                                        <option value="JAG">JAG</option>
                                        <option value="SS/JS">SS/JS</option>
                                    </select>
                                </div>
                            </div>

                            <!-- <div class="col-sm-12 col-md-3" style="margin-top: 2%;">
                                <div class="row text-center">
                                    <div class="form-group mx-auto">
                                        <div class="btn-toolbar mx-1" role="toolbar">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-success btn-sm" name="submit" onclick="searchAllFunction('Search')"value="search">Continue</button>
                                                <button type="button" class="btn btn-danger btn-sm" name="submit" onclick="searchAllFunction('Reset')" value="reset">Reset</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div> -->

                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="row mainRow">
            <div class="col-sm-12 col-md-4 col-lg-4 mt-2">
                <div id="mapZone" class="card card-small p-2 mb-2 mapdiv clickable backgroundImage">

                    <div style=" position: absolute ;left:10px; top: 5px;" class="d-md-none d-lg-block">

                        <table style="width:100%;">
                            <tbody>
                                <tr>
                                    <td>
                                        <span id="headerRailwayName2">
                                            <a href="/pendencyDashboard" class="badge text-white"
                                                style="background-color:#B74805;margin-bottom: 6px;position:relative;z-index: 10;">IR</a>

                                            <span class="badge text-white"
                                            style="background-color:#B74805;margin-bottom: 6px;position:relative;z-index: 10;" id="headerZone">
 
                                            </span>
                                            <span class="badge text-white"
                                            style="background-color:#B74805;margin-bottom: 6px;position:relative;z-index: 10;" id="headerDivision">
                                           
                                            </span>

                                        </span>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style=" position: absolute ;right:5px; top: 5px;z-index:10;" class="d-md-none d-lg-block">
                       
                        <button type="button" class="badge text-white" value="PU"
                        style="position:relative;z-index:20; background-color:#ff9900; border: 0;cursor: pointer;width: 50px;height: 25px;" id="PU"
                        onclick="setBtnColor('PU')">PU</button>
                        <button type="button" class="badge text-white"
                        style="position:relative;z-index:20;  background-color:#ff9900; border: 0;cursor: pointer;width: 50px;height: 25px;" id="ZR"
                        value="ZR" onclick="setBtnColor('ZR')">ZR</button>
                        </div>

                        <div style=" position: absolute ;right:5px; top: 40px;z-index:10;" class="d-md-none d-lg-block" >
                            <button type="button" class="badge text-white buttonZrDetails"
                            style=" background-color:#ff9900;  border: 0;cursor: pointer;width: 40px;height: 25px;" id="DIV" value="DIV"
                            onclick="setBtnColor('DIV')">DIV</button>
                            </br>
                            <button type="button" class="badge text-white buttonZrDetails"
                                style="margin-top: 5px;  background-color:#ff9900;  border: 0;cursor: pointer;width: 40px;height: 25px;" id="WS" value="WS"
                                onclick="setBtnColor('WS')">WS</button>
                            <br>
                            <button type="button" class="badge text-white buttonZrDetails"
                            style="margin-top: 5px;background-color:#ff9900; border: 0;cursor: pointer;width: 40px;height: 25px;" id="HQ" value="HQ"
                            onclick="setBtnColor('HQ')">HQ</button>
                        </div>
                   
                    <div id="zoneshowhide">
                    <div style=" position: absolute ;right:10px; bottom: 5px; z-index:10;" class="d-md-none d-lg-block box" id="zoneDetails">
                        <!-- <span style="color: #391a02; margin-left:10px;margin-right:10px;"><b>Divisions</b></span><br>
                            {% for i in dataZoneWs %}
                            <span class="badge" onclick="showDivision('{{i.location_code}}')" style="font-size: 1.063rem;color:#000080;">
                                <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                <label style="cursor: pointer;" title="{{i.location_description}}">{{i.location_code}}</label>
                            </span><br>
                            {% endfor %} -->
                    </div>
                </div>

                 

                    {% include 'svgFile/IRDivisions.svg' %}
                </div>
                <!-- changes made by ayushika -->
                <!-- <div class="card alert-card">
                    <h6 class="cardsHeaders card-header" >Alerts</h6>
                    <div class="card-body alertscard">
                        <deque>
                            <ul class="list-group list-group-flush" id="rotated">
                                <li class="list-group-item"><b>PUNCTUALITY</b><br>
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                   
                                    <br><b>SECR (-15%)</b>
                                </li>
                                <li class="list-group-item"><b>EXPENDITURE</b><br>
                                    Zones As per percentage variation in Revenue Expenditure(Current year vs Last year): YEAR TO DATE
                                    Zones As per percentage variation in Revenue Expenditure(Current year vs Last year): YEAR TO DATE
                                    <br><b>SWR (22.91%), WR (22.63%), NER (19.35%)</b>
                                </li>
                                <li class="list-group-item"><b>FREIGHT REVENUE</b><br>
                                    Commodity with Highest Percentage increase in Revenue (current year vs. last year): YEAR TO DATE
                                    Commodity with Highest Percentage increase in Revenue (current year vs. last year): YEAR TO DATE

                                    <br><b>COAL AND COKE (30%)</b>
                                </li>
                                <li class="list-group-item"><b>PUNCTUALITY</b><br>
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE

                                    <br><b>SECR (-15%)</b>
                                </li>
                            </ul>
                        </deque>
                    </div>
                </div> -->
               
            </div>
            <div class="col-sm-12 col-md-8 col-lg-8">
               
                <div class="row subRow">
                    <div class="col-sm-12 col-md-12 col-lg-5" style="padding: 0%; padding-right: 1%;">
                        <div class="card summary-card">
                         
                            <div class="table-responsive" style="padding: 0%;">
                                <table class="table cardsHeaders card-header">
                                    <tr>
                                        <th><h6>Overall Pendency Summary</h6></th>
                                    </tr>
                                </table>
                            </div>
                           
                            <div class="card-body">
                                <div class="table-responsive">
                                   
                                    <table class="table  scrollable-table sumtable" style="font-size: 0.9 rem;">
                                        <tr>
                                            <th>  Categories</th>
                                            <th class="border-left">
                                                Inspections
                                            </th>
                                            <th class="border-left">
                                                Items
                                            </th>
                                        </tr>
                                       
                                            <td class="border-bottom card-caption cardt ">Total</td>
                                            <td class="border-bottom border-left ">
                                                <a href="#"><span class="stats-val bgs" id="overallInspection" onclick="allinspectionreport(this)" title="Total">{{overallInspection}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                            <td class="border-bottom border-left ">
   
                                                <a href="#"><span class="stats-val bgs" onclick="allinspectionreport(this)" id="overallTotalCount" title="Total">{{overallTotalCount}}</span></a>
                                            </td>
                                       
                                        <tr>
                                            <td class="border-bottom card-caption cardp1">Pending</td>
                                            <td class="border-left border-bottom ">
                                                <a href="#"><span class="stats-val bgs2" id="pendingInspection" onclick="allinspectionreport(this)" title="Pending">{{pendingInspection}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                                <td class="border-left border-bottom ">
   
                                                <a href="#"><span class="stats-val bgs2" onclick="allinspectionreport(this)" id="overallPendingCount" title="Total pending">{{overallPendingCount}}</span></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border-bottom card-caption cardo ">Overdue</td>
                                            <td class="border-bottom border-left">
                                                <a href="#"><span class="stats-val bgs3" id="overdueInspection" onclick="allinspectionreport(this)" title="Overdue">{{overdueInspection}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                            <td class="border-bottom border-left">
   
                                                <a href="#"><span class="stats-val bgs3" onclick="allinspectionreport(this)" id="overallOverdueCount" title="Total overdue">{{overallOverdueCount}}</span></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border-bottom card-caption  cardp">Priority</td>
                                            <td class="border-left border-bottom">
                                                <a href="#"><span class="stats-val bgs4" id="priorityInspection" onclick="allinspectionreport(this)" title="Priority">{{priorityInspection}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                            <td class="border-left border-bottom">
   
                                                <a href="#"><span class="stats-val bgs4" onclick="allinspectionreport(this)" id="overallPriorityCount" title="Priority overdue">{{overallPriorityCount}}</span></a>
                                            </td>
                                        </tr>
                                    </table>
     
                               
                                </div>
 
                            </div>
                         </div>
                    </div>


                    <!-- changes made by ayushika --start -->
                    <div class="col-sm-12 col-md-12 col-lg-7" style="padding: 0%; padding-right: 1%;">
                        <div class="card summary-card">                          
                            <div class="table-responsive">
                                <table class="table card-header cardsHeaders" style="margin-bottom: 0%;">
                                    <tr>
                                        <th style="width: 30%;"><h6>Pending Items</h6></th>
                                        <th style="width: 55%;">
                                            <a href="javascript:void(0);" role="button" id="button-station" class="button"
                                            style="margin-left: 4%;" data-toggle="tooltip" title="Station">Station</a>/<a href="#" id="button-section" class="button" data-toggle="tooltip"
                                            title="Section">Section</a>/<a href="javascript:void(0);" role="button" id="button-train"
                                            class="button" data-toggle="tooltip" title="Section">Train</a>/<a href="javascript:void(0);" id="button-others"
                                            class="button" data-toggle="tooltip" title="Others">Others</a>/<a href="javascript:void(0);" role="button" id="button-all"
                                            class="button" data-toggle="tooltip" title="All">All</a>
                                        </th>
                                        <th style="text-align: right; padding-right: 1%;">
                                            <a href="javascript:void(0);" id="card_data" onclick="My_Card_data('Station')">
                                                <i class="fas fa-table" data-toggle="modal" data-target="#modalps"
                                                style="position: relative; z-index: 10; color: black;"></i>
                                            </a>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped scrollable-table table-bordered PendTable" style="margin-bottom: 0%;">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Passenger Safety">P S</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Employee Safety">E S</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Others">Others</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Night Inspection">Night</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Surprise Inspection">Surprise</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Special Drive">S D</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                       
                                        <tr class="entity" id="station-data">
                                            <td style=" text-align: left;">Station</td>
                                            <td id="stationpassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','STM')">{{psStation}}</a></td>
                                            <td id="stationemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','STM')">{{esStation}}</a></td>
                                            <td id="stationothers"><a href="javascript:void(0)" onclick="fetchdata('Others','STM')">{{osStation}}</a></td>
                                            <td id="stationnight"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','STM')">{{niStation}}</a></td>
                                            <td id="stationsuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','STM')">{{siStation}}</a></td>
                                            <td id="stationdrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','STM')">{{diStation}}</a></td>
                                        </tr>
                                        <tr class="entity initial-data" id="section-data">
                                            <td style=" text-align: left;">Section</td>
                                            <td id="sectionpassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','SEM')">{{psSection}}</a></td>
                                            <td id="sectionemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','SEM')">{{esSection}}</a></td>
                                            <td id="sectionothers"><a href="javascript:void(0)" onclick="fetchdata('Others','SEM')">{{osSection}}</a></td>
                                            <td id="sectionnight"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','SEM')">{{niSection}}</a></td>
                                            <td id="sectionsuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','SEM')">{{siSection}}</a></td>
                                            <td id="sectiondrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','SEM')">{{diSection}}</a></td>
                                        </tr>
                                        <tr class="entity initial-data" id="train-data">
                                            <td style=" text-align: left;">Train</td>
                                            <td id="trainpassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','TRN')">{{psTrain}}</a></td>
                                            <td id="trainemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','TRN')">{{esTrain}}</a></td>
                                            <td id="trainothers"><a href="javascript:void(0)" onclick="fetchdata('Others','TRN')">{{osTrain}}</a></td>
                                            <td id="trainnight"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','TRN')">{{niTrain}}</a></td>
                                            <td id="trainsuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','TRN')">{{siTrain}}</a></td>
                                            <td id="traindrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','TRN')">{{diTrain}}</a></td>
                                        </tr>
                                        <tr class="entity initial-data" id="others-data">
                                            <td style=" text-align: left;">Others</td>
                                            <td id="otherspassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','OTH')">{{psOther}}</a></td>
                                            <td id="othersemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','OTH')">{{esOther}}</a></td>
                                            <td id="othersothers"><a href="javascript:void(0)" onclick="fetchdata('Others','OTH')">{{osOther}}</a></td>
                                            <td id="othersnight"> <a href="javascript:void(0)" onclick="fetchdata('Night Inspection','OTH')">{{niOther}}</a></td>
                                            <td id="otherssuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','OTH')">{{siOther}}</a></td>
                                            <td id="othersdrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','OTH')">{{diOther}}</a></td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-sm-12 col-md-12 col-lg-6">
                        <div class="card summary-card">
                            <h6 class="cardsHeaders card-header" >For Future Reference</h6>
                            <div class="card-body alertscard"> -->
                                <!-- <deque>
                                    <ul class="list-group list-group-flush" id="rotated">
                                        <li class="list-group-item"><b>PUNCTUALITY</b><br>
                                            Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                            <br><b>SECR (-15%)</b>
                                        </li>
                                        <li class="list-group-item"><b>EXPENDITURE</b><br>
                                            Zones As per percentage variation in Revenue Expenditure(Current year vs Last year): YEAR TO DATE
                                            <br><b>SWR (22.91%), WR (22.63%), NER (19.35%)</b>
                                        </li>
                                        <li class="list-group-item"><b>FREIGHT REVENUE</b><br>
                                            Commodity with Highest Percentage increase in Revenue (current year vs. last year): YEAR TO DATE
                                            <br><b>COAL AND COKE (30%)</b>
                                        </li>
                                        <li class="list-group-item"><b>PUNCTUALITY</b><br>
                                            Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                            <br><b>SECR (-15%)</b>
                                        </li>
                                    </ul>
                                </deque> -->
                            <!-- </div>
                        </div>
                    </div> -->

                     <!-- changes made by ayushika --end -->
                </div>
                <div class="row subRow">
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th class="stats-head">Passenger Safety </th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2('Passenger Safety')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>              
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items"  id="passengertotal" ><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','Total')">{{firstRowAllData.0.10}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items" id="passengerpending"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','Pending')">{{firstRowAllData.0.11}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items" id="passengeroverdue"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','Overdue')">{{firstRowAllData.0.12}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="passengerpriority"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','Priority')">{{firstRowAllData.0.31}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                <hr style="margin:10px;"/>
                                <!-- <p class="pendency-head">Pendency</p> -->
                                <div class="table-responsive">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th class="days">D*</th>
                                            <th class="days" id="date1_1">>7</th>
                                            <th class="days" id="date2_1">>30</th>
                                            <th class="days" id="date4_1">>90</th>
                                            <th class="days" id="date5_1">>180</th>
                                        </tr>                                        
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th  class="days" >P.C*</th>
                                            <!-- <td class="cards2 count" id="passenger7"><a href="pendency_url" title="More than 7 Days count">{{pendencyDataCard1.0.0}}</a></td>
                                            <td class="cards3 count" id="passenger30"><a href="pendency_url" title="More than 30 Days count">{{pendencyDataCard1.0.1}}</a></td>
                                            <td class="cards4 count" id="passenger90"><a href="pendency_url" title="More than 90 Days count">{{pendencyDataCard1.0.2}}</a></td>
                                            <td class="cards6 count" id="passenger180"><a href="pendency_url" title="More than 180 Days count">{{pendencyDataCard1.0.3}}</a></td> -->

                                            <td class="cards2 stats-val2 count" id="passenger7"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','7')"  title="More than 7 Days count">{{pendencyDataCard1.0.0}}</a></td>
                                            <td class="cards3 stats-val2 count" id="passenger30"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','30')"  title="More than 30 Days count">{{pendencyDataCard1.0.1}}</a></td>
                                            <td class="cards4 stats-val2 count" id="passenger90"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','90')"  title="More than 90 Days count">{{pendencyDataCard1.0.2}}</a></td>
                                            <td class="cards6 stats-val2 count" id="passenger180"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','180')" title="More than 180 Days count">{{pendencyDataCard1.0.3}}</a></td>
                                           
                                        </tr>
                                    </tbody>
                                </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th class="stats-head">Employee Safety</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2('Employee Safety')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                        </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>              
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items"  id="employeetotal"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','Total')">{{firstRowAllData.0.20}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items"  id="employeepending"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','Pending')">{{firstRowAllData.0.21}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items"  id="employeeoverdue"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','Overdue')">{{firstRowAllData.0.22}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="employeepriority"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','Priority')">{{firstRowAllData.0.32}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days">D*</th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" >P.C*</th>
                                                <td class="cards2 stats-val2 count" id="employee7"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','7')"  title="More than 7 Days count">{{pendencyDataCard1.0.5}}</a></td>
                                                <td class="cards3 stats-val2 count" id="employee30"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','30')"  title="More than 30 Days count">{{pendencyDataCard1.0.6}}</a></td>
                                                <td class="cards4 stats-val2 count" id="employee90"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','90')"  title="More than 90 Days count">{{pendencyDataCard1.0.7}}</a></td>
                                                <td class="cards6 stats-val2 count" id="employee180"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','180')" title="More than 180 Days count">{{pendencyDataCard1.0.8}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head">Other Items</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2('Other Items')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>  
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items" id="otherstotal"><a href="javascript:void(0)" onclick="fetchdata('Other Items','Total')">{{firstRowAllData.0.0}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items" id="otherspending"><a href="javascript:void(0)" onclick="fetchdata('Other Items','Pending')">{{firstRowAllData.0.1}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items" id="othersoverdue"><a href="javascript:void(0)" onclick="fetchdata('Other Items','Overdue')">{{firstRowAllData.0.2}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="otherspriority"><a href="javascript:void(0)" onclick="fetchdata('Other Items','Priority')">{{firstRowAllData.0.30}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days">D*</th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>  
                                                <th  class="days" >P.C*</th>
                                                <td class="cards2 stats-val2 count" id="others7"><a href="javascript:void(0)" onclick="fetchdata('Other Items','7')"  title="More than 7 Days count">{{pendencyDataCard1.0.10}}</a></td>
                                                <td class="cards3 stats-val2 count" id="others30"><a href="javascript:void(0)" onclick="fetchdata('Other Items','30')"  title="More than 30 Days count">{{pendencyDataCard1.0.11}}</a></td>
                                                <td class="cards4 stats-val2 count" id="others90"><a href="javascript:void(0)" onclick="fetchdata('Other Items','90')"  title="More than 90 Days count">{{pendencyDataCard1.0.12}}</a></td>
                                                <td class="cards6 stats-val2 count" id="others180"><a href="javascript:void(0)" onclick="fetchdata('Other Items','180')" title="More than 180 Days count">{{pendencyDataCard1.0.13}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row subRow">
                    <!-- changes made in style of col -->

                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head">Night Inspection</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2('Night Inspection')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total inspection"  id="nighttotal"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','Total')">{{secondRowAllData.0.0}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending inspection"  id="nightpending"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','Pending')">{{secondRowAllData.0.1}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue inspection"  id="nightoverdue"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','Overdue')">{{secondRowAllData.0.2}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="nightpriority"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','Priority')">{{secondRowAllData.0.30}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days">D*</th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" >P.C*</th>
                                                <td class="cards2 stats-val2 count" id="night7"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','7')"  title="More than 7 Days count">{{pendencyDataCard2.0.0}}</a></td>
                                                <td class="cards3 stats-val2 count" id="night30"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','30')"  title="More than 30 Days count">{{pendencyDataCard2.0.1}}</a></td>
                                                <td class="cards4 stats-val2 count" id="night90"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','90')"  title="More than 90 Days count">{{pendencyDataCard2.0.2}}</a></td>
                                                <td class="cards6 stats-val2 count" id="night180"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','180')" title="More than 180 Days count">{{pendencyDataCard2.0.3}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head">Surprise Inspection</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2('Surprise Inspection')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total inspection"  id="suprisetotal"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','Total')">{{secondRowAllData.0.10}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending inspection" id="suprisepending"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','Pending')">{{secondRowAllData.0.11}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue inspection"  id="supriseoverdue"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','Overdue')">{{secondRowAllData.0.12}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="surprisepriority"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','Priority')">{{secondRowAllData.0.31}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days">D*</th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" >P.C*</th>
                                                <td class="cards2 stats-val2 count" id="suprise7"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','7')"  title="More than 7 Days count">{{pendencyDataCard2.0.5}}</a></td>
                                                <td class="cards3 stats-val2 count" id="suprise30"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','30')"  title="More than 30 Days count">{{pendencyDataCard2.0.6}}</a></td>
                                                <td class="cards4 stats-val2 count" id="suprise90"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','90')"  title="More than 90 Days count">{{pendencyDataCard2.0.7}}</a></td>
                                                <td class="cards6 stats-val2 count" id="suprise180"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','180')" title="More than 180 Days count">{{pendencyDataCard2.0.8}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head"> Spl Drive Inspection</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2('Drive Inspection')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total inspection" id="drivetotal"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','Total')">{{secondRowAllData.0.20}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending inspection" id="drivepending"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','Pending')">{{secondRowAllData.0.21}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue inspection" id="driveoverdue"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','Overdue')">{{secondRowAllData.0.22}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="drivepriority"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','Priority')">{{secondRowAllData.0.32}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                               
                            <hr style="margin:10px;" />
                            <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days">D*</th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" >P.C*</th>
                                                <td class="cards2 stats-val2 count" id="drive7"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','7')"  title="More than 7 Days count">{{pendencyDataCard2.0.10}}</a></td>
                                                <td class="cards3 stats-val2 count" id="drive30"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','30')"  title="More than 30 Days count">{{pendencyDataCard2.0.11}}</a></td>
                                                <td class="cards4 stats-val2 count" id="drive90"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','90')"  title="More than 90 Days count">{{pendencyDataCard2.0.12}}</a></td>
                                                <td class="cards6 stats-val2 count" id="drive180"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','180')" title="More than 180 Days count">{{pendencyDataCard2.0.13}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- <div class="row subRow">
                    <div class="col-12">
                        <div class="table-responsive">
                        <table class="table table-data table-striped table-bordered PendTable">
                            <thead>
                                <tr>
                                    <th rowspan="2">Pendency Count<a href="#" onclick="My_Card_data('Station')"><i data-toggle="modal"  data-target="#modalps" style="margin-left: 15%;position: relative;z-index: 10; color: white;" class="fas fa-table"></i></a></th>
                                    <th colspan="3">Item Type Wise</th>
                                    <!-- <th colspan="3">Inspection Type Wise</th> -- >
                                    <th colspan="3">Inspection Type Wise </th>
                                </tr>
                                <tr>
                                    <th style="width: 12%;">Pass Safety</th>
                                    <th style="width: 12%;">Emp Safety</th>
                                    <th style="width: 12%;">Others</th>
                                    <th style="width: 12%;">Night</th>
                                    <th style="width: 12%;">Surprise</th>
                                    <th style="width: 12%;">Spl Drive</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="entity">Station</td>
                                    <td id="stationpassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','STM')">{{thirdRowData.0.0}}</a></td>
                                    <td id="stationemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','STM')">{{thirdRowData.0.1}}</a></td>
                                    <td id="stationothers"><a href="javascript:void(0)" onclick="fetchdata('Others','STM')">{{thirdRowData.0.2}}</a></td>
                                    <td id="stationnight"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','STM')">{{thirdRowData.0.3}}</a></td>
                                    <td id="stationsuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','STM')">{{thirdRowData.0.4}}</a></td>
                                    <td id="stationdrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','STM')">{{thirdRowData.0.5}}</a></td>
                                </tr>
                                <tr>
                                    <td class="entity">Section</td>
                                    <td id="sectionpassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','SEM')">{{thirdRowData.0.6}}</a></td>
                                    <td id="sectionemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','SEM')">{{thirdRowData.0.7}}</a></td>
                                    <td id="sectionothers"><a href="javascript:void(0)" onclick="fetchdata('Others','SEM')">{{thirdRowData.0.8}}</a></td>
                                    <td id="sectionnight"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','SEM')">{{thirdRowData.0.9}}</a></td>
                                    <td id="sectionsuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','SEM')">{{thirdRowData.0.10}}</a></td>
                                    <td id="sectiondrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','SEM')">{{thirdRowData.0.11}}</a></td>
                                </tr>
                                <tr>
                                    <td class="entity">Train</td>
                                    <td id="trainpassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','TRN')">{{thirdRowData.0.12}}</a></td>
                                    <td id="trainemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','TRN')">{{thirdRowData.0.13}}</a></td>
                                    <td id="trainothers"><a href="javascript:void(0)" onclick="fetchdata('Others','TRN')">{{thirdRowData.0.14}}</a></td>
                                    <td id="trainnight"><a href="javascript:void(0)" onclick="fetchdata('Night Inspection','TRN')">{{thirdRowData.0.15}}</a></td>
                                    <td id="trainsuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','TRN')">{{thirdRowData.0.16}}</a></td>
                                    <td id="traindrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','TRN')">{{thirdRowData.0.17}}</a></td>
                                </tr>
                                <tr>
                                    <td class="entity">Others</td>
                                    <td id="otherspassenger"><a href="javascript:void(0)" onclick="fetchdata('Passenger Safety','OTH')">{{thirdRowData.0.18}}</a></td>
                                    <td id="othersemployee"><a href="javascript:void(0)" onclick="fetchdata('Employee Safety','OTH')">{{thirdRowData.0.19}}</a></td>
                                    <td id="othersothers"><a href="javascript:void(0)" onclick="fetchdata('Others','OTH')">{{thirdRowData.0.20}}</a></td>
                                    <td id="othersnight"> <a href="javascript:void(0)" onclick="fetchdata('Night Inspection','OTH')">{{thirdRowData.0.20}}</a></td>
                                    <td id="otherssuprise"><a href="javascript:void(0)" onclick="fetchdata('Surprise Inspection','OTH')">{{thirdRowData.0.22}}</a></td>
                                    <td id="othersdrive"><a href="javascript:void(0)" onclick="fetchdata('Drive Inspection','OTH')">{{thirdRowData.0.23}}</a></td>
                                </tr>
                            </tbody>
                        </table>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
       
    </div>
</div>
    <div  id="secondary" style="margin: auto;width: 10%;padding: 10px;z-index:100;">
   
        <center><img src="{% static 'images/maploading.gif' %}" style="width:200%;height:200%;"></center>
      </div>


<!-- MODAL -->

<!-- END MODAL -->
<div id="modal" class="modal">
    <div class="modal-content">
       
        <div class="heading" style="font-size: 20px;">
            <button id="modaldismis" type="button" class="closebtn btn-danger btn-sm" data-dismiss="modal" aria-label="Close">
                Close
              </button>
        <center><h3 id = 'demo'>Rly: List of Night Inspection related items (Total)</h3></center>
        </div>
       
          <div class="row" id = 'hideme'>
            <div class = 'col-2' id = "g_rly">
                <label for="Zone" class="lbl-caption">Rly./Org. </label>
                <select class="form-control" id="zone1" data-placeholder="Rly./Org Wise..." name="zone" class="custom-select" onchange="fetchdata2('All')"
                     ><span style="color:red;font-weight:bold">*</span>
                    <option value="All" selected>All</option>
                    {% for z in zone %}
                    <option value="{{z}}">{{z}}</option>
                    {% endfor %}

                </select>
            </div>
            <div class = 'col-2' id = "a_rly">
                <label for="Zone" class="lbl-caption">Rly./Org. </label>
                <select class="form-control" id="zone" data-placeholder="Rly./Org Wise..." name="zone" class="custom-select" onchange="My_Card_data('Station')"
                     ><span style="color:red;font-weight:bold">*</span>
                    <option value="All" selected>All</option>
                    {% for z in zone %}
                    <option value="{{z}}">{{z}}</option>
                    {% endfor %}

                </select>
            </div>
            <div class="col-2" id="g_div">
                <label for="division " class="lbl-caption" >Div/Unit</label>
                <select class="form-control" id="division1" data-placeholder="Div./Unit Wise..." name="division" class="custom-select" style="max-width:100%;"
                onchange = "fetchdata2('All')"><span style="color:red;font-weight:bold">*</span>

                        <option value="All" selected>All</option>
                        {% for d in division %}
                            <option value="{{d.location_code}}-{{d.location_type}}">{{d.location_code}}-{{d.location_type}}</option>
                            {% endfor %}
                    </select>
            </div>
            <div class="col-2" id="a_div">
                <label for="division " class="lbl-caption" >Div/Unit</label>
                <select class="form-control" id="division" data-placeholder="Div./Unit Wise..." name="division" class="custom-select" style="max-width:100%;"
                onchange = "My_Card_data('Station')"><span style="color:red;font-weight:bold">*</span>

                        <option value="All" selected>All</option>
                        {% for d in division %}
                            <option value="{{d.location_code}}-{{d.location_type}}">{{d.location_code}}-{{d.location_type}}</option>
                            {% endfor %}
                    </select>
            </div>
            <div class="col-4" id = 'anvi'>
                <span>
                    <span class="radio-box">
                    <label class="radio-inline custom-label">
                    <input type="radio" name="optradio" onclick="My_Card_data('STM')" value="STM" id="radio1" data-toggle="modal" data-target="#modales">Station
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="My_Card_data('SEM')" value="SEM" id="radio2" data-toggle="modal" data-target="#modalos">Section
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="My_Card_data('TRN')" value="TRN" id="radio3" data-toggle="modal" data-target="#modalns">Train
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="My_Card_data('OTH')" value="OTH" id="radio4" data-toggle="modal" data-target="#modalts">Others
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="My_Card_data('Station')" value="Station" id="radio5" data-toggle="modal" data-target="#modalts">All
                    </label>
                    </span>
                </span>
            </div>
            <div class="col-4" id = 'gurleen'>
                <span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="fetchdata2('STM')" value="STM" id="radio1" data-toggle="modal" data-target="#modales">Station
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="fetchdata2('SEM')" value="SEM" id="radio2" data-toggle="modal" data-target="#modalos">Section
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="fetchdata2('TRN')" value="TRN" id="radio3" data-toggle="modal" data-target="#modalns">Train
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="fetchdata2('OTH')" value="OTH" id="radio4" data-toggle="modal" data-target="#modalts">Others
                    </label>
                    </span>
                    <span class="radio-box">
                    <label class="radio-inline">
                    <input type="radio" name="optradio" onclick="fetchdata2('All')" value="All" id="radio6" data-toggle="modal" data-target="#modalts">All
                    </label>
                    </span>
                </span>
            </div>
            <div class="col-4" id = 'check'>
                <span class="check-box">
                <input type="checkbox" id="Pending" name="Pending" value="Pending" onchange="fetchdata2('Pending')" onclick="return false">
                <label for="vehicle1">Pending</label>
                </span>
                <span class="check-box">
                <input type="checkbox" id="Overdue" name="Overdue" value="Overdue" onchange="fetchdata2('Overdue')">
                <label for="Overdue"> Overdue</label>
                </span>
                <span class="check-box">
                <input type="checkbox" id="Priority" name="Priority" value="Priority" onchange="fetchdata2('Priority')">
                <label for="Priority"> Priority</label><br>
                </span>
             
            </div>
            <div class="col-4" id = 'check1'>
                <span class="check-box">
                <input type="checkbox" id="vehicle1" name="Pending" onchange="My_Card_data('Pending')" value="Pending" onclick="return false">
                <label for="vehicle1">Pending</label>
                </span>
                <span class="check-box">
                <input type="checkbox" id="vehicle2" name="Overdue" onchange="My_Card_data('Overdue')"  value="Overdue">
                <label for="vehicle2"> Overdue</label>
                </span>
                <span class="check-box">
                <input type="checkbox" id="vehicle3" name="Priority" onchange="My_Card_data('Priority')"  value="Priority">
                <label for="vehicle2"> Priority</label>
                </span>
            </div>
    </div>

       
        <br><br>
        <div id="table-container">
        <div id="div-all-desig">
        <table id="table_id" class="table table-striped table-bordered table-sm" style="width: 100%;">
            <thead style="background-color: #2b7bea;white-space: nowrap; font-size: 1.2rem; color:white; " id = 'thead1'>
             <tr>
              <th style="width: 5%; text-align: center;">S.No.</th>
               <th style="width: 10%; text-align: center;"> Rly <br></th>
              <th style="width: 10%; text-align: center;">Total <br></th>
              <th style="width: 10%; text-align: center;">Pending <br></th>
              <th style="width: 10%; text-align: center;">Overdue <br></th>
              <th style="width: 10%; text-align: center;">Closed <br></th>
             
          </tr>
            </thead>
            <tbody id = 'mydata'>
                <tr>
                    <td style="width: 5%; text-align: center;">S.No.</th>
               <td style="width: 10%; text-align: center;"> Rly <br> <input type="text" class="box" placeholder="Search"> </td>
              <td style="width: 10%; text-align: center;">Total <br><input type="text" class="box" placeholder="Search"></td>
              <td style="width: 10%; text-align: center;">Pending <br><input type="text" class="box" placeholder="Search"></td>
              <td style="width: 10%; text-align: center;">Overdue <br><input type="text" class="box" placeholder="Search"></td>
              <td style="width: 10%; text-align: center;">Closed <br><input type="text" class="box" placeholder="Search"></td>
                </tr>
            </tbody>
          </table>
        </div>
        </div>
        <div id="table-container">
        <div id="div-all-desig-details" class="zonetable-show-hide">
            <table id="table_id1" class="table table-striped table-bordered table-sm table-data">
                <thead style="background-color: #2b7bea;white-space: nowrap; font-size: 1.2rem; color:white;" id = 'thead2'>
                 <tr>
                  <th style="width: 5%; text-align: center;">S.No.</th>
                   <th style="width: 10%; text-align: center;"> Rly <br></th>
                  <th style="width: 10%; text-align: center;">Total <br></th>
                  <th style="width: 10%; text-align: center;">Pending <br></th>
                  <th style="width: 10%; text-align: center;">Overdue <br></th>
                  <th style="width: 10%; text-align: center;">Closed <br></th>
                 
                 </tr>
                </thead>
                <tbody id = 'mydata1'>
                    <tr>
                        <td style="width: 10%; text-align: center;">S.No.</th>
                        <td style="width: 10%; text-align: center;"> Rly <br> <input type="text" class="box" placeholder="Search"> </td>
                        <td style="width: 10%; text-align: center;">Total <br><input type="text" class="box" placeholder="Search"></td>
                        <td style="width: 10%; text-align: center;">Pending <br><input type="text" class="box" placeholder="Search"></td>
                        <td style="width: 10%; text-align: center;">Overdue <br><input type="text" class="box" placeholder="Search"></td>
                        <td style="width: 10%; text-align: center;">Closed <br><input type="text" class="box" placeholder="Search"></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <center>
            <div id="excelButton" class="btn-group mr-2" role="group" >
            </div>
            <div id="pdfButton" class="btn-group mr-2" role="group" >
            </div>        
        </center>
        
        </div>
    </div>
</div>

<button type="button" id = 'btnmodal' class="btn btn-primary" data-toggle="modal" data-target="#modal" hidden></button>

<!-- END MODAL -->



<!-- on clicking the station, section, train and others on pending items card : color changes to red -->

<script>
    const buttons = document.querySelectorAll('.button');

    buttons.forEach(button => {
        button.addEventListener('click', () => {
            // Remove the 'selected' class from all buttons
            buttons.forEach(btn => btn.classList.remove('selected'));
           
            // Add the 'selected' class to the clicked button
            button.classList.add('selected');
        });
    });
</script>
<!-- not working -->
<script>
    $(document).ready(function() {
    // Store initial data
    var initialData = $(".initial-data");
    var initialData = $(".button-station");
    // Button click events
    $(".button").click(function() {
        var clickedButton = $(this);

        // Check if the clicked button is already active
        if (clickedButton.hasClass("active")) {
            // If already active, unselect the button and show initial data
            clickedButton.removeClass("active");
            $(".entity").hide();
            initialData.show();
        } else {
            // If not active, unselect all buttons and select the clicked button
            $(".button").removeClass("active");
            clickedButton.addClass("active");

            if (clickedButton.attr("id") !== "button-all") {
                var category = clickedButton.attr("id").replace("button-", "");
                showRows(category);
            }
        }
    });
});

</script>
<!-- on clicking the station, section, train and others on pending items card : data changes -->

<script>
    function showRows(category) {
        // Hide all rows initially
        $(".entity").hide();
       
        // Show the rows corresponding to the clicked category
        $("#" + category + "-data").show();
    }
   
    $(document).ready(function() {
        // Button click events
        $("#button-station").click(function() {
            showRows("station");
        });

        $("#button-section").click(function() {
            showRows("section");
        });
   
        $("#button-train").click(function() {
            showRows("train");
        });
   
        $("#button-others").click(function() {
            showRows("others");
        });
   
        $("#button-all").click(function() {
            $(".entity").show();
        });
    });
    </script>
   
</body>

<script>

var table =$('#table_id').DataTable({
    "iDisplayLength": 10,
                   
        // "ordering": false,
        "lengthChange": true,
        "lengthMenu": [10,15, 30, 50, 75, 100],
    dom: 'Blfrtip',
         bSort: false,
       
        buttons: [
        {
            extend: 'excel',
            title: function (e) {
                var e1 = $('#datefrom').val()
                var e2 = $('#dateto').val()
                if(irType == 'All'){
                    var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') from '+irSearchDate
                }
                else{
                    var stre=irType+' : List of '+card_type+' related item ('+card_data+ ') from '+irSearchDate
                }
                return stre
            },
            orientation: 'landscape',
            pageSize: 'LEGAL',
           
        },
        {
            extend:'pdfHtml5',
            title: function (e) {
                var e1 = $('#datefrom').val()
                var e2 = $('#dateto').val()
                var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                return stre
            },
            exportOptions: {
                alignment: 'right',
                },
            customize: function ( doc ) {
                console.log("doc",doc)
                console.log("doc",doc.defaultStyle)
                console.log("doc2",doc.styles.tableBodyEven)
                console.log("doc3",doc.styles.tableBodyOdd)
                doc.content.splice(0,1);
               
                doc.styles.tableBodyEven.alignment = 'center';
                doc.styles.tableBodyOdd.alignment = 'center';
               
              },
              text :'PDF',
             
                fontSize : 'LEGAL'
           
        },
        {
            extend: 'print',
            title: function (e) {
                var s1 = $('#datefrom').val()
                var s2 = $('#dateto').val()
                var str = 'Inspection Report from ' + s1 + ' to ' + s2;
                return str
            },
            customize: function ( doc ) {
                 $(doc.document.body).find('tableid').css('text-align', 'center');

                //  $(doc.document.body).find('table').css('border', '1px solid #000');
                //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                },
        },
        ],
        headers:true
  });

var table1=$('#table_id1').DataTable({
                        "iDisplayLength": 10,
                       
                        // "ordering": false,
                        "lengthChange": true,
                        "lengthMenu": [10,15, 30, 50, 75, 100],
                        dom: 'Blfrtip',
                       
                        buttons: [
                        {
                            extend: 'excel',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                               
                                var e2 = $('#dateto').val()
                                if(typeId == 'All'){
                                    var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') From '+searchDate+' To '+searchDateTo
                                }
                                else{
                                    var stre=typeId+' : List of '+card_type+' related item ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                                }
                                return stre
                            },
                            // orientation: 'landscape',
                            // pageSize: 'LEGAL',
                           
                        },
                        {
                            extend:'pdfHtml5',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                                var e2 = $('#dateto').val()
                                console.log("datefrom1",e1)
                                console.log("datefrom1",datefrom)
                                var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                                console.log('insode inspection report',stre)
                                return stre
                            },
                            exportOptions: {
                                alignment: 'right',
                                },
                            customize: function ( doc ) {
                                console.log("doc",doc)
                                console.log("doc",doc.defaultStyle)
                                console.log("doc2",doc.styles.tableBodyEven)
                                console.log("doc3",doc.styles.tableBodyOdd)
                                doc.content.splice(0,1);
                               
                                doc.styles.tableBodyEven.alignment = 'center';
                                doc.styles.tableBodyOdd.alignment = 'center';
                            },
                            text :'Pdf',
                            title:"Inspection Report ",
                                        fontSize : 'LEGAL'
                           
                        },
                        {
                            extend: 'print',
                            footer:true,
                            title: function (e) {
                                var s1 = $('#datefrom').val()
                                var s2 = $('#dateto').val()
                                var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                                return str
                            },
                            customize: function ( doc ) {
                                $(doc.document.body).find('table_id1').css('text-align', 'center');
   
                                //  $(doc.document.body).find('table').css('border', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                                },
                                "pagingType": "simple",
                                "sEmptyTable": 'No data available in table',
   
                                // "bSort": true,
   
                                "oLanguage": {
                                    "sInfoEmpty": "Page 0 of 0 ",
                                },
                                "language": {
                                    "info": "Page _PAGE_ of _PAGES_",
                                    "paginate": {
                                        "previous": "Prev",
                                    },
                                },
                        },
                        ],
                    });
           


    $('#main').show();
    $('#secondary').hide();
    $(".sidebar").addClass('close');
    $('#zoneshowhide').hide();
    $('#headerZone').hide();
    $('#headerDivision').hide();
    var descType = ''
   
    $(document).ready(function(){
            $('.buttonZrDetails').hide();
     })
   
    function change(h) {
       
    const dataId = $(h).attr("data-id");
    let svgclass = dataId+'CLASS';
    $("."+svgclass).addClass('fillColorClassDesc');
    }
    function changeBack(h) {
       
       
        $("path").removeClass('fillColorClassDesc');
        // const dataId = $('#zoneID').val();
        // let svgclass = dataId+'CLASS';
        // $("."+svgclass).addClass('fillColorClass');
    }
   
            function get_data(h) {

                if($('#typeID').val()=='IR' || $('#typeID').val()=='PU')
                {
                    $('#typeID').val('ZR');
                    $('.buttonZrDetails').show();
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');

                }
               
                $("path").removeClass('fillColorClass');
                const dataId = $(h).attr("data-id");
                let svgclass = dataId+'CLASS';
                $("."+svgclass).addClass('fillColorClass');
                $('#zoneID').val(dataId);
                $('#divID').val('');
                $('#main').hide();
                $('#secondary').show();
                $('#zoneshowhide').hide();

                $('#headerZone').hide();
                $('#headerDivision').hide();

                let data = {
                    typ: 'allDetails',
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : $('#searchDepartment').val(),
                    searchDesignation : $('#searchDesignation').val(),
                    searchLevel : $('#searchLevel').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#headerZone').show();
                    $('#headerDivision').empty();
                    $('#headerZone').empty();
                    let div = `<i class="fa fa-angle-right"></i> ${dataId}`;
                    $('#headerZone').append(div);
                           
                   let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let overallTotalCount = response.overallTotalCount;
                   let overallPendingCount = response.overallPendingCount;
                   let overallOverdueCount = response.overallOverdueCount;
                   let allDesignation = response.allDesignation;
                   let overallInspection = response.overallInspection;
                   let pendingInspection = response.pendingInspection;
                   let overdueInspection = response.overdueInspection;
                   let priorityInspection = response.priorityInspection;
                   let overallPriorityCount = response.overallPriorityCount;

                   let psStation = response.psStation;
                   let esStation = response.esStation;
                   let osStation = response.osStation;
                   let niStation = response.niStation;
                   let siStation = response.siStation;
                   let diStation = response.diStation;

                   let psSection = response.psSection;
                   let esSection = response.esSection;
                   let osSection = response.osSection;
                   let niSection = response.niSection;
                   let siSection = response.siSection;
                   let diSection = response.diSection;

                   let psTrain = response.psTrain;
                   let esTrain = response.esTrain;
                   let osTrain = response.osTrain;
                   let niTrain = response.niTrain;
                   let siTrain = response.siTrain;
                   let diTrain = response.diTrain;

                   let psOther = response.psOther;
                   let esOther = response.esOther;
                   let osOther = response.osOther;
                   let niOther = response.niOther;
                   let siOther = response.siOther;
                   let diOther = response.diOther;




                   console.log(overallInspection)
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                </span></br>`
                                    }
                                    else{
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                }


                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = `<option value="All">All</option>`
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if(allDesignation[i].designation == $('#searchDesignation').val())
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                           $('#searchDesignation').empty();
                           $('#searchDesignation').append(row);

                           document.getElementById('overallTotalCount').innerHTML = overallTotalCount;
                           document.getElementById('overallPendingCount').innerHTML = overallPendingCount;
                           document.getElementById('overallOverdueCount').innerHTML = overallOverdueCount;
                           document.getElementById('overallInspection').innerHTML = overallInspection;
                           document.getElementById('pendingInspection').innerHTML = pendingInspection;
                           document.getElementById('overdueInspection').innerHTML = overdueInspection;
                           document.getElementById('priorityInspection').innerHTML = priorityInspection;
                           document.getElementById('overallPriorityCount').innerHTML = overallPriorityCount;


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];  
                           
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];
                           

                           document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                           document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                           document.getElementById('stationothers').firstChild.innerHTML = osStation;
                           document.getElementById('stationnight').firstChild.innerHTML = niStation;
                           document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                           document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                           document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                           document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                           document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                           document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                           document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                           document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                           document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                           document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                           document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                           document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                           document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                           document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                           document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                           document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                           document.getElementById('othersothers').firstChild.innerHTML = osOther;
                           document.getElementById('othersnight').firstChild.innerHTML = niOther;
                           document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                           document.getElementById('othersdrive').firstChild.innerHTML = diOther;

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });

               

               
               
            }
       
            function showDivision(divName) {
                $('#divID').val(divName);
                $('#main').hide();
                $('#secondary').show();
                $('#zoneshowhide').hide();
                $('#headerDivision').hide();

                let data = {
                    typ: 'allDetails',
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : $('#searchDepartment').val(),
                    searchDesignation : $('#searchDesignation').val(),
                    searchLevel : $('#searchLevel').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#headerDivision').show();
                    $('#headerDivision').empty();
                    let div = `<i class="fa fa-angle-right"></i> ${divName}`;
                    $('#headerDivision').append(div);
                   let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let overallTotalCount = response.overallTotalCount;
                   let overallPendingCount = response.overallPendingCount;
                   let overallOverdueCount = response.overallOverdueCount;
                   let allDesignation = response.allDesignation;
                   let overallInspection = response.overallInspection;
                   let pendingInspection = response.pendingInspection;
                   let overdueInspection = response.overdueInspection;
                   let priorityInspection = response.priorityInspection;
                   let overallPriorityCount = response.overallPriorityCount;

                   let psStation = response.psStation;
                   let esStation = response.esStation;
                   let osStation = response.osStation;
                   let niStation = response.niStation;
                   let siStation = response.siStation;
                   let diStation = response.diStation;

                   let psSection = response.psSection;
                   let esSection = response.esSection;
                   let osSection = response.osSection;
                   let niSection = response.niSection;
                   let siSection = response.siSection;
                   let diSection = response.diSection;

                   let psTrain = response.psTrain;
                   let esTrain = response.esTrain;
                   let osTrain = response.osTrain;
                   let niTrain = response.niTrain;
                   let siTrain = response.siTrain;
                   let diTrain = response.diTrain;

                   let psOther = response.psOther;
                   let esOther = response.esOther;
                   let osOther = response.osOther;
                   let niOther = response.niOther;
                   let siOther = response.siOther;
                   let diOther = response.diOther;
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                </span></br>`
                                    }
                                    else{
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                }


                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = `<option value="All">All</option>`
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if(allDesignation[i].designation == $('#searchDesignation').val())
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                           $('#searchDesignation').empty();
                           $('#searchDesignation').append(row);

                           document.getElementById('overallTotalCount').innerHTML = overallTotalCount;
                           document.getElementById('overallPendingCount').innerHTML = overallPendingCount;
                           document.getElementById('overallOverdueCount').innerHTML = overallOverdueCount;
                           document.getElementById('overallInspection').innerHTML = overallInspection;
                           document.getElementById('pendingInspection').innerHTML = pendingInspection;
                           document.getElementById('overdueInspection').innerHTML = overdueInspection;
                           document.getElementById('priorityInspection').innerHTML = priorityInspection;
                           document.getElementById('overallPriorityCount').innerHTML = overallPriorityCount;


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];



                           
                           document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                           document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                           document.getElementById('stationothers').firstChild.innerHTML = osStation;
                           document.getElementById('stationnight').firstChild.innerHTML = niStation;
                           document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                           document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                           document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                           document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                           document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                           document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                           document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                           document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                           document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                           document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                           document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                           document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                           document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                           document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                           document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                           document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                           document.getElementById('othersothers').firstChild.innerHTML = osOther;
                           document.getElementById('othersnight').firstChild.innerHTML = niOther;
                           document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                           document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                        //    document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                        //    document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                        //    document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                        //    document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                        //    document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                        //    document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                        //    document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                        //    document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                        //    document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                        //    document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                        //    document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                        //    document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                        //    document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                        //    document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                        //    document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];

                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];

                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });

               
   
            }
           
            function getDataOfFilter(val)
            {
                 $('#main').hide();
                $('#secondary').show();
                if(val=='desig')
                {
                    $('#searchLevel').val('All');
                }
                else if(val == 'level'){
                    $('#searchDesignation').val('All');
                }
                let data = {
                    typ: 'allDetails',
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : $('#searchDepartment').val(),
                    searchDesignation : $('#searchDesignation').val(),
                    searchLevel : $('#searchLevel').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                   
                   let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let overallTotalCount = response.overallTotalCount;
                   let overallPendingCount = response.overallPendingCount;
                   let overallOverdueCount = response.overallOverdueCount;
                   let allDesignation = response.allDesignation;
                   let overallInspection = response.overallInspection;
                   let pendingInspection = response.pendingInspection;
                   let overdueInspection = response.overdueInspection;
                   let priorityInspection = response.priorityInspection;
                   let overallPriorityCount = response.overallPriorityCount;

                   let psStation = response.psStation;
                   let esStation = response.esStation;
                   let osStation = response.osStation;
                   let niStation = response.niStation;
                   let siStation = response.siStation;
                   let diStation = response.diStation;

                   let psSection = response.psSection;
                   let esSection = response.esSection;
                   let osSection = response.osSection;
                   let niSection = response.niSection;
                   let siSection = response.siSection;
                   let diSection = response.diSection;

                   let psTrain = response.psTrain;
                   let esTrain = response.esTrain;
                   let osTrain = response.osTrain;
                   let niTrain = response.niTrain;
                   let siTrain = response.siTrain;
                   let diTrain = response.diTrain;

                   let psOther = response.psOther;
                   let esOther = response.esOther;
                   let osOther = response.osOther;
                   let niOther = response.niOther;
                   let siOther = response.siOther;
                   let diOther = response.diOther;
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                </span></br>`
                                    }
                                    else{
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                }


                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = `<option value="All">All</option>`;
                       
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if(allDesignation[i].designation_code == $('#searchDesignation').val())
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                           $('#searchDesignation').empty();
                           $('#searchDesignation').append(row);

                           document.getElementById('overallTotalCount').innerHTML = overallTotalCount;
                           document.getElementById('overallPendingCount').innerHTML = overallPendingCount;
                           document.getElementById('overallOverdueCount').innerHTML = overallOverdueCount;
                           document.getElementById('overallInspection').innerHTML = overallInspection;
                           document.getElementById('pendingInspection').innerHTML = pendingInspection;
                           document.getElementById('overdueInspection').innerHTML = overdueInspection;
                           document.getElementById('priorityInspection').innerHTML = priorityInspection;
                           document.getElementById('overallPriorityCount').innerHTML = overallPriorityCount;


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];


                           
                           document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                           document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                           document.getElementById('stationothers').firstChild.innerHTML = osStation;
                           document.getElementById('stationnight').firstChild.innerHTML = niStation;
                           document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                           document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                           document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                           document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                           document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                           document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                           document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                           document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                           document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                           document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                           document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                           document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                           document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                           document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                           document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                           document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                           document.getElementById('othersothers').firstChild.innerHTML = osOther;
                           document.getElementById('othersnight').firstChild.innerHTML = niOther;
                           document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                           document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                        //    document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                        //    document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                        //    document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                        //    document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                        //    document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                        //    document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                        //    document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                        //    document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                        //    document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                        //    document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                        //    document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                        //    document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                        //    document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                        //    document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                        //    document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });
            }
   
            function setBtnColor(val) {
                $('#main').hide();
                $('#secondary').show();
               
                $('#zoneshowhide').hide();
                // $('#headerZone').hide();
                $('#headerDivision').hide();
               
                if(val == 'PU'){
                    $("path").removeClass('fillColorClass');
                    descType='Production Unit';
                    $('.buttonZrDetails').hide();
                    $('#typeID').val(val);
                    $('#zoneID').val('');
                    $('#divID').val('');
                    $('#headerZone').empty();
                    $('#headerDivision').empty();
                    $('#headerZone').hide();
                    $('#headerDivision').hide();

                    $('#ZR').css('background-color', '#ff9900');
                    $('#PU').css('background-color', '#B74805');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
               

                }
                else if(val == 'ZR')
                {
                    //$("path").removeClass('fillColorClass');
                    $('#zoneID').val('');
                    $('#divID').val('');
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
                }
                else if(val == 'DIV')
                {
                    $('#divID').val('');
                    descType='Division';
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#B74805');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
                }
                else if(val == 'WS')
                {
                    $('#divID').val('');
                    descType='WorkShop';
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#B74805');
                    $('#HQ').css('background-color', '#ff9900');
                }
                else if(val == 'HQ')
                {
                   
                    $('#divID').val('');
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#B74805');
                }

                let data = {
                    typ: 'allDetails',
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : $('#searchDepartment').val(),
                    searchDesignation : $('#searchDesignation').val(),
                    searchLevel : $('#searchLevel').val(),
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                   let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let overallTotalCount = response.overallTotalCount;
                   let overallPendingCount = response.overallPendingCount;
                   let overallOverdueCount = response.overallOverdueCount;
                   let allDesignation = response.allDesignation;
                   let overallInspection = response.overallInspection;
                   let pendingInspection = response.pendingInspection;
                   let overdueInspection = response.overdueInspection;
                   let priorityInspection = response.priorityInspection;
                   let overallPriorityCount = response.overallPriorityCount;

                   let psStation = response.psStation;
                   let esStation = response.esStation;
                   let osStation = response.osStation;
                   let niStation = response.niStation;
                   let siStation = response.siStation;
                   let diStation = response.diStation;

                   let psSection = response.psSection;
                   let esSection = response.esSection;
                   let osSection = response.osSection;
                   let niSection = response.niSection;
                   let siSection = response.siSection;
                   let diSection = response.diSection;

                   let psTrain = response.psTrain;
                   let esTrain = response.esTrain;
                   let osTrain = response.osTrain;
                   let niTrain = response.niTrain;
                   let siTrain = response.siTrain;
                   let diTrain = response.diTrain;

                   let psOther = response.psOther;
                   let esOther = response.esOther;
                   let osOther = response.osOther;
                   let niOther = response.niOther;
                   let siOther = response.siOther;
                   let diOther = response.diOther;

                   console.log(overallInspection)
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                </span></br>`
                                    }
                                    else{
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                }
 
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = `<option value="All">All</option>`
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if(allDesignation[i].designation == $('#searchDesignation').val())
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                           $('#searchDesignation').empty();
                           $('#searchDesignation').append(row);

                           document.getElementById('overallTotalCount').innerHTML = overallTotalCount;
                           document.getElementById('overallPendingCount').innerHTML = overallPendingCount;
                           document.getElementById('overallOverdueCount').innerHTML = overallOverdueCount;
                           document.getElementById('overallInspection').innerHTML = overallInspection;
                           document.getElementById('pendingInspection').innerHTML = pendingInspection;
                           document.getElementById('overdueInspection').innerHTML = overdueInspection;
                           document.getElementById('priorityInspection').innerHTML = priorityInspection;
                           document.getElementById('overallPriorityCount').innerHTML = overallPriorityCount;


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];



                           
                           document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                           document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                           document.getElementById('stationothers').firstChild.innerHTML = osStation;
                           document.getElementById('stationnight').firstChild.innerHTML = niStation;
                           document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                           document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                           document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                           document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                           document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                           document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                           document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                           document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                           document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                           document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                           document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                           document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                           document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                           document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                           document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                           document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                           document.getElementById('othersothers').firstChild.innerHTML = osOther;
                           document.getElementById('othersnight').firstChild.innerHTML = niOther;
                           document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                           document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                        //    document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                        //    document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                        //    document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                        //    document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                        //    document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                        //    document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                        //    document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                        //    document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                        //    document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                        //    document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                        //    document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                        //    document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                        //    document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                        //    document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                        //    document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });

               
   
            }
   


//  date range
var currentdate = new Date();
// Define the minimum allowed date
var minDate = new Date('September 1, 2022');
$("#startDate").daterangepicker({
    minDate: minDate,
    maxDate: currentdate,
    autoApply: true,
    autoUpdateInput: false,
    autoclose: true,
    dateFormat: "dd/mm/yy",
    endDate: currentdate,
    singleDatePicker: true,
    showDropdowns: true,
    changeMonth: true,
    changeYear: true,
    todayHighlight: true,
    clearBtn: true
});

$("#startDate").on('apply.daterangepicker', function (ev, picker) {
    $(this).val(picker.startDate.format('DD/MM/YY'));
    picker.hide();
    getDataOfFilter('All');
});

$("#startDate").on('cancel.daterangepicker', function (ev, picker) {
    $(this).val('');
   
});

$("#endDate").daterangepicker({
    maxDate: currentdate,
    autoApply: true,
    autoUpdateInput: false,
    autoclose: true,
    dateFormat: "dd/mm/yy",
    endDate: currentdate,
    singleDatePicker: true,
    showDropdowns: true,
    changeMonth: true,
    changeYear: true,
    todayHighlight: true,
    clearBtn: true
});

$("#endDate").on('apply.daterangepicker', function (ev, picker) {
    $(this).val(picker.startDate.format('DD/MM/YY'));
    picker.hide();
    getDataOfFilter('All');
});

$("#endDate").on('cancel.daterangepicker', function (ev, picker) {
    $(this).val('');
});
//  date ends
       
</script>
   

<script>



    window.setInterval(run,1000);
function run() {
var prev = $("#rotated li:first-child");
$.unique(prev).each(function(i) {
 $(this).delay(i*600).slideUp(function() {
$(this).appendTo(this.parentNode).slideDown();
 });
});
}
    function scrollCounter()
{
$('.stats-val').each(function () {
 $(this).prop('Counter', 0).animate({
   Counter: Number($(this).text()) },
 {
   duration: 3000,
   easing: 'swing',
   step: function (now) {
     $(this).text(Math.ceil(now));
 }
});
});
}
function scrollCounter2()
{
$('.stats-val2').each(function () {
        // console.log('demo',$(this).children().text())
 $(this).prop('Counter', 0).animate({
   Counter: Number($(this).text()) },
 {
   duration: 3000,
   easing: 'swing',
   step: function (now) {
     $(this).children().text(Math.ceil(now));
 }
});
});
}
$(document).ready(function(){
    scrollCounter();
    scrollCounter2();
})
</script>

<!-- Apeksha Scripts -->
<script>
   function allinspectionreport(header){
    // overallTotalCount overallInspection pendingInspection overallPendingCount overdueInspection overallOverdueCount
    var types=header.id
    // alert(types)
    var startDate=$("#startDate").val()
    var endDate=$("#endDate").val()
    var Department=$("#searchDepartment").val()
    var Designation=$("#searchDesignation").val()
    var Level=$("#searchLevel").val()
    var typeID=$("#typeID").val()
    var zoneID=$("#zoneID").val()
    var divID=$("#divID").val()
   
   
    // console.log(startDate,endDate,Department,Designation,Level,typeID,zoneID,divID, types)
    data=
        {
            'startDate':startDate,
            'endDate':endDate,
            'Department':Department,
            'Designation':Designation,
            'Level':Level,
            'typeID':typeID,
            'zoneID':zoneID,
            'divID':divID,            
            'types':types,            
            'header':header,            
        }
       window.open ("{% url 'allinspectionreport' %}?startDate="+startDate+"&endDate="+endDate+"&Department="+Department+"&Designation="+Designation+"&Level="+Level+"&typeID="+typeID+"&zoneID="+zoneID+"&divID="+divID+"&types="+types);
        // $.ajax
        //     ({
        //         url: "{% url 'allinspectionreport' %}",
        //         method: "GET",
        //         dataType: "JSON",
        //         async: false,
        //         data: data,
        //         success: function (response)
        //         {

        //         }
        //     });
   }
</script>
<script>
   
function fetchdata(card_type,card_data){
    $('#excelButton').empty();
    let rowdata = `<button onclick="generateExcel('${card_type}', '${card_data}')"  class="btn btn-success btn" >Excel</button>`;
    $('#excelButton').append(rowdata)
    $('#pdfButton').empty();
    let rowdatapdf = `<button onclick="generatePdf('${card_type}', '${card_data}')"  class="btn btn-danger btn" >Pdf</button>`;
    $('#pdfButton').append(rowdatapdf)
    let typeId= $('#typeID').val()  
    let zoneId= $('#zoneID').val()
    let divId= $('#divID').val()
    let searchDate = $('#startDate').val()
    let searchDateTo=$('#endDate').val()
    let searchDepartment = $('#searchDepartment').val()
    let searchDesignation = $('#searchDesignation').val()
    let searchLevel = $('#searchLevel').val()
    // value of check box
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
   
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
   
    }

    if (['t_insp', 't_item', 'p_insp', 'p_item','o_insp', 'o_item', 'ps', 'es', 'oth', 'ni', 'si', 'di','days7','days30','days90','days180'].includes(card_type)) {
       
        typeId = 'ZR'
        if (card_data.includes('/')) {
           
            var values = card_data.split('/');
            zoneId = values[0];
            location_val = values[1];
            console.log(zoneId)
            console.log(location_val)
            card_data = $('input[name="optradio"]:checked').val()
        }
        else
        {
           
            zoneId=card_data;
            location_val= 'NULL'
            console.log(zoneId)
            console.log(location_val)
            card_data = $('input[name="optradio"]:checked').val()
        }
    }
    else
    {
        location_val= 'NULL'
    }
    if($("#div-all-desig-details").css('display') == 'block'){
        shrink_all_designation();
    }

    // alert($("#INSPITEMTYPE").val())
    let data = {
                    typ: 'allDetails',
                    typeId: typeId,  
                    zoneId: zoneId,
                    location_val: location_val,
                    divId: divId,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : $('#searchDepartment').val(),
                    searchDesignation : $('#searchDesignation').val(),
                    searchLevel : $('#searchLevel').val(),
                    card_type : card_type,
                    card_data : card_data,
                    mylist:JSON.stringify(mylist),
                    INSPITEMTYPE : $("#INSPITEMTYPE").val()
                    // csrfmiddlewaretoken: '{{ csrf_token }}'
                }
            $('#main').hide();
            $('#secondary').show();
            $('#zoneshowhide').hide();
            $('#headerDivision').hide();

            $("#hideme").hide()
       
        // type change for stn,stm,trn,oth for heading
        if(card_data == 'STM'){
                card_data = 'Station'
            }
            else if(card_data == 'SEM'){
                card_data = 'Section'
            }
            else if(card_data == 'TRN'){
                card_data = 'Train'
            }
            else if(card_data == 'OTH'){
                card_data = 'Other'
            }
            else if(card_data == 'Station'){
                card_data = ''
            }
            else if(card_data == 'All')
                card_data = ''
           

           
            document.getElementById('modaldismis').click();
        $.ajax({
            method: "GET",
            url: "{% url 'TableViewPendencyDashboard' %}",
            dataType: 'json',
            data: data,
            success: function (response) {
                $('#main').show();
                $('#secondary').hide();
                $('#zoneshowhide').show();
                $('#headerDivision').show();
                table.destroy()
                if (['t_insp', 'p_insp','o_insp'].includes(card_type)){
                    if(card_type == 't_insp'){
                card_type = 'Total Inspection'
            }
            else if(card_type == 't_item'){
                card_type = 'Total Item'
            }
            else if(card_type == 'p_insp'){
                card_type = 'Pending Inspection'
            }
            else if(card_type == 'p_item'){
                card_type = 'Pending Item'
            }
            else if(card_type == 'o_insp'){
                card_type = 'Others Inspection'
            }
            else if(card_type == 'o_item'){
                card_type = 'Others Item'
            }
            else if(card_type == 'days7'){
                card_type = 'Pendency > 7 Days'
            }
            else if(card_type == 'days30'){
                card_type = 'Pendency > 30 Days'
            }
            else if(card_type == 'days90'){
                card_type = 'Pendency > 90 Days'
            }
            else if(card_type == 'days180'){
                card_type = 'Pendency > 180 Days'
            }
                       
                        $("#thead1").empty()
                        $("#thead1").append(`<tr><th style="width: 10%; text-align: center;"> S.No  </th>
                        <th style="width: 10%; text-align: center;">Insp. Date </th>
                        <th style="width: 10%; text-align: center;">Insp. Note No. </th>
                        <th style="width: 10%; text-align: center;">Insp. Type </th>
                        <th style="width: 10%; text-align: center;">Insp. Title </th>
                        <th style="width: 10%; text-align: center;">Insp Officer </th>
                        <th style="width: 10%; text-align: center;">Rly./org. </th>
                        <th style="width: 10%; text-align: center;">Div./Unit </th>
                        <th style="width: 10%; text-align: center;">Action</th></tr>`)
                        $("#mydata").empty()
           
                        $("#mydata").append(response.wholedata)
       
                        if(typeId == 'IR'){
                        $("#demo").text('IR : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(zoneId+'/'+divId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                }
                else if (['t_item', 'p_item','o_item','ps', 'es', 'oth', 'ni', 'si', 'di','days7','days30','days90','days180'].includes(card_type)){

                    // if (card_type === 'days7')
                    // {
                    //     card_type = 'pendency days > 7'
                    // }
                    // else if (card_type === 'days30' )
                    // {
                    //     card_type = 'pendency days > 30'
                    // }
                    // else if (card_type === 'days90' )
                    // {
                    //     card_type = 'pendency days > 90'
                    // }
                    // else if (card_type === 'days180')
                    // {
                    //     card_type = 'pendency days > 180'
                    // }
                    if(card_type == 't_insp'){
                card_type = 'Total Inspection'
            }
            else if(card_type == 't_item'){
                card_type = 'Total Item'
            }
            else if(card_type == 'p_insp'){
                card_type = 'Pending Inspection'
            }
            else if(card_type == 'p_item'){
                card_type = 'Pending Item'
            }
            else if(card_type == 'o_insp'){
                card_type = 'Others Inspection'
            }
            else if(card_type == 'o_item'){
                card_type = 'Others Item'
            }
            else if(card_type == 'days7'){
                card_type = 'Pendency > 7 Days'
            }
            else if(card_type == 'days30'){
                card_type = 'Pendency > 30 Days'
            }
            else if(card_type == 'days90'){
                card_type = 'Pendency > 90 Days'
            }
            else if(card_type == 'days180'){
                card_type = 'Pendency > 180 Days'
            }
                       
                        $("#thead1").empty()
                        $("#thead1").append(`<tr><th style="width: 10%; text-align: center;"> S.No  </th>
                        <th style="width: 10%; text-align: center;">Insp. Date </th>
                        <th style="width: 10%; text-align: center;">Insp. Note No. </th>
                        <th style="width: 10%; text-align: center;">Insp. Type </th>
                        <th style="width: 10%; text-align: center;">Insp. Title </th>
                        <th style="width: 10%; text-align: center;">Insp Officer </th>
                        <th style="width: 10%; text-align: center;">Location </th>
                        <th style="width: 10%; text-align: center;">Action</th></tr>`)
                        $("#mydata").empty()
           
                        $("#mydata").append(response.wholedata)
       
                        if(typeId == 'IR'){
                        $("#demo").text('IR : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(zoneId+'/'+divId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                }
                else{
                    if(card_type == 't_insp'){
                card_type = 'Total Inspection'
            }
            else if(card_type == 't_item'){
                card_type = 'Total Item'
            }
            else if(card_type == 'p_insp'){
                card_type = 'Pending Inspection'
            }
            else if(card_type == 'p_item'){
                card_type = 'Pending Item'
            }
            else if(card_type == 'o_insp'){
                card_type = 'Others Inspection'
            }
            else if(card_type == 'o_item'){
                card_type = 'Others Item'
            }
            else if(card_type == 'days7'){
                card_type = 'Pendency > 7 Days'
            }
            else if(card_type == 'days30'){
                card_type = 'Pendency > 30 Days'
            }
            else if(card_type == 'days90'){
                card_type = 'Pendency > 90 Days'
            }
            else if(card_type == 'days180'){
                card_type = 'Pendency > 180 Days'
            }
                        $("#thead1").empty()
                        $("#thead1").append(`<tr><th style="width: 10%; text-align: center;"> S.No  </th>
                            <th style="width: 10%; text-align: center;">Insp. Date </th>
                        <th style="width: 10%; text-align: center;">Insp. Note No. </th>
                        <th style="width: 10%; text-align: center;">Insp. Observation </th>
                        <th style="width: 10%; text-align: center;">Marked Officer </th>
                        <th style="width: 10%; text-align: center;">Rly./org. </th>
                        <th style="width: 10%; text-align: center;">Div./Unit </th>
                        <th style="width: 10%; text-align: center;">Location</th>
                        <th style="width: 10%; text-align: center;">Insp. Note </th></tr>`)

               
                        $("#mydata").empty()
                   
                        $("#mydata").append(response.wholedata)
                       
                        if(typeId == 'IR'){
                        $("#demo").text('IR : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(zoneId+'/'+divId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                    }
                 
               
                $("#btnmodal").click()
                table=$('#table_id').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            console.log("datefrom1",e1)
                            console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            console.log("doc",doc)
                            console.log("doc",doc.defaultStyle)
                            console.log("doc2",doc.styles.tableBodyEven)
                            console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       
            }
        });

        return false;

}
</script>


<!-- anvi code -->
<script>

function My_Card_data(card_type) {
    $('#excelButton').empty();
    let rowdata = `<button onclick="My_Card_data_excel('${card_type}')"  class="btn btn-success btn" >Excel</button>`;
    $('#excelButton').append(rowdata)
    $('#pdfButton').empty();
    let rowdatapdf = `<button onclick="My_Card_data_pdf('${card_type}')"  class="btn btn-danger btn" >Pdf</button>`;
    $('#pdfButton').append(rowdatapdf)
    // alert('anviahlawat');
    $("#anvi").show()
    $("#check1").show()
    $("#gurleen").hide()
    $("#check").hide()
    $("#g_rly").hide()
    $("#g_div").hide()
    $("#a_rly").show()
    $("#a_div").show()

     //  select the default radion and select button
     if ($("#modal").css('display') == 'none'){
        $('#radio5').prop('checked','checked')
        $('#vehicle1').prop('checked',true)
        $('#vehicle2').prop('checked',false)
        $('#vehicle3').prop('checked',false)
        $('#division').val("All")
        $('#zone').val("All")
    }

    if($("#div-all-desig-details").css('display') == 'block'){
        shrink_all_designation();
    }


    let typeID = $('#typeID').val()
    let zoneID = $('#zoneID').val()
    let divID = $('#divID').val()
    let division = $("#division").val()
    let zone = $("#zone").val()
    var searchDate =  $('#startDate').val()
    var searchDateTo = $('#endDate').val()
    let mydata = ['Pending','Overdue','Priority']
    if(mydata.includes(card_type) ){
        // alert("ppp "+card_type)
        card_type = $('input[name="optradio"]:checked').val();

    }
    // value of check box
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
   
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
        // alert(mylist)
        // if()
    }
    console.log("checkbox",mylist)
    // condition to check the division
    // $("#zone").trigger("change");
    if(division != 'All'){
        let sp = division.split('-')
        console.log('sp',sp)
        typeID = sp[1]
        divID = sp[0]
        card_type = $('input[name="optradio"]:checked').val();
    }
    else if (zone != 'All' && (!['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
        typeID = 'ZR'
        zoneID = zone
        card_type = $('input[name="optradio"]:checked').val();
    }
    else if (zone != 'All' && (['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
        typeID = 'PU'
        zoneID = zone
        card_type = $('input[name="optradio"]:checked').val();
    }
    // alert("zoneididid   "+zoneID)
    if(divID != ''){
        $('#division').val(divID+'-'+typeID)
    }
    else if(zoneID != ''){
        $('#zone').val(zoneID)  
        // $("#zone").trigger("change", {'rly_data':zoneID});
    }
    else{
        $('#zone').val('All')
    }
   
    // alert(typeID+divID)
    let requestData = {
        typeId: typeID,  
        zoneId: zoneID,
        divId: divID,
        searchDate : searchDate,
        searchDateTo: searchDateTo,
        searchDepartment : $('#searchDepartment').val(),
        searchDesignation : $('#searchDesignation').val(),
        searchLevel : $('#searchLevel').val(),
        // searchRailway : $('#searchRailway').val(),
        csrfmiddlewaretoken: '{{ csrf_token }}',
        card_type :card_type,
        mylist:JSON.stringify(mylist),
    };

   // type change for stn,stm,trn,oth
   if(card_type == 'STM'){
        card_type = '(Station)'
    }
    else if(card_type == 'SEM'){
        card_type = '(Section)'
    }
    else if(card_type == 'TRN'){
        card_type = '(Train)'
    }
    else if(card_type == 'OTH'){
        card_type = '(Other)'
    }
    else if(card_type == 'Station'){
        card_type = ''
    }
    // end here
    $.ajax({
        method: "POST",  
        url: "{% url 'TableIcon' %}",
        dataType: 'json',
        data: requestData,
        success: function (response) {

            $("#hideme").show()
            document.getElementById('modaldismis').click();
            table.destroy()
            // alert("i am here")    

            let td = '';

            if (typeID == 'IR') {
               
                $("#thead1").empty()
                $("#thead1").append(`
                <tr>
                <th style="width: 10%; text-align: center;" colspan="1"> </th>
                <th style="width: 10%; text-align: center;" colspan="2">Total Count </th>
                <th style="width: 10%; text-align: center;" colspan="2">Pending Count </th>
                <th style="width: 10%; text-align: center;" colspan="7">Pendency Count</th>
               
                </tr>
                <tr>
                <th style="width: 10%; text-align: center;">Rly/Org.</th>
                <th style="width: 10%; text-align: center;">Insp </th>
                <th style="width: 10%; text-align: center;">Item</th>
                <th style="width: 10%; text-align: center;">Insp </th>
                <th style="width: 10%; text-align: center;">Item</th>
                <th style="width: 5%; text-align: center;">Psgn Safety</th>
                <th style="width: 5%; text-align: center;">Emply Safety</th>
                <th style="width: 5%; text-align: center;">Oth</th>
                <th style="width: 5%; text-align: center;">Night Insp</th>
                <th style="width: 5%; text-align: center;">Surprise Insp</th>
                <th style="width: 5%; text-align: center;">Drive</th>
                <th style="width: 5%; text-align: center;">Action</th>
                </tr>
                `)
                for (let i = 0; i < response.data.length; i++) {
                    // Construct table row HTML
                    td += `<tr>
                              <td>${response.data[i][0]}</td>
                              <td><a href="#" onclick="fetchdata('t_insp','${response.data[i][0]}');">${response.data[i][1]}</a></td>
                              <td><a href="#" onclick="fetchdata('t_item','${response.data[i][0]}');">${response.data[i][2]}</a></td>
                              <td><a href="#" onclick="fetchdata('p_insp','${response.data[i][0]}');">${response.data[i][3]}</a></td>
                              <td><a href="#" onclick="fetchdata('p_item','${response.data[i][0]}');">${response.data[i][4]}</a></td>
                              <td><a href="#" onclick="fetchdata('ps','${response.data[i][0]}');">${response.data[i][5]}</a></td>
                              <td><a href="#" onclick="fetchdata('es','${response.data[i][0]}');">${response.data[i][6]}</a></td>
                              <td><a href="#" onclick="fetchdata('oth','${response.data[i][0]}');">${response.data[i][7]}</a></td>
                              <td><a href="#" onclick="fetchdata('ni','${response.data[i][0]}');">${response.data[i][8]}</a></td>
                              <td><a href="#" onclick="fetchdata('si','${response.data[i][0]}');">${response.data[i][9]}</a></td>
                              <td><a href="#" onclick="fetchdata('di','${response.data[i][0]}');">${response.data[i][10]}</a></td>
                              <td>
                                <button type="button" id="" name="${response.data[i][0]}"
                                    onclick="expand_all_data('${response.data[i][0]}');"
                                    style="border-style: none; margin-left: 30%;">
                                    <i class="fas fa-angle-double-down"
                                        style="font-size:24px;color:rgb(105, 174, 238)"
                                        title="Click To Expand/Shrink Details"></i>
                                </button>
                              </td>
                           
                             
                            </tr>`;
                }

                $("#mydata").empty();
                $("#mydata").append(td);
            }
           
            else if(typeID == 'ZR'){

                $("#thead1").empty()
                $("#thead1").append(`
                    <tr>
                        <th style="width: 10%; text-align: center;" colspan="1"> </th>
                        <th style="width: 10%; text-align: center;" colspan="2">Total Count </th>
                        <th style="width: 10%; text-align: center;" colspan="2">Pending Count </th>
                        <th style="width: 10%; text-align: center;" colspan="7">Pendency Count</th>
                   
                    </tr>
                    <tr>
                    <th style="width: 5%; text-align: center;">Rly/Org.</th>
                   
                    <th style="width: 10%; text-align: center;">Insp </th>
                    <th style="width: 10%; text-align: center;">Item</th>
                    <th style="width: 10%; text-align: center;">Insp </th>
                    <th style="width: 10%; text-align: center;">Item</th>
                    <th style="width: 5%; text-align: center;">Psgn Safety</th>
                    <th style="width: 5%; text-align: center;">Emply Safety</th>
                    <th style="width: 5%; text-align: center;">Oth</th>
                    <th style="width: 5%; text-align: center;">Night Insp</th>
                    <th style="width: 5%; text-align: center;">Surprise Insp</th>
                    <th style="width: 5%; text-align: center;">Drive</th>
                    <th style="width: 5%; text-align: center;">Action</th>
                    </tr>
                `)
                for (let i = 0; i < response.data.length; i++) {
                    // Construct table row HTML
                    td += `<tr>
                              <td>${response.data[i][0]}</td>
                              <td><a href="#" onclick="fetchdata('t_insp','${response.data[i][0]}');">${response.data[i][1]}</a></td>
                              <td><a href="#" onclick="fetchdata('t_item','${response.data[i][0]}');">${response.data[i][2]}</a></td>
                              <td><a href="#" onclick="fetchdata('p_insp','${response.data[i][0]}');">${response.data[i][3]}</a></td>
                              <td><a href="#" onclick="fetchdata('p_item','${response.data[i][0]}');">${response.data[i][4]}</a></td>
                              <td><a href="#" onclick="fetchdata('ps','${response.data[i][0]}');">${response.data[i][5]}</a></td>
                              <td><a href="#" onclick="fetchdata('es','${response.data[i][0]}');">${response.data[i][6]}</a></td>
                              <td><a href="#" onclick="fetchdata('oth','${response.data[i][0]}');">${response.data[i][7]}</a></td>
                              <td><a href="#" onclick="fetchdata('ni','${response.data[i][0]}');">${response.data[i][8]}</a></td>
                              <td><a href="#" onclick="fetchdata('si','${response.data[i][0]}');">${response.data[i][9]}</a></td>
                              <td><a href="#" onclick="fetchdata('di','${response.data[i][0]}');">${response.data[i][10]}</a></td>
                              <td>
                             
                                <button type="button" id="" name="${response.data[i][0]}"
                                    onclick="expand_all_data('${response.data[i][0]}');"
                                    style="border-style: none; margin-left: 30%;">
                                    <i class="fas fa-angle-double-down"
                                        style="font-size:24px;color:rgb(105, 174, 238)"
                                        title="Click To Expand/Shrink Details"></i>
                                </button>
                              </td>
                            </tr>`;
                }

                $("#mydata").empty();
                $("#mydata").append(td);
            }
           
            else if(typeID == 'ZR' && card_type !='Station'){
               
                let headdata = ``
                $("#thead1").empty()
                headdata +=`
                <tr>
                        <th style="width: 10%; text-align: center;" colspan="1"> </th>
                        <th style="width: 10%; text-align: center;" colspan="2">Total Count </th>
                        <th style="width: 10%; text-align: center;" colspan="2">Pending Count </th>
                        <th style="width: 10%; text-align: center;" colspan="6">Pendency Count</th>
                   
                    </tr>
                    <tr>
                    <th style="width: 5%; text-align: center;">Rly/Org.</th>
                   
                    <th style="width: 10%; text-align: center;">Insp </th>
                    <th style="width: 10%; text-align: center;">Item</th>
                    <th style="width: 10%; text-align: center;">Insp </th>
                    <th style="width: 10%; text-align: center;">Item</th>
                    <th style="width: 5%; text-align: center;">Psgn Safety</th>
                    <th style="width: 5%; text-align: center;">Emply Safety</th>
                    <th style="width: 5%; text-align: center;">Oth</th>
                    <th style="width: 5%; text-align: center;">Night Insp</th>
                    <th style="width: 5%; text-align: center;">Surprise Insp</th>
                    <th style="width: 5%; text-align: center;">Drive</th>
                    </tr>`
                $("#thead1").append(headdata)
                for (let i = 0; i < response.data.length; i++) {
                    // Construct table row HTML
                    td += `<tr>
                              <td>${response.data[i][0]}</td>
                              <td><a href="#" onclick="fetchdata('t_insp','${response.data[i][0]}');">${response.data[i][1]}</a></td>
                              <td><a href="#" onclick="fetchdata('t_item','${response.data[i][0]}');">${response.data[i][2]}</a></td>
                              <td><a href="#" onclick="fetchdata('p_insp','${response.data[i][0]}');">${response.data[i][3]}</a></td>
                              <td><a href="#" onclick="fetchdata('p_item','${response.data[i][0]}');">${response.data[i][4]}</a></td>
                              <td><a href="#" onclick="fetchdata('ps','${response.data[i][0]}');">${response.data[i][5]}</a></td>
                              <td><a href="#" onclick="fetchdata('es','${response.data[i][0]}');">${response.data[i][6]}</a></td>
                              <td><a href="#" onclick="fetchdata('oth','${response.data[i][0]}');">${response.data[i][7]}</a></td>
                              <td><a href="#" onclick="fetchdata('ni','${response.data[i][0]}');">${response.data[i][8]}</a></td>
                              <td><a href="#" onclick="fetchdata('si','${response.data[i][0]}');">${response.data[i][9]}</a></td>
                              <td><a href="#" onclick="fetchdata('di','${response.data[i][0]}');">${response.data[i][10]}</a></td>
                             
                             
                            </tr>`;
                }

                $("#mydata").empty();
                $("#mydata").append(td);
            }
           
            else{
                // alert('else')
                let headdata = ``
                $("#thead1").empty()
                headdata += `<tr>
               
                <th style=" text-align: center;"> S.No. </th>
                <th style=" text-align: center;" colspan="4"></th>
                <th style=" text-align: center;" colspan="2">Total Count </th>
                <th style=" text-align: center;" colspan="2">Pending Count </th>
                <th style=" text-align: center;" colspan="2">Overdue Count </th>
                <th style=" text-align: center;" colspan="4">Pendency Count</th>
               
                </tr>
                <tr><th></th>  
                    <th style="text-align: center;">Rly/Org.</th>
                    <th style="text-align: center;">Div./Unit</th>
                    <th style="text-align: center;">Location</th>
                    <th style="text-align: center;">Location Type</th>
                    <th style="text-align: center;">Insp </th>
                    <th style="text-align: center;">Item</th>
                    <th style="text-align: center;">Insp </th>
                    <th style="text-align: center;">Item</th>
                    <th style="text-align: center;">insp </th>
                    <th style="text-align: center;">Item </th>
                    <th style="text-align: center;">>7 Days</th>
                    <th style="text-align: center;">>30 Days</th>
                    <th style="text-align: center;">>90 Days</th>
                    <th style="text-align: center;">>180 Days</th>
                    </tr>`
                $("#thead1").append(headdata)
                for(let i = 0; i<response.data.length; i++){
            td += `  <tr>
                    <td>${i + 1}</td>
                    <td>${response.data[i][0]}</td>
                    <td>${response.data[i][1]}</td>
                    <td>${response.data[i][2]}</td>
                    <td>${response.data[i][3]}</td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('t_insp','${response.data[i][1]}');">${response.data[i][4]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('p_insp','${response.data[i][1]}');">${response.data[i][5]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('t_item','${response.data[i][1]}');">${response.data[i][6]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('p_item','${response.data[i][1]}');">${response.data[i][7]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('o_insp','${response.data[i][1]}');">${response.data[i][8]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('o_item','${response.data[i][1]}');">${response.data[i][9]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days7','${response.data[i][1]}');">${response.data[i][10]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days30','${response.data[i][1]}');">${response.data[i][11]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days90','${response.data[i][1]}');">${response.data[i][12]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days180','${response.data[i][1]}');">${response.data[i][13]}</a></td>
                   
                </tr>`;
                }

                $("#mydata").empty();
                $("#mydata").append(td);
            }

            table=$('#table_id').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    // paging: false,
                    // scrollCollapse: true,
                    // scrollY: '150px',
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            console.log("datefrom",e1)
                            var e2 = $('#dateto').val()
                            if(typeId == 'IR'){
                                var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' related item ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            console.log("datefrom1",e1)
                            console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            console.log("doc",doc)
                            console.log("doc",doc.defaultStyle)
                            console.log("doc2",doc.styles.tableBodyEven)
                            console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            if(typeId == 'IR'){
                                var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre = typeId+' : List of '+card_type+' related item ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
               
           
                if(typeID == 'IR'){
                   
                    if(mylist.includes('Overdue'))
                    {
                        $("#demo").text('Overdue Count For Rly/Org. '+card_type+' From '+searchDate+' To '+searchDateTo)

                        if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Overdue Priority Count For Rly/Org. '+card_type+' From '+searchDate+' To '+searchDateTo)
                    }  
                    }  
                    else if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Pending Priority Count For Rly/Org. '+card_type+' From '+searchDate+' To '+searchDateTo)
                    }
                    else
                    {
                        $("#demo").text('Pending Count For Rly/Org. '+card_type+' From '+searchDate+' To '+searchDateTo)
                    }
                    }
                   
                    else{
                        if(mylist.includes('Overdue'))
                    {
                        $("#demo").text('Overdue Count For '+ zoneID+' '+ divID+' '+card_type+' From '+searchDate+' To '+searchDateTo)

                        if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Overdue Priority Count For '+ zoneID+' '+ divID+' '+card_type+' From '+searchDate+' To '+searchDateTo)
                    }  
                    }  
                    else if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Pending Priority Count For '+ zoneID+' '+ divID+' '+card_type+' From '+searchDate+' To '+searchDateTo)
                    }
                    else
                    {
                        $("#demo").text('Pending Count For '+ zoneID+' '+ divID+' '+card_type+' From '+searchDate+' To '+searchDateTo)
                    }
                       
                    }
                    $("#btnmodal").click();
        },
        error: function (xhr, status, error) {
            console.error(error);
            // Handle error if needed
        }
    });
}


function expand_all_data(zone){
    $("#anvi").show()
    $("#check1").show()
    $("#gurleen").hide()
    $("#check").hide()
   

    let typeID = $('#typeID').val()
    let zoneID = $('#zoneID').val()
    let divID = $('#divID').val()
    let division = $("#division").val()
    var searchDate =  $('#startDate').val()
    var searchDateTo = $('#endDate').val()
    let card_type = $('input[name="optradio"]:checked').val();
    if(typeID == 'IR' || typeID == 'ZR'){
        typeID = 'ZR'
        zoneID = zone
    }
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
   
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
        // alert(mylist)
        // if()
    }
    let requestData = {
        typeId: typeID,  
        zoneId: zoneID,
        divId: divID,
        searchDate : searchDate,
        searchDateTo: searchDateTo,
        searchDepartment : $('#searchDepartment').val(),
        searchDesignation : $('#searchDesignation').val(),
        searchLevel : $('#searchLevel').val(),
        // searchRailway : $('#searchRailway').val(),
        csrfmiddlewaretoken: '{{ csrf_token }}',
        card_type :card_type,
        expandData : 'True',
        mylist:JSON.stringify(mylist)
    };
   
    $.ajax({
        method: "POST",  
        url: "{% url 'TableIcon' %}",
        dataType: 'json',
        data: requestData,
        success: function (response) {
            console.log(response)
            let headdata = ``
            let td = ''
            table1.destroy()
                $("#thead2").empty()
                headdata +=`

                <tr>
                    <th style="width: 10%; text-align: center;" colspan="3"> </th>
                        <th style="width: 10%; text-align: center;" colspan="2">Total Count </th>
                        <th style="width: 10%; text-align: center;" colspan="2">Pending Count </th>
                        <th style="width: 10%; text-align: center;" colspan="7">Pendency Count</th>
                       
                        </tr>
                        <tr>
                            <th style="width: 5%; text-align: center;">Rly/Org.</th>
                            <th style="width: 5%; text-align: center;">Div./Unit</th>
                            <th style="width: 10%; text-align: center;">Location</th>
                         
                            <th style="width: 10%; text-align: center;">Insp </th>
                            <th style="width: 10%; text-align: center;">Item</th>
                            <th style="width: 10%; text-align: center;">Insp </th>
                            <th style="width: 10%; text-align: center;">Item</th>
                            <th style="width: 5%; text-align: center;">Psgn Safety</th>
                            <th style="width: 5%; text-align: center;">Emply Safety</th>
                            <th style="width: 5%; text-align: center;">Oth</th>
                            <th style="width: 5%; text-align: center;">Night Insp</th>
                            <th style="width: 5%; text-align: center;">Surprise Insp</th>
                            <th style="width: 5%; text-align: center;">Drive</th>
                            <th style="width: 5%; text-align: center;">Action</th>
                    </tr>`
                $("#thead2").append(headdata)
                for (let i = 0; i < response.data.length; i++) {
                    // Construct table row HTML
                    td += `<tr>
                              <td>${response.data[i][0]}</td>
                              <td>${response.data[i][1]}</td>
                              <td>${response.data[i][2]}</td>
                             
                              <td><a href="#" onclick="fetchdata('t_insp','${response.data[i][1]}');">${response.data[i][4]}</a></td>
                              <td><a href="#" onclick="fetchdata('t_item','${response.data[i][1]}');">${response.data[i][5]}</a></td>
                              <td><a href="#" onclick="fetchdata('p_insp','${response.data[i][1]}');">${response.data[i][6]}</a></td>
                              <td><a href="#" onclick="fetchdata('t_item','${response.data[i][1]}');">${response.data[i][7]}</a></td>
                              <td><a href="#" onclick="fetchdata('ps','${response.data[i][1]}');">${response.data[i][8]}</a></td>
                              <td><a href="#" onclick="fetchdata('es','${response.data[i][1]}');">${response.data[i][9]}</a></td>
                              <td><a href="#" onclick="fetchdata('oth','${response.data[i][1]}');">${response.data[i][10]}</a></td>
                              <td><a href="#" onclick="fetchdata('ni','${response.data[i][1]}');">${response.data[i][11]}</a></td>
                              <td><a href="#" onclick="fetchdata('si','${response.data[i][1]}');">${response.data[i][12]}</a></td>
                              <td><a href="#" onclick="fetchdata('di','${response.data[i][1]}');">${response.data[i][13]}</a></td>
                       
                              <td><button type="button" onclick="shrink_all_designation();"
                                    style="border-style: none; margin-left: 30%;">
                                    <i class="fas fa-angle-double-up"
                                        style="font-size:24px;color:rgb(105, 174, 238)"
                                        title="Click To Expand/Shrink Details"></i>
                                </button></td>`;
                }

                $("#mydata1").empty();
                $("#mydata1").append(td);
                table1=$('#table_id1').DataTable({
                        "iDisplayLength": 10,
                       
                        // "ordering": false,
                        "lengthChange": true,
                        "lengthMenu": [10,15, 30, 50, 75, 100],
                        dom: 'Blfrtip',
                       
                        buttons: [
                        {
                            extend: 'excel',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                               
                                var e2 = $('#dateto').val()
                                if(typeId == 'All'){
                                    var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') From '+searchDate+' To '+searchDateTo
                                }
                                else{
                                    var stre=typeId+' : List of '+card_type+' related item ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                                }
                                return stre
                            },
                            // orientation: 'landscape',
                            // pageSize: 'LEGAL',
                           
                        },
                        {
                            extend:'pdfHtml5',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                                var e2 = $('#dateto').val()
                                console.log("datefrom1",e1)
                                console.log("datefrom1",datefrom)
                                var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                                console.log('insode inspection report',stre)
                                return stre
                            },
                            exportOptions: {
                                alignment: 'right',
                                },
                            customize: function ( doc ) {
                                console.log("doc",doc)
                                console.log("doc",doc.defaultStyle)
                                console.log("doc2",doc.styles.tableBodyEven)
                                console.log("doc3",doc.styles.tableBodyOdd)
                                doc.content.splice(0,1);
                               
                                doc.styles.tableBodyEven.alignment = 'center';
                                doc.styles.tableBodyOdd.alignment = 'center';
                            },
                            text :'Pdf',
                            title:"Inspection Report ",
                                        fontSize : 'LEGAL'
                           
                        },
                        {
                            extend: 'print',
                            footer:true,
                            title: function (e) {
                                var s1 = $('#datefrom').val()
                                var s2 = $('#dateto').val()
                                var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                                return str
                            },
                            customize: function ( doc ) {
                                $(doc.document.body).find('table_id1').css('text-align', 'center');
   
                                //  $(doc.document.body).find('table').css('border', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                                },
                                "pagingType": "simple",
                                "sEmptyTable": 'No data available in table',
   
                                // "bSort": true,
   
                                "oLanguage": {
                                    "sInfoEmpty": "Page 0 of 0 ",
                                },
                                "language": {
                                    "info": "Page _PAGE_ of _PAGES_",
                                    "paginate": {
                                        "previous": "Prev",
                                    },
                                },
                        },
                        ],
                    });
 
                document.getElementById('div-all-desig').classList.toggle('zonetable-show-hide');
                document.querySelector('#div-all-desig-details').classList.toggle('zonetable-show-hide');
        }
    });

}

</script>

    <!-- gurleen script -->
    <script>

// function fetchdata2(card_type)
//         {
//             // alert('a12345')
//             let inspect_type = ['Passenger Safety','Employee Safety','Others','Night Inspection','Surprise Inspection','Drive Inspection']
//             if( inspect_type.includes(card_type)){
//                 $("#INSPITEMTYPE").val(card_type)
//             }

//             $("#anvi").hide()
//             $("#check1").hide()
//             $("#gurleen").show()
//             $("#check").show()

//             //  select the default radion and select button for gurleen
//             if ($("#modal").css('display') == 'none'){
//                 // alert('kjsdf')
//                 $('#radio6').prop('checked','checked')
//                 $('#Pending').prop('checked',true)
//                 $('#Overdue').prop('checked',false)
//                 $('#Priority').prop('checked',false)
//             }

//             var selectedDivision = $('.division-item.active').data('value');
//             let typeID = $('#typeID').val()
//             let zoneID = $('#zoneID').val()
//             let divID = $('#divID').val()
//             let division = $("#division").val()
//             let searchDate = $('#startDate').val()
//             let searchDateTo = $('#endDate').val()
//             let zone = $('#zone').val()

//             if($("#div-all-desig-details").css('display') == 'block'){
//                 shrink_all_designation();
//             }
//             // condition to check the division
//             // if(division != 'All'){
//             //     let sp = division.split('-')
//             //     console.log('sp',sp)
//             //     typeID = sp[1]
//             //     divID = sp[0]
//             // }
//             // condition to check the division
//             if(division != 'All'){
//                 let sp = division.split('-')
//                 console.log('sp',sp)
//                 typeID = sp[1]
//                 divID = sp[0]
//             }
//             else if (zone != 'All' && (!['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
//                 typeID = 'ZR'
//                 zoneID = zone
//             }
//             else if (zone != 'All' && (['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
//                 typeID = 'PU'
//                 zoneID = zone
//             }

//             let mydata = ['Pending','Overdue','Priority']
//             if(mydata.includes(card_type) ){
//                 // alert("ppp "+card_type)
//                 card_type = $('input[name="optradio"]:checked').val();

//             }
//             // value of check box
//             mylist = []
//             let checkbox = document.querySelectorAll('input[type=checkbox]:checked')

//             for(let i = 0;i < checkbox.length;i++){
//                 mylist.push(checkbox[i].value)
//                 // alert(mylist)
//                 // if()
//             }
//             // alert(typeID+divID)

//             // if (document.getElementById("Overdue").checked) {
//             // alert('Checkbox is checked, proceed with fetchdata2')
//             // var card=card_type
//             // }
//             // else{
//             //     alert('Unchecked');
//             // }
//             let requestData = {
//             typeId: typeID,    
//             zoneId: zoneID,  
//             divId: divID,
//             searchDate : searchDate,
//             searchDateTo : searchDateTo,
//             searchDepartment : $('#searchDepartment').val(),
//             searchDesignation : $('#searchDesignation').val(),
//             searchLevel : $('#searchLevel').val(),
//             selectedDivision: $('.division-item.active').data('value'),
//             card_type : card_type,
//             INSPITEMTYPE : $("#INSPITEMTYPE").val(),
//             csrfmiddlewaretoken: '{{ csrf_token }}',
//             mylist:JSON.stringify(mylist),
//         };
           
       
//         $.ajax({
//             method: "POST",
//             url: "{% url 'IconData' %}",
//             dataType: 'json',
//             data: requestData,
//             success: function (response) {
//                 $("#hideme").show()
//                 console.log(response)
//                 // let tr = '<tr>'
//                 var typeId = $('#typeID').val();
           
//             if(typeID==='IR'){
//                 let td = ''
//                 document.getElementById('modaldismis').click();
//                 table.destroy()
//             $("#thead1").empty()
//             $("#thead1").append(`<tr>
               
//             <th style=" text-align: center;"> S.No. </th>
//             <th style=" text-align: center;colspan="2"></th>
//             <th style=" text-align: center;" colspan="2">Total Count </th>
//             <th style=" text-align: center;" colspan="2">Pending Count </th>
//             <th style=" text-align: center;" colspan="2">Overdue Count </th>
//             <th style=" text-align: center;" colspan="5">Pendency Count</th>
           
//             </tr>
//             <tr><th></th>  
//                <th style="text-align: center;">Railway</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item </th>
//                 <th style="text-align: center;">>7 </th>
//                 <th style="text-align: center;">>30 </th>
//                 <th style="text-align: center;">>90 </th>
//                 <th style="text-align: center;">>180 </th>
//                 <th style="text-align: center;">Action</th>
//                 </tr>`)
           
//             for(let i = 0; i<response.data.length; i++){
//             td += `  <tr>
//                     <td>${i + 1}</td>
//                     <td>${response.data[i][0]}</td>
//                     <td>${response.data[i][1]}</td>
//                     <td>${response.data[i][2]}</td>
//                     <td>${response.data[i][3]}</td>
//                     <td>${response.data[i][4]}</td>
//                     <td>${response.data[i][5]}</td>
//                     <td>${response.data[i][6]}</td>
//                     <td>${response.data[i][7]}</td>
//                     <td>${response.data[i][8]}</td>
//                     <td>${response.data[i][9]}</td>
//                     <td>${response.data[i][10]}</td>
//                     <td>
//                         <button type="button" id="" name="${response.data[i][0]}"
//                             onclick="expand_all_data_fetch_data('${response.data[i][0]}');"
//                             style="border-style: none; margin-left: 30%;">
//                             <i class="fas fa-angle-double-down"
//                                 style="font-size:24px;color:rgb(105, 174, 238)"
//                                 title="Click To Expand/Shrink Details"></i>
//                         </button>
//                         </td>
//                 </tr>`
//             }
           
//             $("#mydata").empty()
//             $("#mydata").append(td)
//             }
           
//             else if ( typeID === "ZR")
//             {
//                 let td = ''
//                 document.getElementById('modaldismis').click();
//                 table.destroy()
           
//             $("#thead1").empty()
//             $("#thead1").append(`<tr>
               
//             <th style=" text-align: center;"> S.No. </th>
//             <th style=" text-align: center;" colspan="2"></th>
//             <th style=" text-align: center;" colspan="2">Total Count </th>
//             <th style=" text-align: center;" colspan="2">Pending Count </th>
//             <th style=" text-align: center;" colspan="2">Overdue Count </th>
//             <th style=" text-align: center;" colspan="5">Pendency Count</th>
           
//             </tr>
//             <tr><th></th>  
//                <th style="text-align: center;">Railway</th>
//                <th style="text-align: center;">Division</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item </th>
//                 <th style="text-align: center;">>7 </th>
//                 <th style="text-align: center;">>30 </th>
//                 <th style="text-align: center;">>90 </th>
//                 <th style="text-align: center;">>180 </th>
//                 <th style="text-align: center;">Action</th>
//                 </tr>`)
           
//             for(let i = 0; i<response.data.length; i++){
//             td += `  <tr>
//                     <td>${i + 1}</td>
//                     <td>${response.data[i][0]}</td>
//                     <td>${response.data[i][1]}</td>
//                     <td>${response.data[i][2]}</td>
//                     <td>${response.data[i][3]}</td>
//                     <td>${response.data[i][4]}</td>
//                     <td>${response.data[i][5]}</td>
//                     <td>${response.data[i][6]}</td>
//                     <td>${response.data[i][7]}</td>
//                     <td>${response.data[i][8]}</td>
//                     <td>${response.data[i][9]}</td>
//                     <td>${response.data[i][10]}</td>
//                     <td>${response.data[i][11]}</td>
//                     <td>
//                         <button type="button" id="" name="${response.data[i][0]}"
//                             onclick="expand_all_data_fetch_data('${response.data[i][0]}');"
//                             style="border-style: none; margin-left: 30%;">
//                             <i class="fas fa-angle-double-down"
//                                 style="font-size:24px;color:rgb(105, 174, 238)"
//                                 title="Click To Expand/Shrink Details"></i>
//                         </button>
//                         </td>
                   
//                 </tr>`
//             }
           
//             $("#mydata").empty()
//             $("#mydata").append(td)
//             }
           
//             else
//             {
//                 let td = ''
//                 document.getElementById('modaldismis').click();
//                 table.destroy()
           
//             $("#thead1").empty()
//             $("#thead1").append(`<tr>
               
//             <th style=" text-align: center;"> S.No. </th>
//             <th style=" text-align: center;" colspan="4"></th>
//             <th style=" text-align: center;" colspan="2">Total Count </th>
//             <th style=" text-align: center;" colspan="2">Pending Count </th>
//             <th style=" text-align: center;" colspan="2">Overdue Count </th>
//             <th style=" text-align: center;" colspan="4">Pendency Count</th>
           
//             </tr>
//             <tr><th></th>  
//                 <th style="text-align: center;">Railway</th>
//                 <th style="text-align: center;">Division</th>
//                 <th style="text-align: center;">Unit</th>
//                 <th style="text-align: center;">Unit Type</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item</th>
//                 <th style="text-align: center;">insp </th>
//                 <th style="text-align: center;">Item </th>
//                 <th style="text-align: center;">>7 </th>
//                 <th style="text-align: center;">>30 </th>
//                 <th style="text-align: center;">>90 </th>
//                 <th style="text-align: center;">>180 </th>
//                 </tr>`)
           
//             for(let i = 0; i<response.data.length; i++){
//             td += `  <tr>
//                     <td>${i + 1}</td>
//                     <td>${response.data[i][0]}</td>
//                     <td>${response.data[i][1]}</td>
//                     <td>${response.data[i][2]}</td>
//                     <td>${response.data[i][3]}</td>
//                     <td>${response.data[i][4]}</td>
//                     <td>${response.data[i][5]}</td>
//                     <td>${response.data[i][6]}</td>
//                     <td>${response.data[i][7]}</td>
//                     <td>${response.data[i][8]}</td>
//                     <td>${response.data[i][9]}</td>
//                     <td>${response.data[i][10]}</td>
//                     <td>${response.data[i][11]}</td>
//                     <td>${response.data[i][12]}</td>
//                     <td>${response.data[i][13]}</td>
                   
//                 </tr>`
//             }
           
//             $("#mydata").empty()
//             $("#mydata").append(td)
//             }
           
//             if(typeID == 'IR'){
//             $("#demo").text('Pending Count For RLy/Org. '+$("#INSPITEMTYPE").val()+' From '+searchDate+' To '+searchDateTo)
//             }
//             else{
//                 $("#demo").text('Pending Count For '+typeID+' '+$("#INSPITEMTYPE").val()+' From '+searchDate+' To '+searchDateTo)
//             }

//                 table=$('#table_id').DataTable({
//                         "iDisplayLength": 10,
                       
//                         // "ordering": false,
//                         "lengthChange": true,
//                         "lengthMenu": [10,15, 30, 50, 75, 100],
//                         dom: 'Blfrtip',
                       
//                         buttons: [
//                         {
//                             extend: 'excel',
//                             title: function (e) {
//                                 var e1 = $('#datefrom').val()
//                                 console.log("datefrom",e1)
//                                 var e2 = $('#dateto').val()
//                                 if(typeId == 'All'){
//                                     var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') From '+searchDate+' To '+searchDateTo
//                                 }
//                                 else{
//                                     var stre=typeId+' : List of '+card_type+' related item ('+card_data+ ') From '+searchDate+' To '+searchDateTo
//                                 }
//                                 return stre
//                             },
//                             // orientation: 'landscape',
//                             // pageSize: 'LEGAL',
                           
//                         },
//                         {
//                             extend:'pdfHtml5',
//                             title: function (e) {
//                                 var e1 = $('#datefrom').val()
//                                 var e2 = $('#dateto').val()
//                                 console.log("datefrom1",e1)
//                                 console.log("datefrom1",datefrom)
//                                 var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
//                                 console.log('insode inspection report',stre)
//                                 return stre
//                             },
//                             exportOptions: {
//                                 alignment: 'right',
//                                 },
//                             customize: function ( doc ) {
//                                 console.log("doc",doc)
//                                 console.log("doc",doc.defaultStyle)
//                                 console.log("doc2",doc.styles.tableBodyEven)
//                                 console.log("doc3",doc.styles.tableBodyOdd)
//                                 doc.content.splice(0,1);
                               
//                                 doc.styles.tableBodyEven.alignment = 'center';
//                                 doc.styles.tableBodyOdd.alignment = 'center';
//                             },
//                             text :'Pdf',
//                             title:"Inspection Report ",
//                                         fontSize : 'LEGAL'
                           
//                         },
//                         {
//                             extend: 'print',
//                             footer:true,
//                             title: function (e) {
//                                 var s1 = $('#datefrom').val()
//                                 var s2 = $('#dateto').val()
//                                 var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
//                                 return str
//                             },
//                             customize: function ( doc ) {
//                                 $(doc.document.body).find('tableid').css('text-align', 'center');
   
//                                 //  $(doc.document.body).find('table').css('border', '1px solid #000');
//                                 //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
//                                 //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
//                                 //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
//                                 //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
//                                 },
//                                 "pagingType": "simple",
//                                 "sEmptyTable": 'No data available in table',
   
//                                 // "bSort": true,
   
//                                 "oLanguage": {
//                                     "sInfoEmpty": "Page 0 of 0 ",
//                                 },
//                                 "language": {
//                                     "info": "Page _PAGE_ of _PAGES_",
//                                     "paginate": {
//                                         "previous": "Prev",
//                                     },
//                                 },
//                         },
//                         ],
//                     });
           
//                 $("#btnmodal").click()
   
   
//             }
//         });
//         }

function fetchdata2(card_type)
        {
            $('#excelButton').empty();
            let rowdata = `<button onclick="fetchdata2_excel('${card_type}')"  class="btn btn-success btn" >Excel</button>`;
            $('#excelButton').append(rowdata)
            $('#pdfButton').empty();
            let rowdatapdf = `<button onclick="fetchdata2_pdf('${card_type}')"  class="btn btn-danger btn" >Pdf</button>`;
            $('#pdfButton').append(rowdatapdf)
            // alert('a12345')
            let inspect_type = ['Passenger Safety','Employee Safety','Other Items','Night Inspection','Surprise Inspection','Drive Inspection']
            if( inspect_type.includes(card_type)){
                $("#INSPITEMTYPE").val(card_type)
            }

            $("#anvi").hide()
            $("#check1").hide()
            $("#gurleen").show()
            $("#check").show()
            $("#a_rly").hide()
            $("#a_div").hide()
            $("#g_rly").show()
            $("#g_div").show()

            //  select the default radion and select button
            if ($("#modal").css('display') == 'none'){
                // alert('kjsdf')
                $('#radio6').prop('checked','checked')
                $('#Pending').prop('checked',true)
                $('#Overdue').prop('checked',false)
                $('#Priority').prop('checked',false)
                $('#division1').val('All')
                $('#zone1').val('All')
            }

            var selectedDivision = $('.division-item.active').data('value');
            let typeID = $('#typeID').val()
            let zoneID = $('#zoneID').val()
            let divID = $('#divID').val()
            let division = $("#division1").val()
            let searchDate = $('#startDate').val()
            let searchDateTo = $('#endDate').val()
            let zone = $('#zone1').val()

            if($("#div-all-desig-details").css('display') == 'block'){
                shrink_all_designation();
            }
            // condition to check the division
            // if(division != 'All'){
            //     let sp = division.split('-')
            //     console.log('sp',sp)
            //     typeID = sp[1]
            //     divID = sp[0]
            // }
            // condition to check the division
            if(division != 'All'){
                let sp = division.split('-')
                console.log('sp',sp)
                typeID = sp[1]
                divID = sp[0]
                card_type = $('input[name="optradio"]:checked').val();
            }
            else if (zone != 'All' && (!['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
                typeID = 'ZR'
                zoneID = zone
                card_type = $('input[name="optradio"]:checked').val();
            }
            else if (zone != 'All' && (['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
                typeID = 'PU'
                zoneID = zone
                card_type = $('input[name="optradio"]:checked').val();
            }

            if(divID != ''){
                $('#division1').val(divID+'-'+typeID)

            }
            else if(zoneID != ''){
                $('#zone1').val(zoneID)
            }
            else{
                $('#zone1').val('All')
            }
            let mydata = ['Pending','Overdue','Priority']
            if(mydata.includes(card_type) ){
                // alert("ppp "+card_type)
                card_type = $('input[name="optradio"]:checked').val();

            }
            // value of check box
            mylist = []
            let checkbox = document.querySelectorAll('input[type=checkbox]:checked')

            for(let i = 0;i < checkbox.length;i++){
                mylist.push(checkbox[i].value)
                // alert(mylist)
                // if()
            }
            // alert(typeID+divID)

            // if (document.getElementById("Overdue").checked) {
            // alert('Checkbox is checked, proceed with fetchdata2')
            // var card=card_type
            // }
            // else{
            //     alert('Unchecked');
            // }
           
            let requestData = {
            typeId: typeID,    
            zoneId: zoneID,  
            divId: divID,
            searchDate : searchDate,
            searchDateTo : searchDateTo,
            searchDepartment : $('#searchDepartment').val(),
            searchDesignation : $('#searchDesignation').val(),
            searchLevel : $('#searchLevel').val(),
            selectedDivision: $('.division-item.active').data('value'),
            card_type : card_type,
            INSPITEMTYPE : $("#INSPITEMTYPE").val(),
            csrfmiddlewaretoken: '{{ csrf_token }}',
            mylist:JSON.stringify(mylist),
        };
           
        // type change for stn,stm,trn,oth
        if(card_type == 'STM'){
                card_type = 'Station'
            }
            else if(card_type == 'SEM'){
                card_type = 'Section'
            }
            else if(card_type == 'TRN'){
                card_type = 'Train'
            }
            else if(card_type == 'OTH'){
                card_type = 'Other'
            }
            else if(card_type == 'Station'){
                card_type = ''
            }
            // end here
        $.ajax({
            method: "POST",
            url: "{% url 'IconData' %}",
            dataType: 'json',
            data: requestData,
            success: function (response) {
                $("#hideme").show()
                console.log(response)
                // let tr = '<tr>'
                var typeId = $('#typeID').val();
           
            if(typeID==='IR'){
                let td = ''
                document.getElementById('modaldismis').click();
                table.destroy()
            $("#thead1").empty()
            $("#thead1").append(`<tr>
               
            <th style=" text-align: center;"> S.No. </th>
            <th style=" text-align: center;colspan="2"></th>
            <th style=" text-align: center;" colspan="2">Total Count </th>
            <th style=" text-align: center;" colspan="2">Pending Count </th>
            <th style=" text-align: center;" colspan="2">Overdue Count </th>
            <th style=" text-align: center;" colspan="5">Pendency Count</th>
           
            </tr>
            <tr><th></th>  
               <th style="text-align: center;">Railway</th>
                <th style="text-align: center;">Insp </th>
                <th style="text-align: center;">Item</th>
                <th style="text-align: center;">Insp </th>
                <th style="text-align: center;">Item</th>
                <th style="text-align: center;">Insp </th>
                <th style="text-align: center;">Item </th>
                <th style="text-align: center;">>7 Days</th>
                <th style="text-align: center;">>30 Days</th>
                <th style="text-align: center;">>90 Days</th>
                <th style="text-align: center;">>180 Days</th>
                <th style="text-align: center;">Action</th>
                </tr>`)
           
            for(let i = 0; i<response.data.length; i++){
            td += `  <tr>
                    <td>${i + 1}</td>
                    <td>${response.data[i][0]}</td>
                    <td><a href="#" onclick="fetchdata('t_insp','${response.data[i][0]}');">${response.data[i][1]}</a></td>
                    <td><a href="#" onclick="fetchdata('t_item','${response.data[i][0]}');">${response.data[i][2]}</a></td>
                    <td><a href="#" onclick="fetchdata('p_insp','${response.data[i][0]}');">${response.data[i][3]}</a></td>
                    <td><a href="#" onclick="fetchdata('p_item','${response.data[i][0]}');">${response.data[i][4]}</a></td>
                    <td><a href="#" onclick="fetchdata('o_insp','${response.data[i][0]}');">${response.data[i][5]}</a></td>
                    <td><a href="#" onclick="fetchdata('o_item','${response.data[i][0]}');">${response.data[i][6]}</a></td>
                    <td><a href="#" onclick="fetchdata('days7','${response.data[i][0]}');">${response.data[i][7]}</a></td>
                    <td><a href="#" onclick="fetchdata('days30','${response.data[i][0]}');">${response.data[i][8]}</a></td>
                    <td><a href="#" onclick="fetchdata('days90','${response.data[i][0]}');">${response.data[i][9]}</a></td>
                    <td><a href="#" onclick="fetchdata('days180','${response.data[i][0]}');">${response.data[i][10]}</a></td>
                    <td>
                        <button type="button" id="" name="${response.data[i][0]}"
                            onclick="expand_all_data_fetch_data('${response.data[i][0]}');"
                            style="border-style: none; margin-left: 30%;">
                            <i class="fas fa-angle-double-down"
                                style="font-size:24px;color:rgb(105, 174, 238)"
                                title="Click To Expand/Shrink Details"></i>
                        </button>
                        </td>
                </tr>`
            }
           
            $("#mydata").empty()
            $("#mydata").append(td)
            }
           
            else if ( typeID === "ZR")
            {
                let td = ''
                document.getElementById('modaldismis').click();
                table.destroy()
           
            $("#thead1").empty()
            $("#thead1").append(`<tr>
               
            <th style=" text-align: center;"> S.No. </th>
            <th style=" text-align: center;" colspan="2"></th>
            <th style=" text-align: center;" colspan="2">Total Count </th>
            <th style=" text-align: center;" colspan="2">Pending Count </th>
            <th style=" text-align: center;" colspan="2">Overdue Count </th>
            <th style=" text-align: center;" colspan="5">Pendency Count</th>
           
            </tr>
            <tr><th></th>  
               <th style="text-align: center;">Rly/Org.</th>
               <th style="text-align: center;">Div./Unit</th>
                <th style="text-align: center;">insp </th>
                <th style="text-align: center;">Item</th>
                <th style="text-align: center;">insp </th>
                <th style="text-align: center;">Item</th>
                <th style="text-align: center;">insp </th>
                <th style="text-align: center;">Item </th>
                <th style="text-align: center;">>7 Days</th>
                <th style="text-align: center;">>30 Days</th>
                <th style="text-align: center;">>90 Days</th>
                <th style="text-align: center;">>180 Days</th>
                <th style="text-align: center;">Action</th>
                </tr>`)
           
            for(let i = 0; i<response.data.length; i++){
            td += `  <tr>
                    <td>${i + 1}</td>
                    <td>${response.data[i][0]}</td>
                    <td>${response.data[i][1]}</td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('t_insp','${response.data[i][1]}');">${response.data[i][2]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('t_item','${response.data[i][1]}');">${response.data[i][3]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('p_insp','${response.data[i][1]}');">${response.data[i][4]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('p_item','${response.data[i][1]}');">${response.data[i][5]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('o_insp','${response.data[i][1]}');">${response.data[i][6]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('o_item','${response.data[i][1]}');">${response.data[i][7]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days7','${response.data[i][1]}');">${response.data[i][8]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days30','${response.data[i][1]}');">${response.data[i][9]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days90','${response.data[i][1]}');">${response.data[i][10]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days180','${response.data[i][1]}');">${response.data[i][11]}</a></td>
                    <td>
                        <button type="button" id="" name="${response.data[i][0]}"
                            onclick="expand_all_data_fetch_data('${response.data[i][0]}');"
                            style="border-style: none; margin-left: 30%;">
                            <i class="fas fa-angle-double-down"
                                style="font-size:24px;color:rgb(105, 174, 238)"
                                title="Click To Expand/Shrink Details"></i>
                        </button>
                        </td>
                   
                </tr>`
            }
           
            $("#mydata").empty()
            $("#mydata").append(td)
            }
           
            else
            {
                let td = ''
                document.getElementById('modaldismis').click();
                table.destroy()
           
            $("#thead1").empty()
            $("#thead1").append(`<tr>
               
            <th style=" text-align: center;"> S.No. </th>
            <th style=" text-align: center;" colspan="4"></th>
            <th style=" text-align: center;" colspan="2">Total Count </th>
            <th style=" text-align: center;" colspan="2">Pending Count </th>
            <th style=" text-align: center;" colspan="2">Overdue Count </th>
            <th style=" text-align: center;" colspan="4">Pendency Count</th>
           
            </tr>
            <tr><th></th>  
                <th style="text-align: center;">Rly/Org.</th>
                <th style="text-align: center;">Div./Unit</th>
                <th style="text-align: center;">Location</th>
                <th style="text-align: center;">Location Type</th>
                <th style="text-align: center;">insp </th>
                <th style="text-align: center;">Item</th>
                <th style="text-align: center;">insp </th>
                <th style="text-align: center;">Item</th>
                <th style="text-align: center;">insp </th>
                <th style="text-align: center;">Item </th>
                <th style="text-align: center;">>7 Days</th>
                <th style="text-align: center;">>30 Days</th>
                <th style="text-align: center;">>90 Days</th>
                <th style="text-align: center;">>180 Days</th>
                </tr>`)
           
            for(let i = 0; i<response.data.length; i++){
            td += `  <tr>
                    <td>${i + 1}</td>
                    <td>${response.data[i][0]}</td>
                    <td>${response.data[i][1]}</td>
                    <td>${response.data[i][2]}</td>
                    <td>${response.data[i][3]}</td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('t_insp','${response.data[i][1]}');">${response.data[i][4]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('p_insp','${response.data[i][1]}');">${response.data[i][5]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('t_item','${response.data[i][1]}');">${response.data[i][6]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('p_item','${response.data[i][1]}');">${response.data[i][7]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('o_insp','${response.data[i][1]}');">${response.data[i][8]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('o_item','${response.data[i][1]}');">${response.data[i][9]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days7','${response.data[i][1]}');">${response.data[i][10]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days30','${response.data[i][1]}');">${response.data[i][11]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days90','${response.data[i][1]}');">${response.data[i][12]}</a></td>
                    <td><a href="javascript:void(0)" onclick="fetchdata('days180','${response.data[i][1]}');">${response.data[i][13]}</a></td>
                   
                </tr>`
            }
           
            $("#mydata").empty()
            $("#mydata").append(td)
            }
           
            if(typeID == 'IR'){
            $("#demo").text('Pending Count For RLy/Org. '+$("#INSPITEMTYPE").val()+' From '+searchDate+' To '+searchDateTo)
            }
            else if (typeID == 'ZR' || typeID == 'PU' || typeID == 'DIV' || typeID == 'WS'){
                $("#demo").text('Pending Count For '+zoneID+' '+$("#INSPITEMTYPE").val()+' From '+searchDate+' To '+searchDateTo)
            }
            else{
                $("#demo").text('Pending Count For '+zoneID/divID+' '+$("#INSPITEMTYPE").val()+' From '+searchDate+' To '+searchDateTo)
            }

                table=$('#table_id').DataTable({
                        "iDisplayLength": 10,
                       
                        // "ordering": false,
                        "lengthChange": true,
                        "lengthMenu": [10,15, 30, 50, 75, 100],
                        dom: 'Blfrtip',
                       
                        buttons: [
                        {
                            extend: 'excel',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                                console.log("datefrom",e1)
                                var e2 = $('#dateto').val()
                                if(typeId == 'All'){
                                    var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') From '+searchDate+' To '+searchDateTo
                                }
                                else{
                                    var stre=typeId+' : List of '+card_type+' related item ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                                }
                                return stre
                            },
                            // orientation: 'landscape',
                            // pageSize: 'LEGAL',
                           
                        },
                        {
                            extend:'pdfHtml5',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                                var e2 = $('#dateto').val()
                                console.log("datefrom1",e1)
                                console.log("datefrom1",datefrom)
                                var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                                console.log('insode inspection report',stre)
                                return stre
                            },
                            exportOptions: {
                                alignment: 'right',
                                },
                            customize: function ( doc ) {
                                console.log("doc",doc)
                                console.log("doc",doc.defaultStyle)
                                console.log("doc2",doc.styles.tableBodyEven)
                                console.log("doc3",doc.styles.tableBodyOdd)
                                doc.content.splice(0,1);
                               
                                doc.styles.tableBodyEven.alignment = 'center';
                                doc.styles.tableBodyOdd.alignment = 'center';
                            },
                            text :'Pdf',
                            title:"Inspection Report ",
                                        fontSize : 'LEGAL'
                           
                        },
                        {
                            extend: 'print',
                            footer:true,
                            title: function (e) {
                                var s1 = $('#datefrom').val()
                                var s2 = $('#dateto').val()
                                var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                                return str
                            },
                            customize: function ( doc ) {
                                $(doc.document.body).find('tableid').css('text-align', 'center');
   
                                //  $(doc.document.body).find('table').css('border', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                                //  $(doc.document.body).fin
d('table td').css('border-top', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                                },
                                "pagingType": "simple",
                                "sEmptyTable": 'No data available in table',
   
                                // "bSort": true,
   
                                "oLanguage": {
                                    "sInfoEmpty": "Page 0 of 0 ",
                                },
                                "language": {
                                    "info": "Page _PAGE_ of _PAGES_",
                                    "paginate": {
                                        "previous": "Prev",
                                    },
                                },
                        },
                        ],
                    });
           
                   
                    if(typeID == 'IR'){
                   
                    if(mylist.includes('Overdue'))
                    {
                        $("#demo").text('Overdue Count For Rly/Org. ('+card_type+')From '+searchDate+' To '+searchDateTo)

                        if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Overdue Priority Count For Rly/Org. ('+card_type+')From '+searchDate+' To '+searchDateTo)
                    }  
                    }  
                    else if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Pending Priority Count For Rly/Org. ('+card_type+')From '+searchDate+' To '+searchDateTo)
                    }
                    else
                    {
                        $("#demo").text('Pending Count For Rly/Org. ('+card_type+')From '+searchDate+' To '+searchDateTo)
                    }
                    }
                   
                    else{
                        if(mylist.includes('Overdue'))
                    {
                        $("#demo").text('Overdue Count For '+ zoneID+' '+ divID+' ('+card_type+') From '+searchDate+' To '+searchDateTo)

                        if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Overdue Priority Count For '+ zoneID+' '+ divID+' ('+card_type+') From '+searchDate+' To '+searchDateTo)
                    }  
                    }  
                    else if(mylist.includes('Priority'))
                    {
                        $("#demo").text('Pending Priority Count For '+ zoneID+' '+ divID+' ('+card_type+') From '+searchDate+' To '+searchDateTo)
                    }
                    else
                    {
                        $("#demo").text('Pending Count For '+ zoneID+' '+ divID+' ('+card_type+') From '+searchDate+' To '+searchDateTo)
                    }
                       
                    }
                    $("#btnmodal").click();
   
   
            }
        });
        }

function expand_all_data_fetch_data(zone){
    $("#anvi").hide()
    $("#check1").hide()
    $("#gurleen").show()
    $("#check").show()
   
   

    let typeID = $('#typeID').val()
    let zoneID = $('#zoneID').val()
    let divID = $('#divID').val()
    let division = $("#division").val()
    var searchDate =  $('#startDate').val()
    var searchDateTo = $('#endDate').val()
    let card_type = $('input[name="optradio"]:checked').val();
    if(typeID == 'IR' || typeID == 'ZR'){
        typeID = 'ZR'
        zoneID = zone
    }
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
   
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
        // alert(mylist)
        // if()
    }
    let requestData = {
        typeId: typeID,  
        zoneId: zoneID,
        divId: divID,
        searchDate : searchDate,
        searchDateTo: searchDateTo,
        searchDepartment : $('#searchDepartment').val(),
        searchDesignation : $('#searchDesignation').val(),
        searchLevel : $('#searchLevel').val(),
        // searchRailway : $('#searchRailway').val(),
        csrfmiddlewaretoken: '{{ csrf_token }}',
        card_type :card_type,
        expandData : 'True',
        mylist:JSON.stringify(mylist),
        INSPITEMTYPE : $("#INSPITEMTYPE").val()
    };
   
    $.ajax({
        method: "POST",  
        url: "{% url 'IconData' %}",
        dataType: 'json',
        data: requestData,
        success: function (response) {
            console.log(response)
            let headdata = ``
            let td = ''
            table1.destroy()
                $("#thead2").empty()
                headdata +=`

                <tr>

                <th style=" text-align: center;" colspan="3"></th>
                <th style=" text-align: center;" colspan="2">Total Count </th>
                <th style=" text-align: center;" colspan="2">Pending Count </th>
                <th style=" text-align: center;" colspan="2">Overdue Count </th>
                <th style=" text-align: center;" colspan="5">Pendency Count</th>
               
                </tr>
                <tr>
                    <th style="text-align: center;">Rly/Org.</th>
                    <th style="text-align: center;">Div./Unit</th>
                    <th style="text-align: center;">Location</th>
                   
                    <th style="text-align: center;">Insp </th>
                    <th style="text-align: center;">Item</th>
                    <th style="text-align: center;">Insp </th>
                    <th style="text-align: center;">Item</th>
                    <th style="text-align: center;">Insp </th>
                    <th style="text-align: center;">Item </th>
                    <th style="text-align: center;">>7 Days</th>
                    <th style="text-align: center;">>30 Days</th>
                    <th style="text-align: center;">>90 Days</th>
                    <th style="text-align: center;">>180 Days</th>
                    <th style="text-align: center;">Action </th>
                    </tr>`
                $("#thead2").append(headdata)
                for (let i = 0; i < response.data.length; i++) {
                    // Construct table row HTML
                    td += `<tr>
                              <td>${response.data[i][0]}</td>
                              <td>${response.data[i][1]}</td>
                              <td>${response.data[i][2]}</td>
                           
                              <td><a href="javascript:void(0)" onclick="fetchdata('t_insp','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][4]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('t_item','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][5]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('p_insp','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][6]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('p_item','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][7]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('o_insp','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][8]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('o_item','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][9]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('days7','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][10]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('days30','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][11]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('days90','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][12]}</a></td>
                              <td><a href="javascript:void(0)" onclick="fetchdata('days180','${response.data[i][1]}/${response.data[i][2]}');">${response.data[i][13]}</a></td>
                       
                              <td><button type="button" onclick="shrink_all_designation();"
                                    style="border-style: none; margin-left: 30%;">
                                    <i class="fas fa-angle-double-up"
                                        style="font-size:24px;color:rgb(105, 174, 238)"
                                        title="Click To Expand/Shrink Details"></i>
                                </button></td>`;
                }

                $("#mydata1").empty();
                $("#mydata1").append(td);

                table1=$('#table_id1').DataTable({
                        "iDisplayLength": 10,
                       
                        // "ordering": false,
                        "lengthChange": true,
                        "lengthMenu": [10,15, 30, 50, 75, 100],
                        dom: 'Blfrtip',
                       
                        buttons: [
                        {
                            extend: 'excel',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                               
                                var e2 = $('#dateto').val()
                                if(typeId == 'All'){
                                    var stre ='Rly/org : List of '+card_type+' related item ('+card_data+') From '+searchDate+' To '+searchDateTo
                                }
                                else{
                                    var stre=typeId+' : List of '+card_type+' related item ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                                }
                                return stre
                            },
                            // orientation: 'landscape',
                            // pageSize: 'LEGAL',
                           
                        },
                        {
                            extend:'pdfHtml5',
                            title: function (e) {
                                var e1 = $('#datefrom').val()
                                var e2 = $('#dateto').val()
                                console.log("datefrom1",e1)
                                console.log("datefrom1",datefrom)
                                var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                                console.log('insode inspection report',stre)
                                return stre
                            },
                            exportOptions: {
                                alignment: 'right',
                                },
                            customize: function ( doc ) {
                                console.log("doc",doc)
                                console.log("doc",doc.defaultStyle)
                                console.log("doc2",doc.styles.tableBodyEven)
                                console.log("doc3",doc.styles.tableBodyOdd)
                                doc.content.splice(0,1);
                               
                                doc.styles.tableBodyEven.alignment = 'center';
                                doc.styles.tableBodyOdd.alignment = 'center';
                            },
                            text :'Pdf',
                            title:"Inspection Report ",
                                        fontSize : 'LEGAL'
                           
                        },
                        {
                            extend: 'print',
                            footer:true,
                            title: function (e) {
                                var s1 = $('#datefrom').val()
                                var s2 = $('#dateto').val()
                                var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                                return str
                            },
                            customize: function ( doc ) {
                                $(doc.document.body).find('table_id1').css('text-align', 'center');
   
                                //  $(doc.document.body).find('table').css('border', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                                //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                                },
                                "pagingType": "simple",
                                "sEmptyTable": 'No data available in table',
   
                                // "bSort": true,
   
                                "oLanguage": {
                                    "sInfoEmpty": "Page 0 of 0 ",
                                },
                                "language": {
                                    "info": "Page _PAGE_ of _PAGES_",
                                    "paginate": {
                                        "previous": "Prev",
                                    },
                                },
                        },
                        ],
                    });
           

                document.getElementById('div-all-desig').classList.toggle('zonetable-show-hide');
                document.querySelector('#div-all-desig-details').classList.toggle('zonetable-show-hide');
        }
    });

}


function shrink_all_designation() {
        document.getElementById('div-all-desig').classList.toggle('zonetable-show-hide');
        document.querySelector('#div-all-desig-details').classList.toggle('zonetable-show-hide');
    }
   
        // TO FIND THE DIVISIONS
$('#zone').change(function() {
  var rly=$('#zone').val();
 
  data={
    'rly_data':JSON.stringify([rly]),
   
  }
 
  $.ajax({
  type : 'GET',
  url : "{% url 'getdiv_rly' %}",
  dataType : 'json',
  data : data,
 
  success : function(response){
             division=response.division;
                         $('#division').empty();
                         $('#division').append(`<option value="All" >All</option>`);
                         for (let i = 0; i < division.length; i++) {
                           $('#division').append(`<option value="${division[i].location_code}-${division[i].location_type}"> ${division[i].location_code}-${division[i].location_type}</option>`);
                                     }
           }
     })
     })
 
$('#zone1').change(function() {
  var rly=$('#zone1').val();
 
  data={
    'rly_data':JSON.stringify([rly]),
   
  }
 
  $.ajax({
  type : 'GET',
  url : "{% url 'getdiv_rly' %}",
  dataType : 'json',
  data : data,
 
  success : function(response){
             division=response.division;
                         $('#division1').empty();
                         $('#division1').append(`<option value="All" >All</option>`);
                         for (let i = 0; i < division.length; i++) {
                           $('#division1').append(`<option value="${division[i].location_code}-${division[i].location_type}"> ${division[i].location_code}-${division[i].location_type}</option>`);
                                     }
           }
     })
     })
 
 
function generateExcel(card_type, card_data) {
    let typeId= $('#typeID').val()  
    let zoneId= $('#zoneID').val()
    let divId= $('#divID').val()
    let searchDate = $('#startDate').val()
    let searchDateTo=$('#endDate').val()
    let searchDepartment = $('#searchDepartment').val()
    let searchDesignation = $('#searchDesignation').val()
    let searchLevel = $('#searchLevel').val()
    // value of check box
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
   
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
   
    }

    if (['t_insp', 't_item', 'p_insp', 'p_item','o_insp', 'o_item', 'ps', 'es', 'oth', 'ni', 'si', 'di','days7','days30','days90','days180'].includes(card_type)) {
       
        typeId = 'ZR'
        if (card_data.includes('/')) {
           
            var values = card_data.split('/');
            zoneId = values[0];
            location_val = values[1];
            console.log(zoneId)
            console.log(location_val)
            card_data = $('input[name="optradio"]:checked').val()
        }
        else
        {
           
            zoneId=card_data;
            location_val= 'NULL'
            console.log(zoneId)
            console.log(location_val)
            card_data = $('input[name="optradio"]:checked').val()
        }
    }
    else
    {
        location_val= 'NULL'
    }
    if($("#div-all-desig-details").css('display') == 'block'){
        shrink_all_designation();
    }

    // alert($("#INSPITEMTYPE").val())
    let data =  $.param({
                    typ: 'allDetails',
                    typeId: typeId,  
                    zoneId: zoneId,
                    location_val: location_val,
                    divId: divId,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : $('#searchDepartment').val(),
                    searchDesignation : $('#searchDesignation').val(),
                    searchLevel : $('#searchLevel').val(),
                    card_type : card_type,
                    card_data : card_data,
                    mylist:JSON.stringify(mylist),
                    INSPITEMTYPE : $("#INSPITEMTYPE").val()
                    // csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "TableViewPendencyDashboard_excel" %}?' + data;

                // Redirect to the final URL
                window.location.href = finalURL;
            }

function My_Card_data_excel(card_type) {
    // alert('anviahlawat');
    $("#anvi").show()
    $("#check1").show()
    $("#gurleen").hide()
    $("#check").hide()
    $("#g_rly").hide()
    $("#g_div").hide()
    $("#a_rly").show()
    $("#a_div").show()

     //  select the default radion and select button
     if ($("#modal").css('display') == 'none'){
        $('#radio5').prop('checked','checked')
        $('#vehicle1').prop('checked',true)
        $('#vehicle2').prop('checked',false)
        $('#vehicle3').prop('checked',false)
        $('#division').val("All")
        $('#zone').val("All")
    }

    if($("#div-all-desig-details").css('display') == 'block'){
        shrink_all_designation();
    }


    let typeID = $('#typeID').val()
    let zoneID = $('#zoneID').val()
    let divID = $('#divID').val()
    let division = $("#division").val()
    let zone = $("#zone").val()
    var searchDate =  $('#startDate').val()
    var searchDateTo = $('#endDate').val()
    let mydata = ['Pending','Overdue','Priority']
    if(mydata.includes(card_type) ){
        // alert("ppp "+card_type)
        card_type = $('input[name="optradio"]:checked').val();

    }
    // value of check box
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
   
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
        // alert(mylist)
        // if()
    }
    console.log("checkbox",mylist)
    // condition to check the division
    // $("#zone").trigger("change");
    if(division != 'All'){
        let sp = division.split('-')
        console.log('sp',sp)
        typeID = sp[1]
        divID = sp[0]
        card_type = $('input[name="optradio"]:checked').val();
    }
    else if (zone != 'All' && (!['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
        typeID = 'ZR'
        zoneID = zone
        card_type = $('input[name="optradio"]:checked').val();
    }
    else if (zone != 'All' && (['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
        typeID = 'PU'
        zoneID = zone
        card_type = $('input[name="optradio"]:checked').val();
    }
    // alert("zoneididid   "+zoneID)
    if(divID != ''){
        $('#division').val(divID+'-'+typeID)
    }
    else if(zoneID != ''){
        $('#zone').val(zoneID)  
        // $("#zone").trigger("change", {'rly_data':zoneID});
    }
    else{
        $('#zone').val('All')
    }
   
    // alert(typeID+divID)
    let requestData = $.param({
        typeId: typeID,  
        zoneId: zoneID,
        divId: divID,
        searchDate : searchDate,
        searchDateTo: searchDateTo,
        searchDepartment : $('#searchDepartment').val(),
        searchDesignation : $('#searchDesignation').val(),
        searchLevel : $('#searchLevel').val(),
        // searchRailway : $('#searchRailway').val(),
        csrfmiddlewaretoken: '{{ csrf_token }}',
        card_type :card_type,
        mylist:JSON.stringify(mylist),
    });
    let finalURL = '{% url "TableIcon_excel" %}?' + requestData;

    // Redirect to the final URL
    window.location.href = finalURL;
}            
       
function fetchdata2_excel(card_type)
        {
            // alert('a12345')
            let inspect_type = ['Passenger Safety','Employee Safety','Other Items','Night Inspection','Surprise Inspection','Drive Inspection']
            if( inspect_type.includes(card_type)){
                $("#INSPITEMTYPE").val(card_type)
            }

            $("#anvi").hide()
            $("#check1").hide()
            $("#gurleen").show()
            $("#check").show()
            $("#a_rly").hide()
            $("#a_div").hide()
            $("#g_rly").show()
            $("#g_div").show()

            //  select the default radion and select button
            if ($("#modal").css('display') == 'none'){
                // alert('kjsdf')
                $('#radio6').prop('checked','checked')
                $('#Pending').prop('checked',true)
                $('#Overdue').prop('checked',false)
                $('#Priority').prop('checked',false)
                $('#division1').val('All')
                $('#zone1').val('All')
            }

            var selectedDivision = $('.division-item.active').data('value');
            let typeID = $('#typeID').val()
            let zoneID = $('#zoneID').val()
            let divID = $('#divID').val()
            let division = $("#division1").val()
            let searchDate = $('#startDate').val()
            let searchDateTo = $('#endDate').val()
            let zone = $('#zone1').val()

            if($("#div-all-desig-details").css('display') == 'block'){
                shrink_all_designation();
            }
            // condition to check the division
            // if(division != 'All'){
            //     let sp = division.split('-')
            //     console.log('sp',sp)
            //     typeID = sp[1]
            //     divID = sp[0]
            // }
            // condition to check the division
            if(division != 'All'){
                let sp = division.split('-')
                console.log('sp',sp)
                typeID = sp[1]
                divID = sp[0]
                card_type = $('input[name="optradio"]:checked').val();
            }
            else if (zone != 'All' && (!['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
                typeID = 'ZR'
                zoneID = zone
                card_type = $('input[name="optradio"]:checked').val();
            }
            else if (zone != 'All' && (['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
                typeID = 'PU'
                zoneID = zone
                card_type = $('input[name="optradio"]:checked').val();
            }

            if(divID != ''){
                $('#division1').val(divID+'-'+typeID)

            }
            else if(zoneID != ''){
                $('#zone1').val(zoneID)
            }
            else{
                $('#zone1').val('All')
            }
            let mydata = ['Pending','Overdue','Priority']
            if(mydata.includes(card_type) ){
                // alert("ppp "+card_type)
                card_type = $('input[name="optradio"]:checked').val();

            }
            // value of check box
            mylist = []
            let checkbox = document.querySelectorAll('input[type=checkbox]:checked')

            for(let i = 0;i < checkbox.length;i++){
                mylist.push(checkbox[i].value)
                // alert(mylist)
                // if()
            }
            // alert(typeID+divID)

            // if (document.getElementById("Overdue").checked) {
            // alert('Checkbox is checked, proceed with fetchdata2')
            // var card=card_type
            // }
            // else{
            //     alert('Unchecked');
            // }
           
            let requestData = $.param({
            typeId: typeID,    
            zoneId: zoneID,  
            divId: divID,
            searchDate : searchDate,
            searchDateTo : searchDateTo,
            searchDepartment : $('#searchDepartment').val(),
            searchDesignation : $('#searchDesignation').val(),
            searchLevel : $('#searchLevel').val(),
            selectedDivision: $('.division-item.active').data('value'),
            card_type : card_type,
            INSPITEMTYPE : $("#INSPITEMTYPE").val(),
            csrfmiddlewaretoken: '{{ csrf_token }}',
            mylist:JSON.stringify(mylist),
        });
        let finalURL = '{% url "IconData_excel" %}?' + requestData;

        // Redirect to the final URL
        window.location.href = finalURL;
        }


        
function generatePdf(card_type, card_data) {
    let typeId= $('#typeID').val()  
    let zoneId= $('#zoneID').val()
    let divId= $('#divID').val()
    let searchDate = $('#startDate').val()
    let searchDateTo=$('#endDate').val()
    let searchDepartment = $('#searchDepartment').val()
    let searchDesignation = $('#searchDesignation').val()
    let searchLevel = $('#searchLevel').val()
    // value of check box
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
   
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
   
    }

    if (['t_insp', 't_item', 'p_insp', 'p_item','o_insp', 'o_item', 'ps', 'es', 'oth', 'ni', 'si', 'di','days7','days30','days90','days180'].includes(card_type)) {
        
        typeId = 'ZR'
        if (card_data.includes('/')) {
            
            var values = card_data.split('/');
            zoneId = values[0];
            location_val = values[1];
            console.log(zoneId)
            console.log(location_val)
            card_data = $('input[name="optradio"]:checked').val()
        }
        else
        {
            
            zoneId=card_data;
            location_val= 'NULL'
            console.log(zoneId)
            console.log(location_val)
            card_data = $('input[name="optradio"]:checked').val()
        }
    }
    else
    {
        location_val= 'NULL'
    }
    if($("#div-all-desig-details").css('display') == 'block'){
        shrink_all_designation();
    }

    // alert($("#INSPITEMTYPE").val())
    let data =  $.param({
                    typ: 'allDetails',
                    typeId: typeId,  
                    zoneId: zoneId,
                    location_val: location_val,
                    divId: divId,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : $('#searchDepartment').val(),
                    searchDesignation : $('#searchDesignation').val(),
                    searchLevel : $('#searchLevel').val(),
                    card_type : card_type,
                    card_data : card_data,
                    mylist:JSON.stringify(mylist),
                    INSPITEMTYPE : $("#INSPITEMTYPE").val()
                    // csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "TableViewPendencyDashboard_pdf" %}?' + data;

                // Redirect to the final URL
                window.location.href = finalURL;
            }



function My_Card_data_pdf(card_type) {
    // alert('anviahlawat');
    $("#anvi").show()
    $("#check1").show()
    $("#gurleen").hide()
    $("#check").hide()
    $("#g_rly").hide()
    $("#g_div").hide()
    $("#a_rly").show()
    $("#a_div").show()

     //  select the default radion and select button 
     if ($("#modal").css('display') == 'none'){
        $('#radio5').prop('checked','checked')
        $('#vehicle1').prop('checked',true)
        $('#vehicle2').prop('checked',false)
        $('#vehicle3').prop('checked',false)
        $('#division').val("All")
        $('#zone').val("All")
    }

    if($("#div-all-desig-details").css('display') == 'block'){
        shrink_all_designation();
    }


    let typeID = $('#typeID').val()
    let zoneID = $('#zoneID').val()
    let divID = $('#divID').val()
    let division = $("#division").val()
    let zone = $("#zone").val()
    var searchDate =  $('#startDate').val()
    var searchDateTo = $('#endDate').val()
    let mydata = ['Pending','Overdue','Priority']
    if(mydata.includes(card_type) ){
        // alert("ppp "+card_type)
        card_type = $('input[name="optradio"]:checked').val();

    }
    // value of check box
    mylist = []
    let checkbox = document.querySelectorAll('input[type=checkbox]:checked')
    
    for(let i = 0;i < checkbox.length;i++){
        mylist.push(checkbox[i].value)
        // alert(mylist)
        // if()
    }
    console.log("checkbox",mylist)
    // condition to check the division
    // $("#zone").trigger("change");
    if(division != 'All'){
        let sp = division.split('-')
        console.log('sp',sp)
        typeID = sp[1]
        divID = sp[0]
        card_type = $('input[name="optradio"]:checked').val();
    }
    else if (zone != 'All' && (!['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
        typeID = 'ZR'
        zoneID = zone
        card_type = $('input[name="optradio"]:checked').val();
    }
    else if (zone != 'All' && (['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
        typeID = 'PU'
        zoneID = zone
        card_type = $('input[name="optradio"]:checked').val();
    }
    // alert("zoneididid   "+zoneID)
    if(divID != ''){
        $('#division').val(divID+'-'+typeID)
    }
    else if(zoneID != ''){
        $('#zone').val(zoneID)  
        // $("#zone").trigger("change", {'rly_data':zoneID});
    }
    else{
        $('#zone').val('All')
    }
   
    // alert(typeID+divID)
    let requestData = $.param({
        typeId: typeID,  
        zoneId: zoneID,
        divId: divID,
        searchDate : searchDate,
        searchDateTo: searchDateTo,
        searchDepartment : $('#searchDepartment').val(),
        searchDesignation : $('#searchDesignation').val(),
        searchLevel : $('#searchLevel').val(),
        // searchRailway : $('#searchRailway').val(),
        csrfmiddlewaretoken: '{{ csrf_token }}',
        card_type :card_type,
        mylist:JSON.stringify(mylist),
    });
    let finalURL = '{% url "TableIcon_pdf" %}?' + requestData;

    // Redirect to the final URL
    window.location.href = finalURL;
}            
       

function fetchdata2_pdf(card_type)
        {
            // alert('a12345')
            let inspect_type = ['Passenger Safety','Employee Safety','Other Items','Night Inspection','Surprise Inspection','Drive Inspection']
            if( inspect_type.includes(card_type)){
                $("#INSPITEMTYPE").val(card_type)
            }

            $("#anvi").hide()
            $("#check1").hide()
            $("#gurleen").show()
            $("#check").show()
            $("#a_rly").hide()
            $("#a_div").hide()
            $("#g_rly").show()
            $("#g_div").show()

            //  select the default radion and select button 
            if ($("#modal").css('display') == 'none'){
                // alert('kjsdf')
                $('#radio6').prop('checked','checked')
                $('#Pending').prop('checked',true)
                $('#Overdue').prop('checked',false)
                $('#Priority').prop('checked',false)
                $('#division1').val('All')
                $('#zone1').val('All')
            }

            var selectedDivision = $('.division-item.active').data('value');
            let typeID = $('#typeID').val()
            let zoneID = $('#zoneID').val()
            let divID = $('#divID').val()
            let division = $("#division1").val()
            let searchDate = $('#startDate').val()
            let searchDateTo = $('#endDate').val()
            let zone = $('#zone1').val()

            if($("#div-all-desig-details").css('display') == 'block'){
                shrink_all_designation();
            }
            // condition to check the division
            // if(division != 'All'){
            //     let sp = division.split('-')
            //     console.log('sp',sp)
            //     typeID = sp[1]
            //     divID = sp[0]
            // }
            // condition to check the division
            if(division != 'All'){
                let sp = division.split('-')
                console.log('sp',sp)
                typeID = sp[1]
                divID = sp[0]
                card_type = $('input[name="optradio"]:checked').val();
            }
            else if (zone != 'All' && (!['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
                typeID = 'ZR'
                zoneID = zone
                card_type = $('input[name="optradio"]:checked').val();
            }
            else if (zone != 'All' && (['BLW','CLW','ICF','RCF','MCF','PLW','RWF','RWP'].includes(zone)) ){
                typeID = 'PU'
                zoneID = zone
                card_type = $('input[name="optradio"]:checked').val();
            }

            if(divID != ''){
                $('#division1').val(divID+'-'+typeID)

            }
            else if(zoneID != ''){
                $('#zone1').val(zoneID)
            }
            else{
                $('#zone1').val('All')
            }
            let mydata = ['Pending','Overdue','Priority']
            if(mydata.includes(card_type) ){
                // alert("ppp "+card_type)
                card_type = $('input[name="optradio"]:checked').val();

            }
            // value of check box
            mylist = []
            let checkbox = document.querySelectorAll('input[type=checkbox]:checked')

            for(let i = 0;i < checkbox.length;i++){
                mylist.push(checkbox[i].value)
                // alert(mylist)
                // if()
            }
            // alert(typeID+divID)

            // if (document.getElementById("Overdue").checked) {
            // alert('Checkbox is checked, proceed with fetchdata2')
            // var card=card_type
            // }
            // else{
            //     alert('Unchecked');
            // }
            
            let requestData = $.param({
            typeId: typeID,    
            zoneId: zoneID,  
            divId: divID,
            searchDate : searchDate,
            searchDateTo : searchDateTo,
            searchDepartment : $('#searchDepartment').val(),
            searchDesignation : $('#searchDesignation').val(),
            searchLevel : $('#searchLevel').val(),
            selectedDivision: $('.division-item.active').data('value'),
            card_type : card_type,
            INSPITEMTYPE : $("#INSPITEMTYPE").val(),
            csrfmiddlewaretoken: '{{ csrf_token }}',
            mylist:JSON.stringify(mylist),
        });
        let finalURL = '{% url "IconData_pdf" %}?' + requestData;

        // Redirect to the final URL
        window.location.href = finalURL;
        }




    </script>
{% endblock %}