{% extends 'base.html' %}
{% block content %}
{% load static %}
{% load convertoInt %}

<head>
    <link rel="stylesheet" type="text/css" media="screen" href="{% static '/css/forms_common.css' %}">
  		
   
    <style>
        .slash {
        font-size: 0.9em;
        }
        .backgroundImage {
           
            background-image:url('{% static "images/flag.jpg" %}');
            background-repeat: no-repeat;
            background-size: 100% 100%;
        }
        #mapZone{
            /* changes made by Ayushika */
            /* height: 75%; */
            height: 100%;
        }
       
        svg {

            transform: scale(1.2);
        }

        .box {
            border-style: solid;
            border-color: darkred;
            border-radius: 10px;
            border-width: 8px;
            background-color: beige;
            color: #fff;
        }

    </style>
    <style>
        .row
        {
            margin-top:10px;
        }
        .mainDiv{
            margin-top: -1%;
            /* background-color: aqua; */
            height: 100%;
            padding-top: 0%;
            margin-left: 0.5%;
        }
        .headingRow{
            /* background-image: radial-gradient(circle farthest-side, #fceabb, #f8b500); */
            background-color: #63a4ff;
background-image: linear-gradient(315deg, #63a4ff 0%, #83eaf1 74%);
            margin-left: 0%;
            margin-top: 0%;
            padding-left: 0%;
            padding-right: 0%;
            /* height: 80px;; */
        }
        .Rcard{
            width:100%;            
            /* background-color: #fff; */
            background-color: #e6f3ff;
            color: #0a0a0a;
            border:1px solid #aeaeae;
            box-shadow: 0 1px 2px 0 rgba(0,0,0,0.2);
            padding:5px;
            /* border: 2px solid #17a2b8; */
        }
        .totalItems{
            width:33%;
            background-color: #28a7455c;
            /* border: 2px solid #28a745; */
            color: #000000;
        }
        .pendingItems{
            width:34%;
            background-color: #ffc10754;
            /* border: 2px solid #ffc107; */
            color: #000000;
        }
        .overdueItems{
            width:33%;
            background-color: #dc354570;
            /* border: 2px solid #dc3545; */
            color: #000000;
        }
        .cardsHeaders{
            background-color: #e7eff9;
            background-image: linear-gradient(315deg, #e7eff9 0%, #cfd6e6 74%);
        }
       
    .card-body{
        padding: 0%;
    }
    table{
        width: 100%;
        text-align: center;
    }
    .summary-card{
        height:100%;
        /* overflow: hidden; */
        /* overflow-y:scroll;
        overflow: hidden; */
       
    }
    .summary-card table td, .summary-card table th{
       padding:0px;
       width:25%;        
    }
    .summary-card .card-body{
        /* background:#eee6ff; */
         /* overflow: hidden; changes made by ayushika */
    }
    .summary-card
    .list-group-item{
        padding-top: 0%;
        /* border: 2px solid #ffb27a; */
        border-radius: 7px;
        background-color: #ffe9d9
    }
    /* .col-md-4{
        padding: 0%;
    }
    .col-md-6{
        padding: 0%;
    }
    .col-12{
        padding: 0%;
    } */
   
    </style>
    <style>
        .cards2 {
           
          /* padding: 1px !important; */
          text-align: center;
          background-color: blanchedalmond;
          margin-left: -20%;

      }

      .cards3 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: rgb(188, 253, 188);
          margin-left: 4%;
      }

      .cards4 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: rgb(204, 235, 251);
          margin-left: 4%;

      }

      .cards5 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: rgb(251, 245, 192);
          margin-left: 4%;
      }

      .cards6 {
         
          /* padding: 1px !important; */
          text-align: center;
          background-color: blanchedalmond;
          margin-left: 4%;
      }
      .PendTable td{
        padding: 0.5%;
      }
      .PendTable th{
        padding: 0.5%;
      }
      .PendTable thead{
        /* chnages made by ayushika */
        /* background: #b32400; */
        background: #eee6ff;
        color:#000000;
        font-weight:500;
        /* text-transform:uppercase; */
      }
     .entity{
        text-align: left;
        font-weight: 600;
        /* background-color: #f7b4ac; */
     }
     .alertscard{
        /* border: 2px solid #ffb27a; */
        border-radius: 7px;
        background-color: #ffe9d9
     }
     .card-caption
     {
        font-size:0.9rem;
        color:#4d4d4d;
        font-weight:600
     }
     .stats-val
     {
        font-size:0.9rem;
        color:#0059b3;
        font-weight:500
     }
     .stats-val2
     {
        font-size:0.9rem;
        color:#2b2b2b;
        font-weight:500
     }
     .stats-head
     {
        font-weight:600;
        text-transform:uppercase;
        color:#000;
        font-size:0.9rem;
        text-align:left;
     }
     /* .overalStatsTable th
     {
        color:#595959;
        font-size:0.9rem;
        font-weight:500;
     }*/
     .overalStatsTable td
     {
        color:#000;
        font-size:1.1rem;
        font-weight:600;
     }
     .overalStatsTable td a
     {
        font-weight:600;
        color:#0059b3;
        text-decoration:none;
        cursor:pointer;
     }
     .overalStatsTable td a:hover
     {
        color:#ff6600;
     }
     .pendency-head
     {
        margin-bottom:0px;
        font-weight:600;
        width:100%;
        text-align: left;
        font-size:1rem;
        position: relative;
    padding-bottom: 3px;
    padding-left:1rem;
    color:#b32400;
     }
.custom-table
{
    margin-top:4px;
}
.custom-table th.days
{
   color:#4d4d4d;
   font-size:1rem;
   font-weight:500;
   text-align:center;
   /* padding-left:1rem; */
}
.custom-table td.count
{
   color:#000;
   font-size:1.1rem;
   font-weight:600;
   padding:0%;
}
.lbl-caption
{
    font-weight:600;
    color:#000;
    font-size:14px;
}
.form-group {
  margin-bottom: 10px !important;
}
    </style>
    <style>
        .badge{
    font-size: 100%;
}
.overalStatsTable th
     {
        background-color: #cce6ff ;
        color:#595959;
        font-size:0.9rem;
        font-weight:500;
     }
      .overalStatsTable th:nth-child(2) {
        background-color: #ffffb3 ;
    }

    .overalStatsTable th:nth-child(3) {
        background-color: #ffcccc;
    }
    /* changes made  */
    .overalStatsTable th:nth-child(4) {
        background-color: #DFCCFB;
    }
    </style>
    <style>
        .alert-card{
        height:165px;
        overflow-y:scroll;
        overflow: hidden;
       
    }
    .alert-card table td, .alert-card table th{
       padding:2px;
       width:33%;        
    }
    .alert-card .card-body{
        background:#eee6ff;
    }
    .alert-card
    .list-group-item{
        padding-top: 0%;
        border-radius: 7px;
        background-color: #d9ffda
    }
    </style>
    <style>
        /* The Modal */
        .modal {
             display: none;
             /* position: fixed;
             width: 100%;
             height: 100%;  */
             background-color: rgba(0, 0, 0, 0.5); /* Black with opacity */
            }
           
           /* #modaldismis{
            float: right;
            margin-top :-80px;
            font-size: large;
            padding-inline: 10px;
            margin-top: 10px;
        } */
/* Modal Content */
.modal-content {
    background-color: #F5F5F4;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-height: 80%;
    background-color: #F5F5F4;
}


#table_id1 thead {
    position: sticky;
    top: 0;
    background-color: #2b7bea;
    white-space: nowrap;
    font-size: 1.2rem;
    color: white;
    z-index: 1;
}
#table_id_data thead {
    position: sticky;
    top: 0;
    background-color: #2b7bea;
    white-space: nowrap;
    font-size: 1.2rem;
    color: white;
    z-index: 1;
}

#table_id_data2 thead {
    position: sticky;
    top: 0;
    background-color: #2b7bea;
    white-space: nowrap;
    font-size: 1.2rem;
    color: white;
    z-index: 1;
}
#table_id_data3 thead {
    position: sticky;
    top: 0;
    background-color: #2b7bea;
    white-space: nowrap;
    font-size: 1.2rem;
    color: white;
    z-index: 1;
}

#table_id_data1 thead {
    position: sticky;
    top: 0;
    background-color: #2b7bea;
    white-space: nowrap;
    font-size: 1.2rem;
    color: white;
    z-index: 1;
}

/* Table within Modal */
#table-container {
    max-height: 100%;
    
     overflow: auto;  
   
}

/* Close Button */
.closebtn {

    
    cursor: pointer;
    font-size: large;
   
}
  .custom-excel-button{
    background-color: green;
  }

 
/* Style for the container around the radio buttons */
#anvi {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px; /* Add some padding for spacing */
    margin-bottom: -2.5%;
}
#gurleen {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 10px; /* Add some padding for spacing */
    margin-bottom: -2.5%;
}

/* Style for individual radio button boxes */
.radio-box {
    border: 1px solid #ccc; /* Add a border around each radio button box */
    padding: 5px; /* Add padding to create space within each box */
    margin-right: 10px; /* Add margin between radio button boxes */
    border-radius: 10%;
    /* background: linear-gradient(110.1deg, rgb(241, 115, 30) 18.9%, rgb(235, 41, 64) 90.7%); */
    /* background: radial-gradient(circle at 10% 20%, rgb(186, 190, 245) 0%, rgb(192, 192, 245) 33.1%, rgb(218, 203, 246) 90%); */
    background-color: #EBDEF0;  
   
}
.check-box
{
    border: 1px solid #ccc; /* Add a border around each radio button box */
    padding: 5px; /* Add padding to create space within each box */
    margin-right: 10px; /* Add margin between radio button boxes */
    border-radius: 10%;
    /* background: linear-gradient(110.1deg, rgb(241, 115, 30) 18.9%, rgb(235, 41, 64) 90.7%); */
    /* background: radial-gradient(circle at 10% 20%, rgb(186, 190, 245) 0%, rgb(192, 192, 245) 33.1%, rgb(218, 203, 246) 90%); */
    background-color: #EBDEF0;  
   
   
}
 #check {
   
    align-items: center;
    margin-top: 2.5%;
   
   
   
}
#check1{
    align-items: center;
    margin-top: 2.5%;
}

/* Style for the radio buttons */
.custom-label {
    margin: 0; /* Reset margin for radio labels */
}

/* Style for the select elements */
.form-control {
    max-width: 100%;
}

/* Style for the heading */
.heading {
    font-size: 20px;
}

/* Style for the Close button */
/* #modaldismis { */
   /* Add margin to separate from the heading */
/* } */

.heading-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-left: 42%;
  }

  .heading {
    font-size: 23px;
   
   
  }

  .close-button {
    margin-left: auto;
  }





</style>

<style>
    #thead1 th {
    background-color:#966FD6;  
    color:whitesmoke;
}
#thead12 th {
    background-color:#966FD6;  
    color:whitesmoke;
}
#thead3 th {
    background-color:#966FD6;  
    color:whitesmoke;
}
#thead11 th {
    background-color:#966FD6;  
    color:whitesmoke;
}
#thead2 th {
    background-color:#966FD6;  
    color:whitesmoke;
}

/* Change table border and cell separation to yellow */
#table_id_data {
    border: 3px solid #966FD6;
    border-collapse: separate;
    
    width: 100%;
    overflow-y: auto; /* Enable scrolling within the table */
    overflow-x: auto;
    max-height: calc(100% - 20px); /* Subtract padding from modal content */
    margin-top: 10px;
}
#table_id_data2 {
    border: 3px solid #966FD6;
    border-collapse: separate;
    
    width: 100%;
    overflow-y: auto; /* Enable scrolling within the table */
    overflow-x: auto;
    max-height: calc(100% - 20px); /* Subtract padding from modal content */
    margin-top: 10px;
}
#table_id_data3 {
    border: 3px solid #966FD6;
    border-collapse: separate;
    
    width: 100%;
    overflow-y: auto; /* Enable scrolling within the table */
    overflow-x: auto;
    max-height: calc(100% - 20px); /* Subtract padding from modal content */
    margin-top: 10px;
}
#table_id_data1 {
    border: 3px solid #966FD6;
    border-collapse: separate;
    
    width: 100%;
    overflow-y: auto; /* Enable scrolling within the table */
    overflow-x: auto;
    max-height: calc(100% - 20px); /* Subtract padding from modal content */
    margin-top: 10px;
}
#table_id1 {
    border: 3px solid #966FD6;
    border-collapse: separate;
    /*border-spacing: 5px;  Adjust the value as needed */
    width: 100%;
    overflow-y: auto; /* Enable scrolling within the table */
    overflow-x: auto;
    max-height: calc(100% - 20px); /* Subtract padding from modal content */
    margin-top: 10px;
}

#table_id_data tr:nth-child(even) {
    background-color: #EBDEF0; /* Even rows are white   # #*/
}
#table_id_data2 tr:nth-child(even) {
    background-color: #EBDEF0; /* Even rows are white   # #*/
}
#table_id_data3 tr:nth-child(even) {
    background-color: #EBDEF0; /* Even rows are white   # #*/
}
#table_id_data1 tr:nth-child(even) {
    background-color: #EBDEF0; /* Even rows are white   # #*/
}
#table_id1 tr:nth-child(even) {
    background-color: #EBDEF0; /* Even rows are white   # #*/
}

#table_id_data tr:nth-child(odd) {
    background-color: white; /* Odd rows are orange  #facf7e*/
}
#table_id_data2 tr:nth-child(odd) {
    background-color: white; /* Odd rows are orange  #facf7e*/
}
#table_id_data3 tr:nth-child(odd) {
    background-color: white; /* Odd rows are orange  #facf7e*/
}
#table_id_data1 tr:nth-child(odd) {
    background-color: white; /* Odd rows are orange  #facf7e*/
}
#table_id1 tr:nth-child(odd) {
    background-color: white; /* Odd rows are orange  #facf7e*/
}

div.dt-buttons button.dt-button.buttons-excel {
    background-color: green;
    color: white;
    border-radius: 10%;
}

/* PDF button color */
div.dt-buttons button.dt-button.buttons-pdf {
    background-color: red;
    color: white;
    border-radius: 5%;
}

/* Print button color */
div.dt-buttons button.dt-button.buttons-print {
    background-color: rgb(93, 93, 254);
    color: white;
    border-radius: 5%;
}



.zonetable-show-hide {
            display: none;
        }

</style>
<style>
    /* changes made by ayushika for pending item table */

   

    /* Set equal width for each table column */
    .summary-card .table th,
    .summary-card .table td {
        width: calc(100% / 7); /* Distributing equally among 6 columns */
        text-align: center; /* Center-align content in columns */
    }
    .summary-card .button {
        cursor: pointer;
        position: relative;
        font-size: 0.9rem;
    }
    .summary-card .button:hover {
        color: red;
    }
    .active {
        font-weight: bold;
    }
   
</style>
<style>
    .border-left {
    border-left: 1px solid  #d0e1e1!important;
}
    .border-bottom{
     border-bottom: 2px solid  #d0e1e1 !important;
    }
   
   .cardt{
       background-color:  #fadccd;
   
   }
   .cardp{
    background-color:   #ffe6ff;
   }
   .cardp1{
    background-color:  #ecffe6;
   }
   .cardo{
    background-color:  #ffffd6;
   }
   .sumtable th, td{
    padding:0.5%;
   }
 .sumtable{
    margin-bottom: 0rem;
   }
   .long-and-truncated-with-child{
    overflow: hidden;
    max-width: 100%;
    text-overflow: ellipsis;
    width: fit-content;
    white-space: nowrap;
   }
   table td {
    max-width: 400px; /* Adjust this value as needed */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

   
</style>

<!-- auto update  toggle button -->
<style>
    .switch {
     position: relative;
     display: inline-block;
     width: 140px;
     height: 34px;
   }
   
   .switch input {display:none;}
   
   .slider {
     position: absolute;
     cursor: pointer;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     background-color: #eb9e11;
     -webkit-transition: .4s;
     transition: .4s;
      border-radius: 34px;
   }
   
   .slider:before {
     position: absolute;
     content: "";
     height: 26px;
     width: 26px;
     left: 4px;
     bottom: 4px;
     background-color: white;
     -webkit-transition: .4s;
     transition: .4s;
     border-radius: 50%;
   }
   
   input:checked + .slider {
     background-color: #4c33bb;
   }
   
   input:focus + .slider {
     box-shadow: 0 0 1px #2196F3;
   }
   
   input:checked + .slider:before {
     -webkit-transform: translateX(26px);
     -ms-transform: translateX(26px);
     transform: translateX(105px);
   }
   
   /*------ ADDED CSS ---------*/
   .slider:after
   {
    content:'Marked To';
    color: white;
    display: block;
    position: absolute;
    transform: translate(-50%,-50%);
    top: 50%;
    left: 50%;
    font-size: 12px;
    font-family: Verdana, sans-serif;
   }
   
   input:checked + .slider:after
   {  
     content:'Issued By';
   }
   
   
  
   /*--------- END --------*/
   </style>
   
   <style>
 .btn123
{
  
 margin-left: 1px;
 margin-right: 1px;
 padding-left: 5px;
 padding-right: 5px;
  width: 60px;
  height: 20px;
  background-color:#FEDEFF;
  color: black;
  font-size: 16px;
  border-radius: 2px;
  outline: none;

  cursor: pointer;
  transition: .3s linear;
}

.selected {
    background-color: #CEEDC7;
    color: black;
            transform: rotateX(15deg);
            box-shadow: 0 15px 15px #c4ebbb;
        }




/* .select2-results__option[aria-selected=true] { 
  background-color: #e76419 !important;
  color:#000 !important;
 }
        .select2-selection--multiple:before {
    content: "";
    position: absolute;
    right: 7px;
    top: 42%;
    border-top: 5px solid #888;
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
} */

html,
body {
  height: 100%;
}
   </style>




<!-- new -->

<style>


.multi_select_box select{
 width: 100%;
}
.multi_select_box button{
 background-color: white!important;
 color: black !important;
}
.home-section .home-content .text{
   font-size: 15px;
   font-weight: 400;
 }
 .bootstrap-select.form-control-sm .dropdown-toggle {
   height: 2.8em;
 }
.select2-search__field:placeholder-shown {
   width: 100% !important; /*makes the placeholder to be 100% of the width while there are no options selected*/
}

</style>


</head>
<body>  

    <input type="hidden" id="typeID" value="IR">
    <input type="hidden" id="zoneID" value="">
    <input type="hidden" id="divID" value="">
    <input type="hidden" id="INSPITEMTYPE" value="">
    <div id="main">
    <div class="container-fluid mainDiv">
       
        <div class="row headingRow">
            <div class="col-sm-12 col-md-12 col-lg-3 d-flex align-items-center">
                <table style="width:100%">
                    <tr>
                        <td rowspan="2">
                            <img src="../static/images/irlogo.png" alt="IR" width="60" height="60">
                        </td>
                        <td>
                        
                            <h3 class="font-weight-bold text-black text-center;" style="font-size: 1.5rem; font-weight: 600; margin-top: 5px;">INSPECTION OVERVIEW</h3>
                        </td>
                </tr>
                <tr>
                    <td>
                    
                        <label class="switch" style="z-index:50;" title="Click to toggle between Marked/Inspecting officer">
                          <input type="checkbox" onclick="getOnOffStatus()" id='onOffIdForAutoUpdate' >
                          <span class="slider round"></span>
                        </label>
                    </td>
                </tr>
                
                </table>
                    
              
                
            </div>
            <!-- <div class="col-sm-12 col-md-12 col-lg-4"><h3 class="font-weight-bold text-black float-justify text-center" style="margin-top:2rem;font-size:1.5rem;font-weight:600;"> PENDENCY
                DASHBOARD </h3></div> -->
            <div class="col-sm-12 col-md-12 col-lg-9">
                <div class="" id="filterForm">
                    <form method="POST">
                        {% csrf_token %}
                        <div class="row">
                           
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">From Date</label>
                                    <input readonly type="text" autocomplete="off" placeholder="Select Start Date" style="background-color: white"
                                        class="form-control" name="startDate" id="startDate" value="{{irStartDate}}">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">To Date</label>
                                    <input readonly type="text" autocomplete="off" placeholder="Select End Date" style="background-color: white"
                                        class="form-control" name="endDate" id="endDate" value="{{irEndDate}}">
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">Department</label>
                                   

                                    <div class="multi_select_box" id="copy_searchDepartment">
                                        <select id="searchDepartment"  class="demo-searchDepartment w-40 form-control form-control-sm dropup" data-size="6"  data-live-search="true" multiple data-actions-box="true" >
                                           


                                        {% for i in allDepartment %}
                                       
                                        <option value="{{i.department_code}}" {% if irSearchDept == i.department_code %} selected {% endif %}>{{i.department_name}}</option>
                                        {% endfor %}
                                    </select>

                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">Designation</label>

                                    <div class="multi_select_box" id="copy_searchDesignation">
                                    <select id="searchDesignation"  class="demo-searchDesignation w-40 form-control form-control-sm dropup" data-size="6"  data-live-search="true" multiple data-actions-box="true" >
                                           

                                        {% for i in allDesignation %}
                                        <option value="{{i.designation_code}}" {% if irSearchDesig == i.designation_code %} selected {% endif %}>{{i.designation}}</option>
                                        {% endfor %}
                                    </select>
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">Level</label>
                                    <div class="multi_select_box" id="copy_divdesgn">
                                    <select id="searchLevel"  class="demo-copy w-40 form-control form-control-sm dropup" data-size="6"  data-live-search="true" multiple data-actions-box="true" >
                                       
                                        
                                        <option value="BM">Members</option>
                                        <option value="GM">GM</option>
                                        <option value="DRM">DRM</option>
                                        <option value="SAG">HAG/SAG</option>
                                        <option value="JAG">JAG</option>
                                        <option value="SS/JS">SS/JS</option>
                                    </select>
                                </div>
                                </div>
                            </div>

                            <div class="col-sm-12 col-md-6 col-lg-2">
                                <div class="form-group">
                                    <label class="lbl-caption">Location Type</label>
                                    <div class="multi_select_box" id="copy_location">
                                        <select id="searchLocation"  class="demo-location w-40 form-control form-control-sm dropup" data-size="6"  data-live-search="true" multiple data-actions-box="true" >
                                           
                                            
                                            <option value="STM">Station</option>
                                            <option value="SEM">Section</option>
                                            <option value="TRN">Train</option>
                                            <option value="OTH">Others</option>
                                            
                                        </select>
                                    </div>


                                  </div>
                            </div>

                        </div>
                    </form>
                </div>
            </div>
        </div>
        <div class="row mainRow">
            <div class="col-sm-12 col-md-4 col-lg-4 mt-2">
                <div id="mapZone" class="card card-small p-2 mb-2 mapdiv clickable backgroundImage">

                    <div style=" position: absolute ;left:10px; top: 5px;" class="d-md-none d-lg-block">

                        <table style="width:100%;">
                            <tbody>
                                <tr>
                                    <td>
                                        <span id="headerRailwayName2">
                                            <a href="/pendencyDashboard" class="badge text-white"
                                                style="background-color:#B74805;margin-bottom: 6px;position:relative;z-index: 10;">IR</a>

                                            <span class="badge text-white" style="background-color:#B74805;margin-bottom: 6px;position:relative;z-index: 10;" id="headerZone"></span>
                                            <span class="badge text-white" style="background-color:#B74805;margin-bottom: 6px;position:relative;z-index: 10;" id="headerDivision"></span>

                                        </span>
                                    </td>

                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div style=" position: absolute ;right:5px; top: 5px;z-index:10;" class="d-md-none d-lg-block">
                        
                        <button type="button" class="badge text-white" value="RB"
                        style="position:relative;z-index:20; background-color:#ff9900; border: 0;cursor: pointer;width: 50px;height: 25px;" id="RB"
                        onclick="setBtnColor('RB')">RB</button>

                        <button type="button" class="badge text-white" value="PU"
                        style="position:relative;z-index:20; background-color:#ff9900; border: 0;cursor: pointer;width: 50px;height: 25px;" id="PU"
                        onclick="setBtnColor('PU')">PU</button>
                        <button type="button" class="badge text-white"
                        style="position:relative;z-index:20;  background-color:#ff9900; border: 0;cursor: pointer;width: 50px;height: 25px;" id="ZR"
                        value="ZR" onclick="setBtnColor('ZR')">ZR</button>
                        </div>

                        <div style=" position: absolute ;right:5px; top: 40px;z-index:10;" class="d-md-none d-lg-block" >
                            <button type="button" class="badge text-white buttonZrDetails"
                            style=" background-color:#ff9900;  border: 0;cursor: pointer;width: 40px;height: 25px;" id="DIV" value="DIV"
                            onclick="setBtnColor('DIV')">DIV</button>
                            </br>
                            <button type="button" class="badge text-white buttonZrDetails"
                                style="margin-top: 5px;  background-color:#ff9900;  border: 0;cursor: pointer;width: 40px;height: 25px;" id="WS" value="WS"
                                onclick="setBtnColor('WS')">WS</button>
                            <br>
                            <button type="button" class="badge text-white buttonZrDetails"
                            style="margin-top: 5px;background-color:#ff9900; border: 0;cursor: pointer;width: 40px;height: 25px;" id="HQ" value="HQ"
                            onclick="setBtnColor('HQ')">HQ</button>
                        </div>
                   
                    <div id="zoneshowhide">
                    <div style=" position: absolute ;right:10px; bottom: 5px; z-index:10;" class="d-md-none d-lg-block box" id="zoneDetails">
                        <!-- <span style="color: #391a02; margin-left:10px;margin-right:10px;"><b>Divisions</b></span><br>
                            {% for i in dataZoneWs %}
                            <span class="badge" onclick="showDivision('{{i.location_code}}')" style="font-size: 1.063rem;color:#000080;">
                                <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                <label style="cursor: pointer;" title="{{i.location_description}}">{{i.location_code}}</label>
                            </span><br>
                            {% endfor %} -->
                    </div>
                </div>

                 

                    {% include 'svgFile/IRDivisions.svg' %}
                </div>
                <!-- changes made by ayushika -->
                <!-- <div class="card alert-card">
                    <h6 class="cardsHeaders card-header" >Alerts</h6>
                    <div class="card-body alertscard">
                        <deque>
                            <ul class="list-group list-group-flush" id="rotated">
                                <li class="list-group-item"><b>PUNCTUALITY</b><br>
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                   
                                    <br><b>SECR (-15%)</b>
                                </li>
                                <li class="list-group-item"><b>EXPENDITURE</b><br>
                                    Zones As per percentage variation in Revenue Expenditure(Current year vs Last year): YEAR TO DATE
                                    Zones As per percentage variation in Revenue Expenditure(Current year vs Last year): YEAR TO DATE
                                    <br><b>SWR (22.91%), WR (22.63%), NER (19.35%)</b>
                                </li>
                                <li class="list-group-item"><b>FREIGHT REVENUE</b><br>
                                    Commodity with Highest Percentage increase in Revenue (current year vs. last year): YEAR TO DATE
                                    Commodity with Highest Percentage increase in Revenue (current year vs. last year): YEAR TO DATE

                                    <br><b>COAL AND COKE (30%)</b>
                                </li>
                                <li class="list-group-item"><b>PUNCTUALITY</b><br>
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE
                                    Zone with Lowest Percentage improvement in Punctuality (current year vs. last year): YEAR TO DATE

                                    <br><b>SECR (-15%)</b>
                                </li>
                            </ul>
                        </deque>
                    </div>
                </div> -->
               
            </div>
            <div class="col-sm-12 col-md-8 col-lg-8">
               
                <div class="row subRow">
                    <div class="col-sm-12 col-md-12 col-lg-5" style="padding: 0%; padding-right: 1%;">
                        <div class="card summary-card">
                         
                            <div class="table-responsive" style="padding: 0%;">
                                <table class="table cardsHeaders card-header">
                                    <tr>
                                        <th><h6>Pendency Summary (In Nos.)</h6></th>
                                    </tr>
                                </table>
                            </div>
                           
                            <div class="card-body">
                                <div class="table-responsive">
                                   
                                    <table class="table  scrollable-table sumtable" style="font-size: 0.9 rem;">
                                        <tr>
                                            <th>  Categories</th>
                                            <th class="border-left">
                                                Inspections
                                            </th>
                                            <th class="border-left">
                                                Items
                                            </th>
                                        </tr>
                                       
                                            <td class="border-bottom card-caption cardt ">Total</td>
                                            <td class="border-bottom border-left ">
                                                <a href="#"><span class="stats-val bgs" id="overallInspection" onclick="allinspectionreport_data('INSP','TOTAL')" title="Total">{{forthRow.0.0}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                            <td class="border-bottom border-left ">
   
                                                <a href="#"><span class="stats-val bgs" onclick="allinspectionreport_data('ITEM','TOTAL')" id="overallTotalCount" title="Total">{{forthRow.0.1}}</span></a>
                                            </td>
                                       
                                        <tr>
                                            <td class="border-bottom card-caption cardp1">Pending</td>
                                            <td class="border-left border-bottom ">
                                                <a href="#"><span class="stats-val bgs2" id="pendingInspection" onclick="allinspectionreport_data('INSP','PENDING')" title="Pending">{{forthRow.0.2}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                                <td class="border-left border-bottom ">
   
                                                <a href="#"><span class="stats-val bgs2" onclick="allinspectionreport_data('ITEM','PENDING')" id="overallPendingCount" title="Total pending">{{forthRow.0.3}}</span></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border-bottom card-caption cardo ">Overdue</td>
                                            <td class="border-bottom border-left">
                                                <a href="#"><span class="stats-val bgs3" id="overdueInspection" onclick="allinspectionreport_data('INSP','OVERDUE')" title="Overdue">{{forthRow.0.4}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                            <td class="border-bottom border-left">
   
                                                <a href="#"><span class="stats-val bgs3" onclick="allinspectionreport_data('ITEM','OVERDUE')" id="overallOverdueCount" title="Total overdue">{{forthRow.0.5}}</span></a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border-bottom card-caption  cardp">Priority</td>
                                            <td class="border-left border-bottom">
                                                <a href="#"><span class="stats-val bgs4" id="priorityInspection" onclick="allinspectionreport_data('INSP','PRIORITY')" title="Priority">{{forthRow.0.6}}</span></a>
                                                <!-- <span class="slash">/</span> -->
                                            </td>
                                            <td class="border-left border-bottom">

                                                <a href="#"><span class="stats-val bgs4" onclick="allinspectionreport_data('ITEM','PRIORITY')" id="overallPriorityCount" title="Priority overdue">{{forthRow.0.7}}</span></a>
                                            </td>
                                        </tr>
                                    </table>
     
                               
                                </div>
 
                            </div>
                         </div>
                    </div>


                    <!-- changes made by ayushika --start -->
                    <div class="col-sm-12 col-md-12 col-lg-7" style="padding: 0%; padding-right: 1%;">
                        <div class="card summary-card">                          
                            <div class="table-responsive">
                                <table class="table card-header cardsHeaders" style="margin-bottom: 0%;">
                                    <tr>
                                        <th style="width: 30%;text-align: left;"><h6 style="margin-left:10px;">Pending Items</h6></th>
                                        <th style="width: 55%;" hidden>
                                            
                                        <input onclick="getSSTOWise('ALL')" checked type="checkbox" id="button-all" class="button">
                                        <label for="button-all"> All</label>

                                        <input onclick="getSSTOWise('STM')" type="checkbox" id="button-station" class="button">
                                        <label for="button-station"> Station</label>

                                        <input onclick="getSSTOWise('SEM')" type="checkbox" id="button-section" class="button">
                                        <label for="button-section"> Section</label>

                                        <input onclick="getSSTOWise('TRN')" type="checkbox" id="button-train" class="button">
                                        <label for="button-train"> Train</label>

                                        <input onclick="getSSTOWise('OTH')" type="checkbox" id="button-others" class="button">
                                        <label for="button-others"> Others</label>



                                        
                                    </th>
                                        <th style="text-align: right; padding-right: 1%;">
                                            <a href="javascript:void(0);" id="card_data" onclick="My_Card_data_firstCard()">
                                                <i class="fas fa-table" data-toggle="modal" data-target="#modalps"
                                                style="position: relative; z-index: 10; color: black;"></i>
                                            </a>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-striped scrollable-table table-bordered PendTable" style="margin-bottom: 0%;">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Rly User & Train Operation">R&T</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Employee Safety">ES</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Other Items">OTH</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Night Inspection">Night</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Surprise Inspection">Surprise</th>
                                            <th class="card-caption" style="width: 12%; font-size: 0.9rem; cursor:default;" data-toggle="tooltip"
                                            title="Special Drive">S D</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                       
                                        <tr class="entity" id="station-data">
                                            <td style=" text-align: left;">Station</td>
                                            <td id="stationpassenger"><a href="javascript:void(0)" onclick="fetchdata_firstCard('PS','STM')">{{thirdRowData.0.0}}</a></td>
                                            <td id="stationemployee"><a href="javascript:void(0)" onclick="fetchdata_firstCard('ES','STM')">{{thirdRowData.0.1}}</a></td>
                                            <td id="stationothers"><a href="javascript:void(0)" onclick="fetchdata_firstCard('OTH','STM')">{{thirdRowData.0.2}}</a></td>
                                            <td id="stationnight"><a href="javascript:void(0)" onclick="fetchdata_firstCard('NI','STM')">{{thirdRowData.0.3}}</a></td>
                                            <td id="stationsuprise"><a href="javascript:void(0)" onclick="fetchdata_firstCard('SI','STM')">{{thirdRowData.0.4}}</a></td>
                                            <td id="stationdrive"><a href="javascript:void(0)" onclick="fetchdata_firstCard('DI','STM')">{{thirdRowData.0.5}}</a></td>
                                        </tr>
                                        <tr class="entity initial-data" id="section-data">
                                            <td style=" text-align: left;">Section</td>
                                            <td id="sectionpassenger"><a href="javascript:void(0)" onclick="fetchdata_firstCard('PS','SEM')">{{thirdRowData.0.6}}</a></td>
                                            <td id="sectionemployee"><a href="javascript:void(0)" onclick="fetchdata_firstCard('ES','SEM')">{{thirdRowData.0.7}}</a></td>
                                            <td id="sectionothers"><a href="javascript:void(0)" onclick="fetchdata_firstCard('OTH','SEM')">{{thirdRowData.0.8}}</a></td>
                                            <td id="sectionnight"><a href="javascript:void(0)" onclick="fetchdata_firstCard('NI','SEM')">{{thirdRowData.0.9}}</a></td>
                                            <td id="sectionsuprise"><a href="javascript:void(0)" onclick="fetchdata_firstCard('SI','SEM')">{{thirdRowData.0.10}}</a></td>
                                            <td id="sectiondrive"><a href="javascript:void(0)" onclick="fetchdata_firstCard('DI','SEM')">{{thirdRowData.0.11}}</a></td>
                                        </tr>
                                        <tr class="entity initial-data" id="train-data">
                                            <td style=" text-align: left;">Train</td>
                                            <td id="trainpassenger"><a href="javascript:void(0)" onclick="fetchdata_firstCard('PS','TRN')">{{thirdRowData.0.12}}</a></td>
                                            <td id="trainemployee"><a href="javascript:void(0)" onclick="fetchdata_firstCard('ES','TRN')">{{thirdRowData.0.13}}</a></td>
                                            <td id="trainothers"><a href="javascript:void(0)" onclick="fetchdata_firstCard('OTH','TRN')">{{thirdRowData.0.14}}</a></td>
                                            <td id="trainnight"><a href="javascript:void(0)" onclick="fetchdata_firstCard('NI','TRN')">{{thirdRowData.0.15}}</a></td>
                                            <td id="trainsuprise"><a href="javascript:void(0)" onclick="fetchdata_firstCard('SI','TRN')">{{thirdRowData.0.16}}</a></td>
                                            <td id="traindrive"><a href="javascript:void(0)" onclick="fetchdata_firstCard('DI','TRN')">{{thirdRowData.0.17}}</a></td>
                                        </tr>
                                        <tr class="entity initial-data" id="others-data">
                                            <td style=" text-align: left;">Others</td>
                                            <td id="otherspassenger"><a href="javascript:void(0)" onclick="fetchdata_firstCard('PS','OTH')">{{thirdRowData.0.18}}</a></td>
                                            <td id="othersemployee"><a href="javascript:void(0)" onclick="fetchdata_firstCard('ES','OTH')">{{thirdRowData.0.19}}</a></td>
                                            <td id="othersothers"><a href="javascript:void(0)" onclick="fetchdata_firstCard('OTH','OTH')">{{thirdRowData.0.20}}</a></td>
                                            <td id="othersnight"><a href="javascript:void(0)" onclick="fetchdata_firstCard('NI','OTH')">{{thirdRowData.0.21}}</a></td>
                                            <td id="otherssuprise"><a href="javascript:void(0)" onclick="fetchdata_firstCard('SI','OTH')">{{thirdRowData.0.22}}</a></td>
                                            <td id="othersdrive"><a href="javascript:void(0)" onclick="fetchdata_firstCard('DI','OTH')">{{thirdRowData.0.23}}</a></td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </div>
                  
                </div>
                <div class="row subRow">
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th class="stats-head">Rly User & Train Operation (R&T) </th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2_data('PS')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>              
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items"  id="passengertotal" ><a href="javascript:void(0)" onclick="fetchCardData('PS','TOTAL')">{{firstRowAllData.0.4}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items" id="passengerpending"><a href="javascript:void(0)" onclick="fetchCardData('PS','PENDING')">{{firstRowAllData.0.5}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items" id="passengeroverdue"><a href="javascript:void(0)" onclick="fetchCardData('PS','OVERDUE')">{{firstRowAllData.0.6}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="passengerpriority"><a href="javascript:void(0)" onclick="fetchCardData('PS','PRIORITY')">{{firstRowAllData.0.7}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                <hr style="margin:10px;"/>
                                <!-- <p class="pendency-head">Pendency</p> -->
                                <div class="table-responsive">
                                <table class="custom-table">
                                    <thead>
                                        <tr>
                                            <th class="days" style="font-size: small;"><b>Days</b></th>
                                            <th class="days" id="date1_1">>7</th>
                                            <th class="days" id="date2_1">>30</th>
                                            <th class="days" id="date4_1">>90</th>
                                            <th class="days" id="date5_1">>180</th>
                                        </tr>                                        
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th  class="days" style="font-size: small;"><b>Count</b></th>
                                            <!-- <td class="cards2 count" id="passenger7"><a href="pendency_url" title="More than 7 Days count">{{pendencyDataCard1.0.0}}</a></td>
                                            <td class="cards3 count" id="passenger30"><a href="pendency_url" title="More than 30 Days count">{{pendencyDataCard1.0.1}}</a></td>
                                            <td class="cards4 count" id="passenger90"><a href="pendency_url" title="More than 90 Days count">{{pendencyDataCard1.0.2}}</a></td>
                                            <td class="cards6 count" id="passenger180"><a href="pendency_url" title="More than 180 Days count">{{pendencyDataCard1.0.3}}</a></td> -->

                                            <td class="cards2 stats-val2 count" id="passenger7"><a href="javascript:void(0)" onclick="fetchCardData('PS','7')"  title="More than 7 Days count">{{pendencyDataCard1.0.0}}</a></td>
                                            <td class="cards3 stats-val2 count" id="passenger30"><a href="javascript:void(0)" onclick="fetchCardData('PS','30')"  title="More than 30 Days count">{{pendencyDataCard1.0.1}}</a></td>
                                            <td class="cards4 stats-val2 count" id="passenger90"><a href="javascript:void(0)" onclick="fetchCardData('PS','90')"  title="More than 90 Days count">{{pendencyDataCard1.0.2}}</a></td>
                                            <td class="cards6 stats-val2 count" id="passenger180"><a href="javascript:void(0)" onclick="fetchCardData('PS','180')" title="More than 180 Days count">{{pendencyDataCard1.0.3}}</a></td>
                                           
                                        </tr>
                                    </tbody>
                                </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th class="stats-head">Employee Safety (ES)</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2_data('ES')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                        </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>              
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items"  id="employeetotal"><a href="javascript:void(0)" onclick="fetchCardData('ES','TOTAL')">{{firstRowAllData.0.8}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items"  id="employeepending"><a href="javascript:void(0)" onclick="fetchCardData('ES','PENDING')">{{firstRowAllData.0.9}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items"  id="employeeoverdue"><a href="javascript:void(0)" onclick="fetchCardData('ES','OVERDUE')">{{firstRowAllData.0.10}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="employeepriority"><a href="javascript:void(0)" onclick="fetchCardData('ES','PRIORITY')">{{firstRowAllData.0.11}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days" style="font-size: small;"><b>Days</b></th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" style="font-size: small;"><b>Count</b></th>
                                                <td class="cards2 stats-val2 count" id="employee7"><a href="javascript:void(0)" onclick="fetchCardData('ES','7')"  title="More than 7 Days count">{{pendencyDataCard1.0.5}}</a></td>
                                                <td class="cards3 stats-val2 count" id="employee30"><a href="javascript:void(0)" onclick="fetchCardData('ES','30')"  title="More than 30 Days count">{{pendencyDataCard1.0.6}}</a></td>
                                                <td class="cards4 stats-val2 count" id="employee90"><a href="javascript:void(0)" onclick="fetchCardData('ES','90')"  title="More than 90 Days count">{{pendencyDataCard1.0.7}}</a></td>
                                                <td class="cards6 stats-val2 count" id="employee180"><a href="javascript:void(0)" onclick="fetchCardData('ES','180')" title="More than 180 Days count">{{pendencyDataCard1.0.8}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head">Other Items (OTH)</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2_data('OTH')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>  
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items" id="otherstotal"><a href="javascript:void(0)" onclick="fetchCardData('OTH','TOTAL')">{{firstRowAllData.0.0}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items" id="otherspending"><a href="javascript:void(0)" onclick="fetchCardData('OTH','PENDING')">{{firstRowAllData.0.1}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items" id="othersoverdue"><a href="javascript:void(0)" onclick="fetchCardData('OTH','OVERDUE')">{{firstRowAllData.0.2}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="otherspriority"><a href="javascript:void(0)" onclick="fetchCardData('OTH','PRIORITY')">{{firstRowAllData.0.3}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days" style="font-size: small;"><b>Days</b></th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>  
                                                <th  class="days" style="font-size: small;"><b>Count</b></th>
                                                <td class="cards2 stats-val2 count" id="others7"><a href="javascript:void(0)" onclick="fetchCardData('OTH','7')"  title="More than 7 Days count">{{pendencyDataCard1.0.10}}</a></td>
                                                <td class="cards3 stats-val2 count" id="others30"><a href="javascript:void(0)" onclick="fetchCardData('OTH','30')"  title="More than 30 Days count">{{pendencyDataCard1.0.11}}</a></td>
                                                <td class="cards4 stats-val2 count" id="others90"><a href="javascript:void(0)" onclick="fetchCardData('OTH','90')"  title="More than 90 Days count">{{pendencyDataCard1.0.12}}</a></td>
                                                <td class="cards6 stats-val2 count" id="others180"><a href="javascript:void(0)" onclick="fetchCardData('OTH','180')" title="More than 180 Days count">{{pendencyDataCard1.0.13}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row subRow">
                    <!-- changes made in style of col -->

                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head">Night Inspection (Night)</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2_data('NI')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items"  id="nighttotal"><a href="javascript:void(0)" onclick="fetchCardData('NI','TOTAL')">{{secondRowAllData.0.0}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items"  id="nightpending"><a href="javascript:void(0)" onclick="fetchCardData('NI','PENDING')">{{secondRowAllData.0.1}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items"  id="nightoverdue"><a href="javascript:void(0)" onclick="fetchCardData('NI','OVERDUE')">{{secondRowAllData.0.2}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="nightpriority"><a href="javascript:void(0)" onclick="fetchCardData('NI','PRIORITY')">{{secondRowAllData.0.3}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days" style="font-size: small;"><b>Days</b></th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" style="font-size: small;"><b>Count</b></th>
                                                <td class="cards2 stats-val2 count" id="night7"><a href="javascript:void(0)" onclick="fetchCardData('NI','7')"  title="More than 7 Days count">{{pendencyDataCard2.0.0}}</a></td>
                                                <td class="cards3 stats-val2 count" id="night30"><a href="javascript:void(0)" onclick="fetchCardData('NI','30')"  title="More than 30 Days count">{{pendencyDataCard2.0.1}}</a></td>
                                                <td class="cards4 stats-val2 count" id="night90"><a href="javascript:void(0)" onclick="fetchCardData('NI','90')"  title="More than 90 Days count">{{pendencyDataCard2.0.2}}</a></td>
                                                <td class="cards6 stats-val2 count" id="night180"><a href="javascript:void(0)" onclick="fetchCardData('NI','180')" title="More than 180 Days count">{{pendencyDataCard2.0.3}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head">Surprise Inspection (Surprise)</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2_data('SI')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items"  id="suprisetotal"><a href="javascript:void(0)" onclick="fetchCardData('SI','TOTAL')">{{secondRowAllData.0.4}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items" id="suprisepending"><a href="javascript:void(0)" onclick="fetchCardData('SI','PENDING')">{{secondRowAllData.0.5}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items"  id="supriseoverdue"><a href="javascript:void(0)" onclick="fetchCardData('SI','OVERDUE')">{{secondRowAllData.0.6}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="surprisepriority"><a href="javascript:void(0)" onclick="fetchCardData('SI','PRIORITY')">{{secondRowAllData.0.7}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                                    <hr style="margin:10px;" />
                                    <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days" style="font-size: small;"><b>Days</b></th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" style="font-size: small;"><b>Count</b></th>
                                                <td class="cards2 stats-val2 count" id="suprise7"><a href="javascript:void(0)" onclick="fetchCardData('SI','7')"  title="More than 7 Days count">{{pendencyDataCard2.0.5}}</a></td>
                                                <td class="cards3 stats-val2 count" id="suprise30"><a href="javascript:void(0)" onclick="fetchCardData('SI','30')"  title="More than 30 Days count">{{pendencyDataCard2.0.6}}</a></td>
                                                <td class="cards4 stats-val2 count" id="suprise90"><a href="javascript:void(0)" onclick="fetchCardData('SI','90')"  title="More than 90 Days count">{{pendencyDataCard2.0.7}}</a></td>
                                                <td class="cards6 stats-val2 count" id="suprise180"><a href="javascript:void(0)" onclick="fetchCardData('SI','180')" title="More than 180 Days count">{{pendencyDataCard2.0.8}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    </div>
                            </div>
                        </div>
                    </div>
                    <!-- changes made in style of col -->
                    <div class="col-sm-12 col-md-12 col-lg-4" style="padding: 0%; padding-right: 1%;">
                        <div class="Rcard">
                            <div class="table-responsive">
                            <table class="table card-header cardsHeaders">
                                <tr>
                                    <th  class="stats-head"> Spl Drive Inspection (SD)</th>
                                    <th style="width: 10%;text-align: right;">
                                        <i class="fas fa-table" onclick="fetchdata2_data('DI')" style="margin-left: 2%;position: relative;z-index: 10;"></i>
                                    </th>
                                </tr>
                            </table>
                            </div>
                            <div class="card-body" >
                                <div class="table-responsive">
                                    <table border="0" class="overalStatsTable">
                                        <tr>
                                            <th>Total</th>
                                            <th>Pending</th>
                                            <th>Overdue</th>
                                            <th>Priority</th>
                                        </tr>
                                        <tr>
                                            <td><span class="badge stats-val2" title="Total items" id="drivetotal"><a href="javascript:void(0)" onclick="fetchCardData('DI','TOTAL')">{{secondRowAllData.0.8}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Pending items" id="drivepending"><a href="javascript:void(0)" onclick="fetchCardData('DI','PENDING')">{{secondRowAllData.0.9}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Overdue items" id="driveoverdue"><a href="javascript:void(0)" onclick="fetchCardData('DI','OVERDUE')">{{secondRowAllData.0.10}}</a></span></td>
                                            <td><span class="badge stats-val2" title="Priority items" id="drivepriority"><a href="javascript:void(0)" onclick="fetchCardData('DI','PRIORITY')">{{secondRowAllData.0.11}}</a></span></td>
                                        </tr>
                                    </table>
                                </div>
                               
                            <hr style="margin:10px;" />
                            <div class="table-responsive">
                                    <table class="custom-table">
                                        <thead>
                                            <tr>
                                                <th class="days" style="font-size: small;"><b>Days</b></th>
                                                <th class="days" id="date1_1">>7</th>
                                                <th class="days" id="date2_1">>30</th>
                                                <th class="days" id="date4_1">>90</th>
                                                <th class="days" id="date5_1">>180</th>
                                            </tr>                                        
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <th  class="days" style="font-size: small;"><b>Count</b></th>
                                                <td class="cards2 stats-val2 count" id="drive7"><a href="javascript:void(0)" onclick="fetchCardData('DI','7')"  title="More than 7 Days count">{{pendencyDataCard2.0.10}}</a></td>
                                                <td class="cards3 stats-val2 count" id="drive30"><a href="javascript:void(0)" onclick="fetchCardData('DI','30')"  title="More than 30 Days count">{{pendencyDataCard2.0.11}}</a></td>
                                                <td class="cards4 stats-val2 count" id="drive90"><a href="javascript:void(0)" onclick="fetchCardData('DI','90')"  title="More than 90 Days count">{{pendencyDataCard2.0.12}}</a></td>
                                                <td class="cards6 stats-val2 count" id="drive180"><a href="javascript:void(0)" onclick="fetchCardData('DI','180')" title="More than 180 Days count">{{pendencyDataCard2.0.13}}</a></td>
                                            </tr>
                                        </tbody>
                                    </table>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
              
            </div>
        </div>
       <!-- <div class="row">
        <label style="width:100%; text-align: right;padding-right: 10px;">*D : Days, *PC : Pendency Count </label>
       </div> -->

    </div>
</div>
    <div  id="secondary" style="margin: auto;width: 10%;padding: 10px;z-index:100;">
   
        <center><img src="{% static 'images/maploading.gif' %}" style="width:200%;height:200%;"></center>
      </div>


<!-- MODAL All -->
<div id="modal" class="modal">
    <div class="modal-content">
            <div class="row">
                <div class="col-10"><h3 id = 'demo'>Rly: List of Night Inspection related items (Total)</h3></div>
                <div class="col-2"><button id="modaldismis" type="button" class="closebtn btn-danger btn-sm" style="float: right;" data-dismiss="modal" aria-label="Close">Close</button></div>
            </div>
            
            <hr style="width: 100%; height: 2px; border-color: rgb(241, 160, 160)">
            <div id="table-container">
                
            <table id="table_id_data" class="table table-striped table-bordered table-sm" style="width: 100%; overflow-x: auto;">
                <thead style="background-color: #2b7bea;white-space: nowrap; font-size: 1.2rem; color:white; " id = 'thead1'>
                
                </thead>
                <tbody id = 'mydata'>
                
                </tbody>
            </table>
          
          </div>
          <center>
            <div id="excelButton" class="btn-group mr-2" role="group" >
            </div>
            <div id="pdfButton" class="btn-group mr-2" role="group" >
            </div>        
        </center>
    </div>
</div>
<button type="button" id = 'btnmodal' class="btn btn-primary" data-toggle="modal" data-target="#modal" hidden></button>
<!-- END MODAL -->



<!-- MODAL Table -->
<div id="modal1" class="modal">
    <div class="modal-content">
            <div class="row">
                <div class="col-10"><h3 id = 'demo1'>Rly: List of Night Inspection related items (Total)</h3></div>
                <div class="col-2"><button id="modaldismis1" type="button" class="closebtn btn-danger btn-sm" style="float: right;" data-dismiss="modal" aria-label="Close">Close</button></div>
            </div>
            
            <hr style="width: 100%; height: 2px; border-color: rgb(241, 160, 160)">
            <div id="backbutton"></div>
            <div id="table-container">
            <table id="table_id_data1" class="table table-striped table-bordered table-sm" style="width: 100%; overflow-x: auto;">
                <thead style="background-color: #2b7bea;white-space: nowrap; font-size: 1.2rem; color:white; " id = 'thead11'>
                
                </thead>
                <tbody id = 'mydata1'>
                
                </tbody>
            </table>
          
          </div>
          <center>
            <div id="excelButton1" class="btn-group mr-2" role="group" >
            </div>
            <div id="pdfButton1" class="btn-group mr-2" role="group" >
            </div>        
        </center>
    </div>
</div>
<button type="button" id = 'btnmodal1' class="btn btn-primary" data-toggle="modal" data-target="#modal1" hidden></button>
<!-- END MODAL -->


<!-- MODAL TABLE STM/SEC/.. -->
<div id="modal2" class="modal">
    <div class="modal-content">
            <div class="row">
                <div class="col-10"><h3 id = 'demo2'>Rly: List of Night Inspection related items (Total)</h3></div>
                <div class="col-2"><button id="modaldismis2" type="button" class="closebtn btn-danger btn-sm" style="float: right;" data-dismiss="modal" aria-label="Close">Close</button></div>
            </div>
            
            <hr style="width: 100%; height: 2px; border-color: rgb(241, 160, 160)">
            <div id="table-container">
                <div id="backbutton2"></div>
            <table id="table_id_data2" class="table table-striped table-bordered table-sm" style="width: 100%; overflow-x: auto;">
                <thead style="background-color: #2b7bea;white-space: nowrap; font-size: 1.2rem; color:white; " id = 'thead12'>
                
                </thead>
                <tbody id = 'mydata2'>
                
                </tbody>
            </table>
          
          </div>
          <center>
            <div id="excelButton2" class="btn-group mr-2" role="group" >
            </div>
            <div id="pdfButton2" class="btn-group mr-2" role="group" >
            </div>        
        </center>
    </div>
</div>
<button type="button" id = 'btnmodal2' class="btn btn-primary" data-toggle="modal" data-target="#modal2" hidden></button>
<!-- END MODAL -->


<!-- MODAL insp TABLE  -->
<div id="modal3" class="modal">
    <div class="modal-content">
            <div class="row">
                <div class="col-10"><h3 id = 'demo3'>Rly: List of Night Inspection related items (Total)</h3></div>
                <div class="col-2"><button id="modaldismis3" type="button" class="closebtn btn-danger btn-sm" style="float: right;" data-dismiss="modal" aria-label="Close">Close</button></div>
            </div>
            
            <hr style="width: 100%; height: 2px; border-color: rgb(241, 160, 160)">
            <div id="table-container">
                
            <table id="table_id_data3" class="table table-striped table-bordered table-sm" style="width: 100%; overflow-x: auto;">
                <thead style="background-color: #2b7bea;white-space: nowrap; font-size: 1.2rem; color:white; " id = 'thead3'>
                
                </thead>
                <tbody id = 'mydata3'>
                
                </tbody>
            </table>
          
          </div>
          <center>
            <div id="excelButton3" class="btn-group mr-2" role="group" >
            </div>
            <div id="pdfButton3" class="btn-group mr-2" role="group" >
            </div>        
        </center>
    </div>
</div>
<button type="button" id = 'btnmodal3' class="btn btn-primary" data-toggle="modal" data-target="#modal3" hidden></button>
<!-- END MODAL -->


<!-- on clicking the station, section, train and others on pending items card : color changes to red -->




<script>
    
    const buttons = document.querySelectorAll('.button');
    var allButtonId = '', allCategory = [];



    $(document).ready(function() {
        $("#button-station").click(function() {
            
            let index = allCategory.indexOf('button-station')   
            if(index != -1)
                allCategory.splice(index,1)
            else
                allCategory.push('button-station')
            showRows("station");
           
        });
        $("#button-section").click(function() {
            let index = allCategory.indexOf('button-section')
            if(index != -1)
                allCategory.splice(index,1)
            else
            allCategory.push('button-section')
            showRows("section");
            
        });
        $("#button-train").click(function() {
            let index = allCategory.indexOf('button-train')
            if(index != -1)
                allCategory.splice(index,1)
            else
            allCategory.push('button-train')
            showRows("train");
            
        });
        $("#button-others").click(function() {
            let index = allCategory.indexOf('button-others')
            if(index != -1)
                allCategory.splice(index,1)
            else
                allCategory.push('button-others')
            showRows("others");
            
        });  
        $("#button-all").click(function() {
            allCategory = []
            $(".entity").show();
        });
    });
   
    function showRows(category) {
        // Hide all rows initially
        if(allCategory.length !=0)
            $(".entity").hide();
        //  Show the rows corresponding to the clicked category
        for(let i=0; i< allCategory.length; i++)
        {
            let cate = allCategory[i].split('-')
            $("#" + cate[1] + "-data").show();
        }
    }
   
   </script>
   


   
<script>


        $('.demo-searchDepartment').selectpicker();
        $(".demo-searchDepartment").removeClass("dropdown");
        var button = $(`#copy_searchDepartment .bs-actionsbox .btn-group`);  
        $(`#copy_searchDepartment .bs-actionsbox .btn-group .bs-select-all`).remove();
        $(`#copy_searchDepartment .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
        // $(`#copy_searchDepartment .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","color : white !important;");
        button.append(`&nbsp; <button  type="button" class="btn btn-default" style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('All');">Go/Close</button>`)
        $("#copy_searchDepartment .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
            $('#copy_searchDepartment option').prop("selected", false);
             getDataOfFilter('All');
        });

        $('.demo-searchDesignation').selectpicker();
        $(".demo-searchDesignation").removeClass("dropdown");
        var button = $(`#copy_searchDesignation .bs-actionsbox .btn-group`);  
        $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-select-all`).remove();
        $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
        button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('desig');">Go/Close</button>`)
        $("#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
            $('#copy_searchDesignation option').prop("selected", false);
             getDataOfFilter('desig');
        });


        $('.demo-copy').selectpicker();
        $(".demo-copy").removeClass("dropdown");
        var button = $(`#copy_divdesgn .bs-actionsbox .btn-group`);  
        $(`#copy_divdesgn .bs-actionsbox .btn-group .bs-select-all`).remove();
        $(`#copy_divdesgn .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
        button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('level');">Go/Close</button>`)
        $("#copy_divdesgn .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
            $('#copy_divdesgn option').prop("selected", false);
             getDataOfFilter('level');
        });
        

        $('.demo-location').selectpicker();
        $(".demo-location").removeClass("dropdown");
        var button = $(`#copy_location .bs-actionsbox .btn-group`);  
        $(`#copy_location .bs-actionsbox .btn-group .bs-select-all`).remove();
        $(`#copy_location .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
        button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getSSTOWise();">Go/Close</button>`)
        $("#copy_location .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
            $('#copy_location option').prop("selected", false);
            getSSTOWise();
        });
     
var officerType = 'Marked'
function getOnOffStatus()
{     
if(document.getElementById('onOffIdForAutoUpdate').checked == true)
{
    officerType = 'Insp';
}
else
{
    officerType = 'Marked';
}


            $('#main').hide();
                $('#secondary').show();
               
                let data = {
                    typ: 'allDetails',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                   
                   let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let allDesignation = response.allDesignation;
                   let overallsummary = response.overallsummary;
                   
                  
                //    let overallTotalCount = response.overallTotalCount;
                //    let overallPendingCount = response.overallPendingCount;
                //    let overallOverdueCount = response.overallOverdueCount;
                //    let overallInspection = response.overallInspection;
                //    let pendingInspection = response.pendingInspection;
                //    let overdueInspection = response.overdueInspection;
                //    let priorityInspection = response.priorityInspection;
                //    let overallPriorityCount = response.overallPriorityCount;
                //    let psStation = response.psStation;
                //    let esStation = response.esStation;
                //    let osStation = response.osStation;
                //    let niStation = response.niStation;
                //    let siStation = response.siStation;
                //    let diStation = response.diStation;

                //    let psSection = response.psSection;
                //    let esSection = response.esSection;
                //    let osSection = response.osSection;
                //    let niSection = response.niSection;
                //    let siSection = response.siSection;
                //    let diSection = response.diSection;

                //    let psTrain = response.psTrain;
                //    let esTrain = response.esTrain;
                //    let osTrain = response.osTrain;
                //    let niTrain = response.niTrain;
                //    let siTrain = response.siTrain;
                //    let diTrain = response.diTrain;

                //    let psOther = response.psOther;
                //    let esOther = response.esOther;
                //    let osOther = response.osOther;
                //    let niOther = response.niOther;
                //    let siOther = response.siOther;
                //    let diOther = response.diOther;
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: red;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`
                                    }
                                    else{
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color:red;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                }



                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = ``;
                       
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if($('#searchDesignation').val().includes(String(allDesignation[i].designation_code)))
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                        $(`#searchDesignation`).selectpicker("destroy");
                            $('#searchDesignation').empty();
                            $('#searchDesignation').append(row);
                           $('.demo-searchDesignation').selectpicker();
                            $(".demo-searchDesignation").removeClass("dropdown");
                            var button = $(`#copy_searchDesignation .bs-actionsbox .btn-group`);  
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-select-all`).remove();
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
                            button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('desig');">Go/Close</button>`)
                            $("#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
                            $('#copy_searchDesignation option').prop("selected", false);
                            getDataOfFilter('desig');
                            });

                           document.getElementById('overallInspection').innerHTML = overallsummary[0][0];
                           document.getElementById('pendingInspection').innerHTML = overallsummary[0][1];
                           document.getElementById('overdueInspection').innerHTML = overallsummary[0][2];
                           document.getElementById('priorityInspection').innerHTML = overallsummary[0][3];
                           document.getElementById('overallTotalCount').innerHTML = overallsummary[0][4];
                           document.getElementById('overallPendingCount').innerHTML = overallsummary[0][5];
                           document.getElementById('overallOverdueCount').innerHTML = overallsummary[0][6];
                           document.getElementById('overallPriorityCount').innerHTML = overallsummary[0][7];


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];


                           
                        //    document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                        //    document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                        //    document.getElementById('stationothers').firstChild.innerHTML = osStation;
                        //    document.getElementById('stationnight').firstChild.innerHTML = niStation;
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                        //    document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                        //    document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                        //    document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                        //    document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                        //    document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                        //    document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                        //    document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                        //    document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                        //    document.getElementById('othersothers').firstChild.innerHTML = osOther;
                        //    document.getElementById('othersnight').firstChild.innerHTML = niOther;
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                        //    document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                           document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                           document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                           document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                           document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                           document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                           document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                           document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                           document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                           document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                           document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                           document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                           document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                           document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                           document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                           document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                           document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                           document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                           document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                           document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                           document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                           document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                           document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                           document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                           document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();
                           

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });
            



}
</script>
<script>


    $('#main').show();
    $('#secondary').hide();
    $(".sidebar").addClass('close');
    $('#zoneshowhide').hide();
    $('#headerZone').hide();
    $('#headerDivision').hide();
    var descType = ''
   
    $(document).ready(function(){
            $('.buttonZrDetails').hide();
     })
   
    function change(h) {
       
    const dataId = $(h).attr("data-id");
    let svgclass = dataId+'CLASS';
    $("."+svgclass).addClass('fillColorClassDesc');
    }
    function changeBack(h) {
       
       
        $("path").removeClass('fillColorClassDesc');
        // const dataId = $('#zoneID').val();
        // let svgclass = dataId+'CLASS';
        // $("."+svgclass).addClass('fillColorClass');
    }
   
            function get_data(h) {
                let login_access_type = '{{login_access_type|safe}}'; 
                if(login_access_type != 'A')
                {
                    alert('You are not allowed.')
                    return false;
                }
                
                if($('#typeID').val()=='IR' || $('#typeID').val()=='PU' || $('#typeID').val()=='RB')
                {
                    $('#typeID').val('ZR');
                    $('.buttonZrDetails').show();
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
                    $('#RB').css('background-color', '#ff9900');

                }
               
                $("path").removeClass('fillColorClass');
                const dataId = $(h).attr("data-id");
                let svgclass = dataId+'CLASS';
                $("."+svgclass).addClass('fillColorClass');
                $('#zoneID').val(dataId);
                $('#divID').val('');
                $('#main').hide();
                $('#secondary').show();
                $('#zoneshowhide').hide();

                $('#headerZone').hide();
                $('#headerDivision').hide();

                let data = {
                    typ: 'allDetails',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    
                    $('#headerDivision').empty();
                    $('#headerZone').empty();
                    $('#headerZone').show();
                    
                    let div = `<i class="fa fa-angle-right"></i> ${dataId} &nbsp;`;
                    $('#headerZone').append(div);
                           
                    let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let allDesignation = response.allDesignation;
                   let overallsummary = response.overallsummary;
                   
                  
                //    let overallTotalCount = response.overallTotalCount;
                //    let overallPendingCount = response.overallPendingCount;
                //    let overallOverdueCount = response.overallOverdueCount;
                //    let overallInspection = response.overallInspection;
                //    let pendingInspection = response.pendingInspection;
                //    let overdueInspection = response.overdueInspection;
                //    let priorityInspection = response.priorityInspection;
                //    let overallPriorityCount = response.overallPriorityCount;

                //    let psStation = response.psStation;
                //    let esStation = response.esStation;
                //    let osStation = response.osStation;
                //    let niStation = response.niStation;
                //    let siStation = response.siStation;
                //    let diStation = response.diStation;

                //    let psSection = response.psSection;
                //    let esSection = response.esSection;
                //    let osSection = response.osSection;
                //    let niSection = response.niSection;
                //    let siSection = response.siSection;
                //    let diSection = response.diSection;

                //    let psTrain = response.psTrain;
                //    let esTrain = response.esTrain;
                //    let osTrain = response.osTrain;
                //    let niTrain = response.niTrain;
                //    let siTrain = response.siTrain;
                //    let diTrain = response.diTrain;

                //    let psOther = response.psOther;
                //    let esOther = response.esOther;
                //    let osOther = response.osOther;
                //    let niOther = response.niOther;
                //    let siOther = response.siOther;
                //    let diOther = response.diOther;

                  


                //    //console.log(overallInspection)
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: red;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`
                                    }
                                    else{
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color:red;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                }




                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = ``
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if($('#searchDesignation').val().includes(String(allDesignation[i].designation_code)))
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                        
                        $(`#searchDesignation`).selectpicker("destroy");
                            $('#searchDesignation').empty();
                            $('#searchDesignation').append(row);
                           $('.demo-searchDesignation').selectpicker();
                            $(".demo-searchDesignation").removeClass("dropdown");
                            var button = $(`#copy_searchDesignation .bs-actionsbox .btn-group`);  
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-select-all`).remove();
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
                            button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('desig');">Go/Close</button>`)
                            $("#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
                            $('#copy_searchDesignation option').prop("selected", false);
                            getDataOfFilter('desig');
                            });
     
                           document.getElementById('overallInspection').innerHTML = overallsummary[0][0];
                           document.getElementById('pendingInspection').innerHTML = overallsummary[0][1];
                           document.getElementById('overdueInspection').innerHTML = overallsummary[0][2];
                           document.getElementById('priorityInspection').innerHTML = overallsummary[0][3];
                           document.getElementById('overallTotalCount').innerHTML = overallsummary[0][4];
                           document.getElementById('overallPendingCount').innerHTML = overallsummary[0][5];
                           document.getElementById('overallOverdueCount').innerHTML = overallsummary[0][6];
                           document.getElementById('overallPriorityCount').innerHTML = overallsummary[0][7];


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];  
                           
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];
                           

                        //    document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                        //    document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                        //    document.getElementById('stationothers').firstChild.innerHTML = osStation;
                        //    document.getElementById('stationnight').firstChild.innerHTML = niStation;
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                        //    document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                        //    document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                        //    document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                        //    document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                        //    document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                        //    document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                        //    document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                        //    document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                        //    document.getElementById('othersothers').firstChild.innerHTML = osOther;
                        //    document.getElementById('othersnight').firstChild.innerHTML = niOther;
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                        //    document.getElementById('othersdrive').firstChild.innerHTML = diOther;

                        document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                           document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                           document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                           document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                           document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                           document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                           document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                           document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                           document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                           document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                           document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                           document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                           document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                           document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                           document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                           document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                           document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                           document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                           document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                           document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                           document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                           document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                           document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                           document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();
                           

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });

               

               
               
            }
       
            function showDivision(divName) {
                let login_access_type = '{{login_access_type|safe}}'; 
                if(login_access_type == 'N')
                {
                    alert('You are not allowed.')
                    return false;
                }
                $('#divID').val(divName);
                $('#main').hide();
                $('#secondary').show();
                $('#zoneshowhide').hide();
                $('#headerDivision').hide();
                
                let data = {
                    typ: 'allDetails',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#headerDivision').show();
                    $('#headerDivision').empty();
                    let div = `<i class="fa fa-angle-right"></i> ${divName} &nbsp;`;
                    $('#headerDivision').append(div);
                    let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let allDesignation = response.allDesignation;
                   let overallsummary = response.overallsummary;
                   
                  
                //    let overallTotalCount = response.overallTotalCount;
                //    let overallPendingCount = response.overallPendingCount;
                //    let overallOverdueCount = response.overallOverdueCount;
                //    let overallInspection = response.overallInspection;
                //    let pendingInspection = response.pendingInspection;
                //    let overdueInspection = response.overdueInspection;
                //    let priorityInspection = response.priorityInspection;
                //    let overallPriorityCount = response.overallPriorityCount;

                //    let psStation = response.psStation;
                //    let esStation = response.esStation;
                //    let osStation = response.osStation;
                //    let niStation = response.niStation;
                //    let siStation = response.siStation;
                //    let diStation = response.diStation;

                //    let psSection = response.psSection;
                //    let esSection = response.esSection;
                //    let osSection = response.osSection;
                //    let niSection = response.niSection;
                //    let siSection = response.siSection;
                //    let diSection = response.diSection;

                //    let psTrain = response.psTrain;
                //    let esTrain = response.esTrain;
                //    let osTrain = response.osTrain;
                //    let niTrain = response.niTrain;
                //    let siTrain = response.siTrain;
                //    let diTrain = response.diTrain;

                //    let psOther = response.psOther;
                //    let esOther = response.esOther;
                //    let osOther = response.osOther;
                //    let niOther = response.niOther;
                //    let siOther = response.siOther;
                //    let diOther = response.diOther;
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: red;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`
                                    }
                                    else{
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color:red;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                }


                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = ``
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if($('#searchDesignation').val().includes(String(allDesignation[i].designation_code)))
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                        $(`#searchDesignation`).selectpicker("destroy");
                            $('#searchDesignation').empty();
                            $('#searchDesignation').append(row);
                           $('.demo-searchDesignation').selectpicker();
                            $(".demo-searchDesignation").removeClass("dropdown");
                            var button = $(`#copy_searchDesignation .bs-actionsbox .btn-group`);  
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-select-all`).remove();
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
                            button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('desig');">Go/Close</button>`)
                            $("#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
                            $('#copy_searchDesignation option').prop("selected", false);
                            getDataOfFilter('desig');
                            });
     
                           document.getElementById('overallInspection').innerHTML = overallsummary[0][0];
                           document.getElementById('pendingInspection').innerHTML = overallsummary[0][1];
                           document.getElementById('overdueInspection').innerHTML = overallsummary[0][2];
                           document.getElementById('priorityInspection').innerHTML = overallsummary[0][3];
                           document.getElementById('overallTotalCount').innerHTML = overallsummary[0][4];
                           document.getElementById('overallPendingCount').innerHTML = overallsummary[0][5];
                           document.getElementById('overallOverdueCount').innerHTML = overallsummary[0][6];
                           document.getElementById('overallPriorityCount').innerHTML = overallsummary[0][7];


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];



                           
                        //    document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                        //    document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                        //    document.getElementById('stationothers').firstChild.innerHTML = osStation;
                        //    document.getElementById('stationnight').firstChild.innerHTML = niStation;
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                        //    document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                        //    document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                        //    document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                        //    document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                        //    document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                        //    document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                        //    document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                        //    document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                        //    document.getElementById('othersothers').firstChild.innerHTML = osOther;
                        //    document.getElementById('othersnight').firstChild.innerHTML = niOther;
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                        //    document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                           document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                           document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                           document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                           document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                           document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                           document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                           document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                           document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                           document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                           document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                           document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                           document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                           document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                           document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                           document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                           document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                           document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                           document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                           document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                           document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                           document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                           document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                           document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                           document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];

                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];

                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();
                           



                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });

               
   
            }
            var SSTOTYPE = 'ALL', SSTOTYPEARRAY = [];

            function getSSTOWise()
            {
                
                if(($('#searchLocation').val()).length == 0)
                {
                    SSTOTYPE = 'ALL'
                }
                else
                {
                    SSTOTYPE = ($('#searchLocation').val()).toString();
                }
                
                // if(sstotyp == 'ALL')
                // {
                //     SSTOTYPE = sstotyp;
                //     SSTOTYPEARRAY = [];
                //     $('.button').prop('checked',false);
                //     $('#button-all').prop('checked',true);
                // }
                // else{
                //     $('#button-all').prop('checked',false);
                //     let index = SSTOTYPEARRAY.indexOf(sstotyp);
                //     if(index != -1)
                //     {
                //         SSTOTYPEARRAY.splice(index,1);
                //         if(SSTOTYPEARRAY.length == 0)
                //         { 
                //             SSTOTYPE = 'ALL';
                //             SSTOTYPEARRAY = [];
                //             $('.button').prop('checked',false);
                //             $('#button-all').prop('checked',true);
                //             $("#station-data").show();
                //             $("#section-data").show();
                //             $("#train-data").show();
                //             $("#others-data").show();
                //         }
                //         else {
                //             SSTOTYPE = SSTOTYPEARRAY.toString();
                //         }
                //     }
                //     else
                //     {
                //         SSTOTYPEARRAY.push(sstotyp);
                //         SSTOTYPE = SSTOTYPEARRAY.toString();
                //     }
                    
                // }
                
                
                $('#main').hide();
                $('#secondary').show();
               
                let data = {
                    typ: 'allDetails',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                   
                   let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let allDesignation = response.allDesignation;
                   let overallsummary = response.overallsummary;
                   
                  
              
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: red;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`
                                    }
                                    else{
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color:red;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                }




                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = ``;
                       
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if($('#searchDesignation').val().includes(String(allDesignation[i].designation_code)))
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                        $(`#searchDesignation`).selectpicker("destroy");
                            $('#searchDesignation').empty();
                            $('#searchDesignation').append(row);
                           $('.demo-searchDesignation').selectpicker();
                            $(".demo-searchDesignation").removeClass("dropdown");
                            var button = $(`#copy_searchDesignation .bs-actionsbox .btn-group`);  
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-select-all`).remove();
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
                            button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('desig');">Go/Close</button>`)
                            $("#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
                            $('#copy_searchDesignation option').prop("selected", false);
                            getDataOfFilter('desig');
                            });
     
                           
                           document.getElementById('overallInspection').innerHTML = overallsummary[0][0];
                           document.getElementById('pendingInspection').innerHTML = overallsummary[0][1];
                           document.getElementById('overdueInspection').innerHTML = overallsummary[0][2];
                           document.getElementById('priorityInspection').innerHTML = overallsummary[0][3];
                           document.getElementById('overallTotalCount').innerHTML = overallsummary[0][4];
                           document.getElementById('overallPendingCount').innerHTML = overallsummary[0][5];
                           document.getElementById('overallOverdueCount').innerHTML = overallsummary[0][6];
                           document.getElementById('overallPriorityCount').innerHTML = overallsummary[0][7];


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];


                           
                        //    document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                        //    document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                        //    document.getElementById('stationothers').firstChild.innerHTML = osStation;
                        //    document.getElementById('stationnight').firstChild.innerHTML = niStation;
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                        //    document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                        //    document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                        //    document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                        //    document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                        //    document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                        //    document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                        //    document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                        //    document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                        //    document.getElementById('othersothers').firstChild.innerHTML = osOther;
                        //    document.getElementById('othersnight').firstChild.innerHTML = niOther;
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                        //    document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                           document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                           document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                           document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                           document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                           document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                           document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                           document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                           document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                           document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                           document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                           document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                           document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                           document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                           document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                           document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                           document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                           document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                           document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                           document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                           document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                           document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                           document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                           document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                           document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();
                           

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });
            
            
                }
            function getDataOfFilter(val)
            {
                //$('#searchDepartment').trigger('click');
                //$("#searchDepartment-drop-mask").select2("close");
               //select2-container--open

               //$('.select2-container--below').removeClass('select2-container--open')
              // $(".select2-close").select2("close");
                $('#main').hide();
                $('#secondary').show();
                if(val=='desig')
                {
                    $('#searchLevel').selectpicker('val', []);
                    
                }
                else if(val == 'level'){
                    $('#searchDesignation').selectpicker('val', []);
                    
                }
                let data = {
                    typ: 'allDetails',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
               
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let allDesignation = response.allDesignation;
                   let overallsummary = response.overallsummary;
                   
                  
                //    let overallTotalCount = response.overallTotalCount;
                //    let overallPendingCount = response.overallPendingCount;
                //    let overallOverdueCount = response.overallOverdueCount;
                //    let overallInspection = response.overallInspection;
                //    let pendingInspection = response.pendingInspection;
                //    let overdueInspection = response.overdueInspection;
                //    let priorityInspection = response.priorityInspection;
                //    let overallPriorityCount = response.overallPriorityCount;


                //    let psStation = response.psStation;
                //    let esStation = response.esStation;
                //    let osStation = response.osStation;
                //    let niStation = response.niStation;
                //    let siStation = response.siStation;
                //    let diStation = response.diStation;

                //    let psSection = response.psSection;
                //    let esSection = response.esSection;
                //    let osSection = response.osSection;
                //    let niSection = response.niSection;
                //    let siSection = response.siSection;
                //    let diSection = response.diSection;

                //    let psTrain = response.psTrain;
                //    let esTrain = response.esTrain;
                //    let osTrain = response.osTrain;
                //    let niTrain = response.niTrain;
                //    let siTrain = response.siTrain;
                //    let diTrain = response.diTrain;

                //    let psOther = response.psOther;
                //    let esOther = response.esOther;
                //    let osOther = response.osOther;
                //    let niOther = response.niOther;
                //    let siOther = response.siOther;
                //    let diOther = response.diOther;
                        let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: red;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`
                                    }
                                    else{
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color:red;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                }




                               
                               
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = ``;
                       
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if($('#searchDesignation').val().includes(String(allDesignation[i].designation_code)))
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;     
                        }
                        
                            $(`#searchDesignation`).selectpicker("destroy");
                            $('#searchDesignation').empty();
                            $('#searchDesignation').append(row);
                           $('.demo-searchDesignation').selectpicker();
                            $(".demo-searchDesignation").removeClass("dropdown");
                            var button = $(`#copy_searchDesignation .bs-actionsbox .btn-group`);  
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-select-all`).remove();
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
                            button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('desig');">Go/Close</button>`)
                            $("#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
                            $('#copy_searchDesignation option').prop("selected", false);
                            getDataOfFilter('desig');
                            });
     


                           document.getElementById('overallInspection').innerHTML = overallsummary[0][0];
                           document.getElementById('pendingInspection').innerHTML = overallsummary[0][1];
                           document.getElementById('overdueInspection').innerHTML = overallsummary[0][2];
                           document.getElementById('priorityInspection').innerHTML = overallsummary[0][3];
                           document.getElementById('overallTotalCount').innerHTML = overallsummary[0][4];
                           document.getElementById('overallPendingCount').innerHTML = overallsummary[0][5];
                           document.getElementById('overallOverdueCount').innerHTML = overallsummary[0][6];
                           document.getElementById('overallPriorityCount').innerHTML = overallsummary[0][7];


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];


                           
                        //    document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                         
                        //    document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                        //    document.getElementById('stationothers').firstChild.innerHTML = osStation;
                        //    document.getElementById('stationnight').firstChild.innerHTML = niStation;
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                        //    document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                        //    document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                        //    document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                        //    document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                        //    document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                        //    document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                        //    document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                        //    document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                        //    document.getElementById('othersothers').firstChild.innerHTML = osOther;
                        //    document.getElementById('othersnight').firstChild.innerHTML = niOther;
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                        //    document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                           document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                           document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                           document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                           document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                           document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                           document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                           document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                           document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                           document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                           document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                           document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                           document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                           document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                           document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                           document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                           document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                           document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                           document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                           document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                           document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                           document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                           document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                           document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                           document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();
                           

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });
            }
   
            function setBtnColor(val) {

                let login_access_type = '{{login_access_type|safe}}'; 
                if( (val == 'PU' || val == 'RB') && login_access_type != 'A')
                {
                    alert('You are not allowed.')
                    return false;
                }
                else if(( val == 'DIV'  || val == 'WS' || val == 'HQ'  || val == 'ZR') && !['P','A'].includes(login_access_type))
                {
                    alert('You are not allowed.')
                    return false;
                }
                $('#main').hide();
                $('#secondary').show();
               
                $('#zoneshowhide').hide();
                // $('#headerZone').hide();
                $('#headerDivision').hide();
               
                if(val == 'PU'){
                    $("path").removeClass('fillColorClass');
                    descType='Production Unit';
                    $('.buttonZrDetails').hide();
                    $('#typeID').val(val);
                    $('#zoneID').val('');
                    $('#divID').val('');
                    $('#headerZone').empty();
                    $('#headerDivision').empty();
                    $('#headerZone').hide();
                    $('#headerDivision').hide();

                    $('#ZR').css('background-color', '#ff9900');
                    $('#RB').css('background-color', '#ff9900');
                    $('#PU').css('background-color', '#B74805');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
               

                }
                else if(val == 'RB'){
                    $("path").removeClass('fillColorClass');
                    descType='Railway Board';
                    $('.buttonZrDetails').hide();
                    $('#typeID').val(val);
                    $('#zoneID').val('');
                    $('#divID').val('');
                    $('#headerZone').empty();
                    $('#headerDivision').empty();
                    $('#headerZone').hide();
                    $('#headerDivision').hide();
                    $('#RB').css('background-color', '#B74805');
                    $('#ZR').css('background-color', '#ff9900');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
               

                }
                
                else if(val == 'ZR' && login_access_type == 'P')
                {
                   

                    $('#divID').val('');
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#RB').css('background-color', '#ff9900');
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
                }
                
                
                else if(val == 'ZR')
                {
                    $('#headerZone').empty();
                    $('#headerDivision').empty();
                    $('#headerZone').hide();
                    $('#headerDivision').hide();
                    $("path").removeClass('fillColorClass');

                    $('#zoneID').val('');
                    $('#divID').val('');
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#RB').css('background-color', '#ff9900');
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
                }
                
                else if(val == 'DIV')
                {
                    $('#divID').val('');
                    descType='Division';
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#RB').css('background-color', '#ff9900');
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#B74805');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#ff9900');
                }
                else if(val == 'WS')
                {
                    $('#divID').val('');
                    descType='WorkShop';
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#RB').css('background-color', '#ff9900');
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#B74805');
                    $('#HQ').css('background-color', '#ff9900');
                }
                else if(val == 'HQ')
                {
                   
                    $('#divID').val('');
                    $('.buttonZrDetails').show();
                    $('#typeID').val(val);
                    $('#RB').css('background-color', '#ff9900');
                    $('#ZR').css('background-color', '#B74805');
                    $('#PU').css('background-color', '#ff9900');
                    $('#DIV').css('background-color', '#ff9900');
                    $('#WS').css('background-color', '#ff9900');
                    $('#HQ').css('background-color', '#B74805');
                }

                let data = {
                    typ: 'allDetails',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                   let dataZoneWs = response.dataZoneWs;
                   let firstRowAllData = response.firstRowAllData;
                   let secondRowAllData = response.secondRowAllData;
                   let thirdRowData = response.thirdRowData;
                   let pendencyDataCard1 = response.pendencyDataCard1;
                   let pendencyDataCard2 = response.pendencyDataCard2;
                   let allDesignation = response.allDesignation;
                   let overallsummary = response.overallsummary;
                   
                  
                //    let overallTotalCount = response.overallTotalCount;
                //    let overallPendingCount = response.overallPendingCount;
                //    let overallOverdueCount = response.overallOverdueCount;
                //    let overallInspection = response.overallInspection;
                //    let pendingInspection = response.pendingInspection;
                //    let overdueInspection = response.overdueInspection;
                //    let priorityInspection = response.priorityInspection;
                //    let overallPriorityCount = response.overallPriorityCount;

                //    let psStation = response.psStation;
                //    let esStation = response.esStation;
                //    let osStation = response.osStation;
                //    let niStation = response.niStation;
                //    let siStation = response.siStation;
                //    let diStation = response.diStation;

                //    let psSection = response.psSection;
                //    let esSection = response.esSection;
                //    let osSection = response.osSection;
                //    let niSection = response.niSection;
                //    let siSection = response.siSection;
                //    let diSection = response.diSection;

                //    let psTrain = response.psTrain;
                //    let esTrain = response.esTrain;
                //    let osTrain = response.osTrain;
                //    let niTrain = response.niTrain;
                //    let siTrain = response.siTrain;
                //    let diTrain = response.diTrain;

                //    let psOther = response.psOther;
                //    let esOther = response.esOther;
                //    let osOther = response.osOther;
                //    let niOther = response.niOther;
                //    let siOther = response.siOther;
                //    let diOther = response.diOther;

                //    //console.log(overallInspection)
                   let row='';
                        if(dataZoneWs.length>0){
                                 row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                                for (let i = 0; i < dataZoneWs.length; i++) {
                                    if(dataZoneWs[i].location_code == $('#zoneID').val())
                                    {
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: red;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`
                                    }
                                    else{
                                        if(dataZoneWs[i].location_code == $('#divID').val())
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color:red;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                        else 
                                            row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                            <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                            <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                            </span></br>`;
                                }


 
                            }
                            row += `</ul>`;
                            $('#zoneshowhide').show();
                            $('#zoneDetails').empty();
                            $('#zoneDetails').append(row);
                        }
                       
                        row = ``
                        for(let i =0;i<allDesignation.length;i++)  
                        {
                            if($('#searchDesignation').val().includes(String(allDesignation[i].designation_code)))
                                row += `<option value="${allDesignation[i].designation_code}" selected >${allDesignation[i].designation}</option>`;
                            else
                                row += `<option value="${allDesignation[i].designation_code}" >${allDesignation[i].designation}</option>`;
                        }
                        $(`#searchDesignation`).selectpicker("destroy");
                            $('#searchDesignation').empty();
                            $('#searchDesignation').append(row);
                           $('.demo-searchDesignation').selectpicker();
                            $(".demo-searchDesignation").removeClass("dropdown");
                            var button = $(`#copy_searchDesignation .bs-actionsbox .btn-group`);  
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-select-all`).remove();
                            $(`#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all`).css("cssText","background-color : rgb(75, 123, 245)!important; color:white!important;");
                            button.append(`&nbsp; <button  type="button" class="btn btn-default  " style="background-color: rgb(75, 123, 245)!important;color:white!important;" onclick="getDataOfFilter('desig');">Go/Close</button>`)
                            $("#copy_searchDesignation .bs-actionsbox .btn-group .bs-deselect-all").on('click', function() {
                            $('#copy_searchDesignation option').prop("selected", false);
                            getDataOfFilter('desig');
                            });
     

                           document.getElementById('overallInspection').innerHTML = overallsummary[0][0];
                           document.getElementById('pendingInspection').innerHTML = overallsummary[0][1];
                           document.getElementById('overdueInspection').innerHTML = overallsummary[0][2];
                           document.getElementById('priorityInspection').innerHTML = overallsummary[0][3];
                           document.getElementById('overallTotalCount').innerHTML = overallsummary[0][4];
                           document.getElementById('overallPendingCount').innerHTML = overallsummary[0][5];
                           document.getElementById('overallOverdueCount').innerHTML = overallsummary[0][6];
                           document.getElementById('overallPriorityCount').innerHTML = overallsummary[0][7];


                           document.getElementById('otherstotal').firstChild.innerHTML = firstRowAllData[0][0];
                           document.getElementById('otherspending').firstChild.innerHTML = firstRowAllData[0][1];
                           document.getElementById('othersoverdue').firstChild.innerHTML = firstRowAllData[0][2];
                           document.getElementById('passengertotal').firstChild.innerHTML = firstRowAllData[0][3];
                           document.getElementById('passengerpending').firstChild.innerHTML = firstRowAllData[0][4];
                           document.getElementById('passengeroverdue').firstChild.innerHTML = firstRowAllData[0][5];
                           document.getElementById('employeetotal').firstChild.innerHTML = firstRowAllData[0][6];
                           document.getElementById('employeepending').firstChild.innerHTML = firstRowAllData[0][7];
                           document.getElementById('employeeoverdue').firstChild.innerHTML = firstRowAllData[0][8];



                           
                        //    document.getElementById('stationpassenger').firstChild.innerHTML = psStation;
                        //    document.getElementById('stationemployee').firstChild.innerHTML = esStation;
                        //    document.getElementById('stationothers').firstChild.innerHTML = osStation;
                        //    document.getElementById('stationnight').firstChild.innerHTML = niStation;
                        //    document.getElementById('stationsuprise').firstChild.innerHTML = siStation;
                        //    document.getElementById('stationdrive').firstChild.innerHTML = diStation;

                        //    document.getElementById('sectionpassenger').firstChild.innerHTML = psSection;
                        //    document.getElementById('sectionemployee').firstChild.innerHTML = esSection;
                        //    document.getElementById('sectionothers').firstChild.innerHTML = osSection;
                        //    document.getElementById('sectionnight').firstChild.innerHTML = niSection;
                        //    document.getElementById('sectionsuprise').firstChild.innerHTML = siSection;
                        //    document.getElementById('sectiondrive').firstChild.innerHTML = diSection;

                        //    document.getElementById('trainpassenger').firstChild.innerHTML = psTrain;
                        //    document.getElementById('trainemployee').firstChild.innerHTML = esTrain;
                        //    document.getElementById('trainothers').firstChild.innerHTML = osTrain;
                        //    document.getElementById('trainnight').firstChild.innerHTML = niTrain;
                        //    document.getElementById('trainsuprise').firstChild.innerHTML = siTrain;
                        //    document.getElementById('traindrive').firstChild.innerHTML = diTrain;

                        //    document.getElementById('otherspassenger').firstChild.innerHTML = psOther;
                        //    document.getElementById('othersemployee').firstChild.innerHTML = esOther;
                        //    document.getElementById('othersothers').firstChild.innerHTML = osOther;
                        //    document.getElementById('othersnight').firstChild.innerHTML = niOther;
                        //    document.getElementById('otherssuprise').firstChild.innerHTML = siOther;
                        //    document.getElementById('othersdrive').firstChild.innerHTML = diOther;



                           document.getElementById('stationpassenger').firstChild.innerHTML = thirdRowData[0][0];
                           document.getElementById('stationemployee').firstChild.innerHTML = thirdRowData[0][1];
                           document.getElementById('stationothers').firstChild.innerHTML = thirdRowData[0][2];
                           document.getElementById('stationnight').firstChild.innerHTML = thirdRowData[0][3];
                           document.getElementById('stationsuprise').firstChild.innerHTML = thirdRowData[0][4];
                           document.getElementById('stationdrive').firstChild.innerHTML = thirdRowData[0][5];

                           document.getElementById('sectionpassenger').firstChild.innerHTML = thirdRowData[0][6];
                           document.getElementById('sectionemployee').firstChild.innerHTML = thirdRowData[0][7];
                           document.getElementById('sectionothers').firstChild.innerHTML = thirdRowData[0][8];
                           document.getElementById('sectionnight').firstChild.innerHTML = thirdRowData[0][9];
                           document.getElementById('sectionsuprise').firstChild.innerHTML = thirdRowData[0][10];
                           document.getElementById('sectiondrive').firstChild.innerHTML = thirdRowData[0][11];

                           document.getElementById('trainpassenger').firstChild.innerHTML = thirdRowData[0][12];
                           document.getElementById('trainemployee').firstChild.innerHTML = thirdRowData[0][13];
                           document.getElementById('trainothers').firstChild.innerHTML = thirdRowData[0][14];
                           document.getElementById('trainnight').firstChild.innerHTML = thirdRowData[0][15];
                           document.getElementById('trainsuprise').firstChild.innerHTML = thirdRowData[0][16];
                           document.getElementById('traindrive').firstChild.innerHTML = thirdRowData[0][17];

                           document.getElementById('otherspassenger').firstChild.innerHTML = thirdRowData[0][18];
                           document.getElementById('othersemployee').firstChild.innerHTML = thirdRowData[0][19];
                           document.getElementById('othersothers').firstChild.innerHTML = thirdRowData[0][20];
                           document.getElementById('othersnight').firstChild.innerHTML = thirdRowData[0][21];
                           document.getElementById('otherssuprise').firstChild.innerHTML = thirdRowData[0][22];
                           document.getElementById('othersdrive').firstChild.innerHTML = thirdRowData[0][23];

                           document.getElementById('passenger7').firstChild.innerHTML = pendencyDataCard1[0][0];
                           document.getElementById('passenger30').firstChild.innerHTML = pendencyDataCard1[0][1];
                           document.getElementById('passenger90').firstChild.innerHTML = pendencyDataCard1[0][2];
                           document.getElementById('passenger180').firstChild.innerHTML = pendencyDataCard1[0][3];
                           document.getElementById('employee7').firstChild.innerHTML = pendencyDataCard1[0][5];
                           document.getElementById('employee30').firstChild.innerHTML = pendencyDataCard1[0][6];
                           document.getElementById('employee90').firstChild.innerHTML = pendencyDataCard1[0][7];
                           document.getElementById('employee180').firstChild.innerHTML = pendencyDataCard1[0][8];
                           document.getElementById('others7').firstChild.innerHTML = pendencyDataCard1[0][10];
                           document.getElementById('others30').firstChild.innerHTML = pendencyDataCard1[0][11];
                           document.getElementById('others90').firstChild.innerHTML = pendencyDataCard1[0][12];
                           document.getElementById('others180').firstChild.innerHTML = pendencyDataCard1[0][13];

                           document.getElementById('nighttotal').firstChild.innerHTML = secondRowAllData[0][0];
                           document.getElementById('nightpending').firstChild.innerHTML = secondRowAllData[0][1];
                           document.getElementById('nightoverdue').firstChild.innerHTML = secondRowAllData[0][2];
                           document.getElementById('suprisetotal').firstChild.innerHTML = secondRowAllData[0][3];
                           document.getElementById('suprisepending').firstChild.innerHTML = secondRowAllData[0][4];
                           document.getElementById('supriseoverdue').firstChild.innerHTML = secondRowAllData[0][5];
                           document.getElementById('drivetotal').firstChild.innerHTML = secondRowAllData[0][6];
                           document.getElementById('drivepending').firstChild.innerHTML = secondRowAllData[0][7];
                           document.getElementById('driveoverdue').firstChild.innerHTML = secondRowAllData[0][8];
                           
                           document.getElementById('night7').firstChild.innerHTML = pendencyDataCard2[0][0];
                           document.getElementById('night30').firstChild.innerHTML = pendencyDataCard2[0][1];
                           document.getElementById('night90').firstChild.innerHTML = pendencyDataCard2[0][2];
                           document.getElementById('night180').firstChild.innerHTML = pendencyDataCard2[0][3];
                           document.getElementById('suprise7').firstChild.innerHTML = pendencyDataCard2[0][5];
                           document.getElementById('suprise30').firstChild.innerHTML = pendencyDataCard2[0][6];
                           document.getElementById('suprise90').firstChild.innerHTML = pendencyDataCard2[0][7];
                           document.getElementById('suprise180').firstChild.innerHTML = pendencyDataCard2[0][8];
                           document.getElementById('drive7').firstChild.innerHTML = pendencyDataCard2[0][10];
                           document.getElementById('drive30').firstChild.innerHTML = pendencyDataCard2[0][11];
                           document.getElementById('drive90').firstChild.innerHTML = pendencyDataCard2[0][12];
                           document.getElementById('drive180').firstChild.innerHTML = pendencyDataCard2[0][13];
                           document.getElementById('otherspriority').firstChild.innerHTML = firstRowAllData[0][9];
                           document.getElementById('passengerpriority').firstChild.innerHTML = firstRowAllData[0][10];
                           document.getElementById('employeepriority').firstChild.innerHTML = firstRowAllData[0][11];

                           document.getElementById('nightpriority').firstChild.innerHTML = secondRowAllData[0][9];
                           document.getElementById('surprisepriority').firstChild.innerHTML = secondRowAllData[0][10];
                           document.getElementById('drivepriority').firstChild.innerHTML = secondRowAllData[0][11];
                           $('#main').show();
                            $('#secondary').hide();
                           scrollCounter();
                           scrollCounter2();
                           

                        },
                        error: function(err){
                            alert('Some error exists, please contact admin');
                            $('#main').show();
                            $('#secondary').hide();
                        }
                    });

               
   
            }
   


//  date range
var currentdate = new Date();
// Define the minimum allowed date
var minDate = new Date('September 1, 2022');
$("#startDate").daterangepicker({
    minDate: minDate,
    maxDate: currentdate,
    autoApply: true,
    autoUpdateInput: false,
    autoclose: true,
    dateFormat: "dd/mm/yy",
    endDate: currentdate,
    singleDatePicker: true,
    showDropdowns: true,
    changeMonth: true,
    changeYear: true,
    todayHighlight: true,
    clearBtn: true
});

$("#startDate").on('apply.daterangepicker', function (ev, picker) {
    $(this).val(picker.startDate.format('DD/MM/YY'));
    picker.hide();
    getDataOfFilter('All');
});

$("#startDate").on('cancel.daterangepicker', function (ev, picker) {
    $(this).val('');
   
});

$("#endDate").daterangepicker({
    maxDate: currentdate,
    autoApply: true,
    autoUpdateInput: false,
    autoclose: true,
    dateFormat: "dd/mm/yy",
    endDate: currentdate,
    singleDatePicker: true,
    showDropdowns: true,
    changeMonth: true,
    changeYear: true,
    todayHighlight: true,
    clearBtn: true
});

$("#endDate").on('apply.daterangepicker', function (ev, picker) {
    $(this).val(picker.startDate.format('DD/MM/YY'));
    picker.hide();
    getDataOfFilter('All');
});

$("#endDate").on('cancel.daterangepicker', function (ev, picker) {
    $(this).val('');
});
//  date ends
       
</script>
   

<script>



    window.setInterval(run,1000);
function run() {
var prev = $("#rotated li:first-child");
$.unique(prev).each(function(i) {
 $(this).delay(i*600).slideUp(function() {
$(this).appendTo(this.parentNode).slideDown();
 });
});
}
    function scrollCounter()
{
$('.stats-val').each(function () {
 $(this).prop('Counter', 0).animate({
   Counter: Number($(this).text()) },
 {
   duration: 3000,
   easing: 'swing',
   step: function (now) {
     $(this).text(Math.ceil(now));
 }
});
});
}
function scrollCounter2()
{
$('.stats-val2').each(function () {
        // //console.log('demo',$(this).children().text())
 $(this).prop('Counter', 0).animate({
   Counter: Number($(this).text()) },
 {
   duration: 3000,
   easing: 'swing',
   step: function (now) {
     $(this).children().text(Math.ceil(now));
 }
});
});
}
$(document).ready(function(){
    scrollCounter();
    scrollCounter2();
                
    loginRelatedCode(); 

})

function loginRelatedCode()
{
    let login_location_type = '{{login_location_type|safe}}';
    let login_location_code = '{{login_location_code|safe}}';
    let login_parent_location_code = '{{login_parent_location_code|safe}}';
    let dataZoneWs = JSON.parse('{{login_location_list|safe}}');
    
               
    if(login_location_type == 'PU'){
        $("path").removeClass('fillColorClass');
        descType='Production Unit';
        $('.buttonZrDetails').hide();
        $('#typeID').val(login_location_type);
        $('#zoneID').val('');
        $('#divID').val('');
        $('#headerZone').empty();
        $('#headerDivision').empty();
        $('#headerZone').hide();
        $('#headerDivision').hide();

        $('#ZR').css('background-color', '#ff9900');
        $('#RB').css('background-color', '#ff9900');
        $('#PU').css('background-color', '#B74805');
        $('#DIV').css('background-color', '#ff9900');
        $('#WS').css('background-color', '#ff9900');
        $('#HQ').css('background-color', '#ff9900');

        $('#divID').val(login_location_code);
                let row='';
                if(dataZoneWs.length>0){
                            row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                        for (let i = 0; i < dataZoneWs.length; i++) {
                            if(dataZoneWs[i].location_code == $('#zoneID').val())
                            {
                                if(dataZoneWs[i].location_code == $('#divID').val())
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: red;"></i>
                                    <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                else 
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`
                            }
                            else{
                                if(dataZoneWs[i].location_code == $('#divID').val())
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color:red;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                else 
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                        }




                        
                        
                    }
                    row += `</ul>`;
                    $('#zoneshowhide').show();
                    $('#zoneDetails').empty();
                    $('#zoneDetails').append(row);
                }
                $('#headerDivision').show();
                $('#headerDivision').empty();
                div = `<i class="fa fa-angle-right"></i> ${login_location_code} &nbsp;`;
                    $('#headerDivision').append(div);
        
    

    }
    else if(login_location_type == 'RB'){
        $("path").removeClass('fillColorClass');
        descType='Railway Board';
        $('.buttonZrDetails').hide();
        $('#typeID').val(login_location_type);
        $('#zoneID').val('');
        $('#divID').val('');
        $('#headerZone').empty();
        $('#headerDivision').empty();
        $('#headerZone').hide();
        $('#headerDivision').hide();
        $('#RB').css('background-color', '#B74805');
        $('#ZR').css('background-color', '#ff9900');
        $('#PU').css('background-color', '#ff9900');
        $('#DIV').css('background-color', '#ff9900');
        $('#WS').css('background-color', '#ff9900');
        $('#HQ').css('background-color', '#ff9900');
    

    }
    else if(login_location_type == 'ZR')
    {
        $('#headerZone').empty();
        $('#headerDivision').empty();
        $('#headerZone').hide();
        $('#headerDivision').hide();
        $("path").removeClass('fillColorClass');

        $('#zoneID').val('');
        $('#divID').val('');
        $('.buttonZrDetails').show();
        $('#typeID').val(login_location_type);
        $('#RB').css('background-color', '#ff9900');
        $('#ZR').css('background-color', '#B74805');
        $('#PU').css('background-color', '#ff9900');
        $('#DIV').css('background-color', '#ff9900');
        $('#WS').css('background-color', '#ff9900');
        $('#HQ').css('background-color', '#ff9900');

        $("path").removeClass('fillColorClass');
                const dataId = login_location_code;
                let svgclass = dataId+'CLASS';
                $("."+svgclass).addClass('fillColorClass');
                $('#zoneID').val(dataId);
                $('#divID').val('');
                $('#zoneshowhide').hide();
                $('#headerZone').hide();
                $('#headerDivision').hide();
                $('#headerDivision').empty();
                $('#headerZone').empty();
                $('#headerZone').show();
                let div = `<i class="fa fa-angle-right"></i> ${dataId} &nbsp;`;
                $('#headerZone').append(div);
                
    }
    else if(login_location_type == 'DIV')
    {
        $('#divID').val('');
        descType='Division';
        $('.buttonZrDetails').show();
        $('#typeID').val(login_location_type);
        $('#RB').css('background-color', '#ff9900');
        $('#ZR').css('background-color', '#B74805');
        $('#PU').css('background-color', '#ff9900');
        $('#DIV').css('background-color', '#B74805');
        $('#WS').css('background-color', '#ff9900');
        $('#HQ').css('background-color', '#ff9900');
    }
    else if(login_location_type == 'WS')
    {
        $('#divID').val('');
        descType='WorkShop';
        $('.buttonZrDetails').show();
        $('#typeID').val(login_location_type);
        $('#RB').css('background-color', '#ff9900');
        $('#ZR').css('background-color', '#B74805');
        $('#PU').css('background-color', '#ff9900');
        $('#DIV').css('background-color', '#ff9900');
        $('#WS').css('background-color', '#B74805');
        $('#HQ').css('background-color', '#ff9900');
    }
    else if(login_location_type == 'HQ')
    {
        
        $('#divID').val('');
        $('.buttonZrDetails').show();
        $('#typeID').val(login_location_type);
        $('#RB').css('background-color', '#ff9900');
        $('#ZR').css('background-color', '#B74805');
        $('#PU').css('background-color', '#ff9900');
        $('#DIV').css('background-color', '#ff9900');
        $('#WS').css('background-color', '#ff9900');
        $('#HQ').css('background-color', '#B74805');
    }


                if(login_location_type == 'DIV' || login_location_type == 'WS')
                {
                $("path").removeClass('fillColorClass');
                const dataId = login_parent_location_code;
                let svgclass = dataId+'CLASS';
                $("."+svgclass).addClass('fillColorClass');
                $('#zoneID').val(dataId);
                $('#divID').val('');
                $('#zoneshowhide').hide();
                $('#headerZone').hide();
                $('#headerDivision').hide();
                $('#headerDivision').empty();
                $('#headerZone').empty();
                $('#headerZone').show();
                let div = `<i class="fa fa-angle-right"></i> ${dataId} &nbsp;`;
                $('#headerZone').append(div);

                $('#divID').val(login_location_code);
                let row='';
                if(dataZoneWs.length>0){
                            row = `<div style="color: #391a02; margin-left:10px;margin-right:10px;"><b><u>${descType}<u></b></div>`;
                        for (let i = 0; i < dataZoneWs.length; i++) {
                            if(dataZoneWs[i].location_code == $('#zoneID').val())
                            {
                                if(dataZoneWs[i].location_code == $('#divID').val())
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: red;"></i>
                                    <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                else 
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;color:rgb(183, 72, 5)" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`
                            }
                            else{
                                if(dataZoneWs[i].location_code == $('#divID').val())
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color:red;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                                else 
                                    row += `<span class="badge" onclick="showDivision('${dataZoneWs[i].location_code}')" style="font-size: 1.063rem;color:#000080;">
                                    <i class="far fa-hand-point-right" style="color: #000080;"></i>
                                    <span style="cursor: pointer;" title="${dataZoneWs[i].location_description}">${dataZoneWs[i].location_code}</span>
                                    </span></br>`;
                        }




                        
                        
                    }
                    row += `</ul>`;
                    $('#zoneshowhide').show();
                    $('#zoneDetails').empty();
                    $('#zoneDetails').append(row);
                }
                $('#headerDivision').show();
                $('#headerDivision').empty();
                div = `<i class="fa fa-angle-right"></i> ${login_location_code} &nbsp;`;
                    $('#headerDivision').append(div);


            }



}
</script>





<!-- new hyperlink code -->
<script>
function fetchCardData(in_item_insp_flag,in_status_flag)
{
    $('#excelButton').empty();
    let rowdata = `<button onclick="fetchCardData_excel('${in_item_insp_flag}', '${in_status_flag}')"  class="btn btn-success btn" >EXCEL</button>`;
    $('#excelButton').append(rowdata)
    $('#pdfButton').empty();
    let rowdatapdf = `<button onclick="fetchCardData_pdf('${in_item_insp_flag}', '${in_status_flag}')"  class="btn btn-danger btn" >PDF</button>`;
    $('#pdfButton').append(rowdatapdf)
                $('#main').hide();
                $('#secondary').show();
               
                let data = {
                    typ: 'cardData',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#main').show();
                    $('#secondary').hide();
                  
                    $("#table_id_data thead").empty()
                        $("#table_id_data thead").append(`<tr><th style="width: 10%; text-align: center;"> S.No  </th>
                            <th style="width: 10%; text-align: center;">Insp. Date </th>
                        <th style="width: 10%; text-align: center;">Insp. Note No. </th>
                        <th style="width: 25%; text-align: center;">Insp. Observation </th>
                        <th style="width: 25%; text-align: center;">Marked Officer </th>
                        <th style="width: 20%; text-align: center;">Location</th></tr>`)

               
                       
                        if (newTableDt instanceof $.fn.dataTable.Api)
                        {
                            newTableDt.destroy();
                           
                        }
                        $("#table_id_data tbody").empty();
                        let allData = response.allDatadet, row = '', i = 0;
                        
                        for(i;i<allData.length;i++)
                        {
                            row += `<tr><td>${i+1}</td><td>${formatDate(allData[i][0])}</td>
                                <td style="text-align:left;"><a href="/inspectionReportHtml/${allData[i][2]}/" target = "blank">${allData[i][3]}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][4]}">${truncate30Char(allData[i][4])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][5]}">${truncate30Char(allData[i][5])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][8]}">${truncate30Char(allData[i][9])}</a></td>
                                </tr>`;
                        }
                        $("#table_id_data tbody").append(row);
                       
                        
                        let typeId = $('#typeID').val(); 
                        let zoneId = $('#zoneID').val();
                        let divId = $('#divID').val();
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        if(in_item_insp_flag == 'PS')
                            card_type = 'Rly User & Train Operation';
                        else if(in_item_insp_flag == 'ES')
                            card_type = 'Employee Safety';
                        else if(in_item_insp_flag == 'OTH')
                            card_type = 'Other Items';
                        else if(in_item_insp_flag == 'NI')
                            card_type = 'Night Inspection';
                        else if(in_item_insp_flag == 'SI')
                            card_type = 'Surprise Inspection';
                        else if(in_item_insp_flag == 'PS')
                            card_type = 'Drive Inspection';
                        
                        if(in_status_flag == '7')
                            card_data = 'Greater than 7 days';
                        else if(in_status_flag == '30')
                            card_data = 'Greater than 30 days';
                        else if(in_status_flag == '180')
                            card_data = 'Greater than 180 days';
                        else if(in_status_flag == '90')
                            card_data = 'Greater than 90 days';
                        else 
                            card_data = in_status_flag.substring(0,1) + (in_status_flag.substring(1,in_status_flag.length)).toLowerCase();
                       
                        if(typeId == 'IR'){
                        $("#demo").text('IR : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo").text('RB : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        ////console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo").text(typeId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(zoneId+'/'+divId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
               
                       
                       
                $("#btnmodal").click();
                newTableDt =  $('#table_id_data').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            ////console.log("datefrom1",e1)
                            ////console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            ////console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            // //console.log("doc",doc)
                            // //console.log("doc",doc.defaultStyle)
                            // //console.log("doc2",doc.styles.tableBodyEven)
                            // //console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       

                },
                error : function(err)
                {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    alert('some error exists')
                }
            });
}


function fetchCardData_details(in_item_insp_flag,check,ty,in_status_flag)
{
    $('#excelButton').empty();
    let rowdata = `<button onclick="fetchCardData_details_excel('${in_item_insp_flag}','${check}','${ty}', '${in_status_flag}')"  class="btn btn-success btn" >EXCEL</button>`;
    $('#excelButton').append(rowdata)
    $('#pdfButton').empty();
    let rowdatapdf = `<button onclick="fetchCardData_details_pdf('${in_item_insp_flag}','${check}','${ty}', '${in_status_flag}')"  class="btn btn-danger btn" >PDF</button>`;
    $('#pdfButton').append(rowdatapdf)
    document.getElementById('modaldismis1').click();
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
                $('#main').hide();
                $('#secondary').show();
                
                        
                let data = {
                    typ: 'cardData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#main').show();
                    $('#secondary').hide();
                  
                    $("#table_id_data thead").empty()
                        $("#table_id_data thead").append(`<tr><th style="width: 10%; text-align: center;"> S.No  </th>
                            <th style="width: 10%; text-align: center;">Insp. Date </th>
                        <th style="width: 10%; text-align: center;">Insp. Note No. </th>
                        <th style="width: 25%; text-align: center;">Insp. Observation </th>
                        <th style="width: 25%; text-align: center;">Marked Officer </th>
                        <th style="width: 20%; text-align: center;">Location</th></tr>`)

               
                       
                        if (newTableDt instanceof $.fn.dataTable.Api)
                        {
                            newTableDt.destroy();
                           
                        }
                        $("#table_id_data tbody").empty();
                        let allData = response.allDatadet, row = '', i = 0;
                        
                        for(i;i<allData.length;i++)
                        {
                           
                            row += `<tr><td>${i+1}</td><td>${formatDate(allData[i][0])}</td>
                                <td style="text-align:left;"><a href="/inspectionReportHtml/${allData[i][2]}/" target = "blank">${allData[i][3]}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][4]}">${truncate30Char(allData[i][4])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][5]}">${truncate30Char(allData[i][5])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][8]}">${truncate30Char(allData[i][9])}</a></td>
                                </tr>`;
                        }
                        $("#table_id_data tbody").append(row);
                       
                        
                        if(check == undefined)
                        {
                        let typeId = $('#typeID').val(); 
                        let zoneId = $('#zoneID').val();
                        let divId = $('#divID').val();
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        if(in_item_insp_flag == 'PS')
                            card_type = 'Rly User & Train Operation';
                        else if(in_item_insp_flag == 'ES')
                            card_type = 'Employee Safety';
                        else if(in_item_insp_flag == 'OTH')
                            card_type = 'Other Items';
                        else if(in_item_insp_flag == 'NI')
                            card_type = 'Night Inspection';
                        else if(in_item_insp_flag == 'SI')
                            card_type = 'Surprise Inspection';
                        else if(in_item_insp_flag == 'PS')
                            card_type = 'Drive Inspection';
                        
                        if(in_status_flag == '7')
                            card_data = 'Greater than 7 days';
                        else if(in_status_flag == '30')
                            card_data = 'Greater than 30 days';
                        else if(in_status_flag == '180')
                            card_data = 'Greater than 180 days';
                        else if(in_status_flag == '90')
                            card_data = 'Greater than 90 days';
                        else 
                            card_data = in_status_flag.substring(0,1) + (in_status_flag.substring(1,in_status_flag.length)).toLowerCase();
                        
                        
                        
                            if(GLOBALLOC == 'T')
                        {
                            if(check == 'null')
                            zoneId=ex + '/Others';
                            else
                            zoneId=check;
                        }
                        if(typeId == 'IR'){
                        $("#demo").text('IR : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo").text('RB : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        //console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo").text(typeId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(divId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                    }
                    else{
                        let typeId = ex; 
                        let zoneId = zone;
                        let divId = division;
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        if(in_item_insp_flag == 'PS')
                            card_type = 'Rly User & Train Operation';
                        else if(in_item_insp_flag == 'ES')
                            card_type = 'Employee Safety';
                        else if(in_item_insp_flag == 'OTH')
                            card_type = 'Other Items';
                        else if(in_item_insp_flag == 'NI')
                            card_type = 'Night Inspection';
                        else if(in_item_insp_flag == 'SI')
                            card_type = 'Surprise Inspection';
                        else if(in_item_insp_flag == 'PS')
                            card_type = 'Drive Inspection';
                        
                        if(in_status_flag == '7')
                            card_data = 'Greater than 7 days';
                        else if(in_status_flag == '30')
                            card_data = 'Greater than 30 days';
                        else if(in_status_flag == '180')
                            card_data = 'Greater than 180 days';
                        else if(in_status_flag == '90')
                            card_data = 'Greater than 90 days';
                        else 
                            card_data = in_status_flag.substring(0,1) + (in_status_flag.substring(1,in_status_flag.length)).toLowerCase();
                       

                            if(GLOBALLOC == 'T')
                        {
                            if(check == 'null')
                            zoneId=ex + '/Others';
                            else
                            zoneId=check;
                        }
                        if(typeId == 'IR'){
                        $("#demo").text('IR : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo").text('RB : List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        //console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo").text(typeId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(divId+ ' : List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                    }
                       
                       
                $("#btnmodal").click();
                newTableDt =  $('#table_id_data').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            //console.log("datefrom1",e1)
                            //console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            //console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            //console.log("doc",doc)
                            //console.log("doc",doc.defaultStyle)
                            //console.log("doc2",doc.styles.tableBodyEven)
                            //console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       

                },
                error : function(err)
                {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    alert('some error exists')
                }
            });

}

function backbuttondata(in_item_insp_flag)
{
    checkModalClick = 0;
    lprevCheck = prevCheck[prevCheck.length - 2]
    lprevTy = prevTy[prevTy.length - 2]

    if(lprevCheck == '')
    {

        prevCheck = prevCheck.splice(-0,1)
        prevTy = prevTy.splice(0,-1)
        fetchdata2_data(in_item_insp_flag,undefined,undefined,'y');
        
    }
    else
    {
   
        prevCheck = prevCheck.splice(0,-1)
        prevTy = prevTy.splice(0,-1)
        fetchdata2_data(in_item_insp_flag,lprevCheck,lprevTy,'y');
    }

}
var prevCheck = [''], prevTy = [''], checkModalClick = 1, GLOBALLOC = 'F';


function fetchdata2_data(in_item_insp_flag,check,ty,df)
{
    GLOBALLOC = 'F';
    $('#excelButton1').empty();
    let rowdata = `<button onclick="fetchdata2_data_excel('${in_item_insp_flag}', '${check}','${ty}','${df}')"  class="btn btn-success btn" >EXCEL</button>`;
    $('#excelButton1').append(rowdata)
    $('#pdfButton1').empty();
    let rowdatapdf = `<button onclick="fetchdata2_data_pdf('${in_item_insp_flag}', '${check}','${ty}','${df}')"  class="btn btn-danger btn" >PDF</button>`;
    $('#pdfButton1').append(rowdatapdf)
    
    $('#backbutton').empty();
    if(check != undefined)
    {
       
        let backBtn = ` <button type="button" class="btn btn-secondary btn-sm" onclick="backbuttondata('${in_item_insp_flag}')" value="Back">Back</button>`
        $('#backbutton').append(backBtn);
        if(df != 'y' && prevCheck[prevCheck.length-1] != check)
        {
        prevCheck.push(check);
        prevTy.push(ty);
        }
    }
    else {
        prevCheck = [''];
        prevTy = [''];
    }

    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;

    
    
                $('#main').hide();
                $('#secondary').show();
                in_status_flag = 'PENDING';
                let data = {
                    typ: 'tableData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#main').show();
                    $('#secondary').hide();
                  
                    $("#table_id_data1 thead").empty()
                   
                $("#table_id_data1 thead").append(`
                    <tr>
                        <th style="width: 20%; text-align: center;" colspan="1" rowspan="2"> Rly/Org.</th>
                        <th style="width: 16%; text-align: center;" colspan="2">Total Count </th>
                        <th style="width: 16%; text-align: center;" colspan="2">Pending Count </th>
                        <th style="width: 16%; text-align: center;" colspan="2">Overdue Count</th>
                        <th style="width: 32%; text-align: center;" colspan="4">Pendency Count</th>
                   
                    </tr>
                    <tr>
                    
                    <th style="width: 8%; text-align: center;">Insp </th>
                    <th style="width: 8%; text-align: center;">Item</th>
                    <th style="width: 8%; text-align: center;">Insp </th>
                    <th style="width: 8%; text-align: center;">Item</th>
                    <th style="width: 8%; text-align: center;">Insp </th>
                    <th style="width: 8%; text-align: center;">Item</th>

                    <th style="width: 8%; text-align: center;"> >7 Days </th>
                    <th style="width: 8%; text-align: center;"> >30 Days</th>
                    <th style="width: 8%; text-align: center;"> >90 Days </th>
                    <th style="width: 8%; text-align: center;"> >180 Days</th>
                    </tr>
                `)
               
                       
                        if (newTableDt instanceof $.fn.dataTable.Api)
                        {
                            newTableDt.destroy();
                           
                        }
                        $("#table_id_data1 tbody").empty();
                        let allData = response.allDatadet, row = '', i = 0;
                        for(i;i<allData.length;i++)
                        {
                            if(response.location_data_type == '1')
                                GLOBALLOC = 'T';
                            row += `<tr>
                                <td style="text-align:left;">

                                    <a href="#" 
                                    
                                    onclick="fetchdata2_data('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}')" 
                                    
                                    class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][0]}">
                                    ${truncate30Char2(allData[i][0])}</a></td>

                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_insp('${allData[i][0]}','${allData[i][11]}','TOTAL','${in_item_insp_flag}')">${allData[i][1]}</a></td>


                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_details('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}','TOTAL')">${allData[i][2]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_insp('${allData[i][0]}','${allData[i][11]}','PENDING','${in_item_insp_flag}')">${allData[i][3]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_details('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}','PENDING')">${allData[i][4]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_insp('${allData[i][0]}','${allData[i][11]}','OVERDUE','${in_item_insp_flag}')">${allData[i][5]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_details('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}','OVERDUE')">${allData[i][6]}</a></td>
                                
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_details('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}','7')">${allData[i][7]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_details('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}','30')">${allData[i][8]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_details('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}','90')">${allData[i][9]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchCardData_details('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}','180')">${allData[i][10]}</a></td>

                                </tr>`;
                        
                            // else 
                            // row += `<tr>
                            //     <td style="text-align:left;">

                            //         <a href="#" 
                                    
                            //         onclick="fetchdata2_data('${in_item_insp_flag}','${allData[i][0]}','${allData[i][11]}')" 
                                    
                            //         class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][0]}">
                            //         ${truncate30Char2(allData[i][0])}</a></td>

                            //     <td style="text-align:left;">${allData[i][1]}</td>


                            //     <td style="text-align:left;">${allData[i][2]}</td>
                            //     <td style="text-align:left;">${allData[i][3]}</td>
                            //     <td style="text-align:left;">${allData[i][4]}</td>
                            //     <td style="text-align:left;">${allData[i][5]}</td>
                            //     <td style="text-align:left;">${allData[i][6]}</td>
                                
                            //     <td style="text-align:left;">${allData[i][7]}</td>
                            //     <td style="text-align:left;">${allData[i][8]}</td>
                            //     <td style="text-align:left;">${allData[i][9]}</td>
                            //     <td style="text-align:left;">${allData[i][10]}</td>

                            //     </tr>`;
                        
                        
                            }
                        $("#table_id_data1 tbody").append(row);
                        
                        
                        let typeId = ex; 
                        let zoneId = zone;
                        let divId = division;
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        if(in_item_insp_flag == 'PS')
                            card_type = 'Rly User & Train Operation';
                        else if(in_item_insp_flag == 'ES')
                            card_type = 'Employee Safety';
                        else if(in_item_insp_flag == 'OTH')
                            card_type = 'Other Items';
                        else if(in_item_insp_flag == 'NI')
                            card_type = 'Night Inspection';
                        else if(in_item_insp_flag == 'SI')
                            card_type = 'Surprise Inspection';
                        else if(in_item_insp_flag == 'PS')
                            card_type = 'Drive Inspection';

                        in_type = SSTOTYPE;

                        if(in_type == 'SEM')
                            card_data = 'Section';
                        else if(in_type == 'STM')
                            card_data = 'Station';
                        else if(in_type == 'TRN')
                            card_data = 'Train';
                        else if(in_type == 'OTH')
                            card_data = 'Others';
                        else
                            card_data = 'All'
                       
                        if(typeId == 'IR'){
                        $("#demo1").text('IR : List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo1").text('RB : List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo1").text('PU: List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        //console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo1").text('PU/'+divId+ ': List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo1").text(typeId+ ' : List of '+card_type+' Count for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo1").text(zoneId+ ' : List of '+card_type+' Count for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo1").text(divId+ ' : List of '+card_type+' Count for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
               
                       
                if(check == undefined && checkModalClick == 1)      
                    {
                        
                        $("#btnmodal1").click();

                    }
                    checkModalClick = 1;
                newTableDt =  $('#table_id_data1').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            //console.log("datefrom1",e1)
                            //console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            //console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            //console.log("doc",doc)
                            //console.log("doc",doc.defaultStyle)
                            //console.log("doc2",doc.styles.tableBodyEven)
                            //console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       

                },
                error : function(err)
                {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    alert('some error exists')
                }
            });
}

function fetchCardData_insp(check,ty,in_status_flag,in_item_insp_flag)
{
    $('#excelButton3').empty();
    let rowdata = `<button onclick="fetchCardData_insp_excel('${check}', '${ty}','${in_status_flag}','${in_item_insp_flag}')"  class="btn btn-success btn" >EXCEL</button>`;
    $('#excelButton3').append(rowdata)
    $('#pdfButton3').empty();
    let rowdatapdf = `<button onclick="fetchCardData_insp_pdf('${check}', '${ty}','${in_status_flag}','${in_item_insp_flag}')"  class="btn btn-danger btn" >PDF</button>`;
    $('#pdfButton3').append(rowdatapdf)
    
    document.getElementById('modaldismis1').click();
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
    
    
                    let data = {
                    typ: 'inspData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_status_flag:in_status_flag,
                    in_item_type_flag:in_item_insp_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    }

                    $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#main').show();
                    $('#secondary').hide();
                  
                    $("#table_id_data3 thead").empty()
                        $("#table_id_data3 thead").append(`<tr> <th style="width: 5%;">S.No.</th>
                        <th style="width: 8%;">Insp. Date</th>
                        <th style="width: 10%;">Insp. Note No.</th>
                        <th style="width: 5%;">Insp. Type</th>
                        <th style="width: 35%;">Insp. Title</th>
                        <th style="width: 10%;">Marked Officer</th>
                        <th style="width: 6%;">Rly./Org.</th>
                        <th style="width: 6%;">Div./Unit</th>
                        <th style="width: 5%;">Location</th></tr>`)

               
                       
                        if (newTableDt instanceof $.fn.dataTable.Api)
                        {
                            newTableDt.destroy();
                           
                        }
                        $("#table_id_data3 tbody").empty();
                        let allData = response.allDatadet, row = '', i = 0;
                        //console.log('hhh',allData)
                        for(i;i<allData.length;i++)
                        {    
                            row += `<tr><td>${i+1}</td><td>${formatDate(allData[i][0])}</td>
                                <td style="text-align:left;"><a href="/inspectionReportHtml/${allData[i][1]}/" target = "blank">${allData[i][2]}</a></td>
                                <td>General</td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][4]}">${truncate30Char(allData[i][4])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][5]}">${truncate30Char(allData[i][5])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][6]}">${truncate30Char(allData[i][6])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][7]}">${truncate30Char(allData[i][7])}</a></td>
                                
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][9]}">${truncate30Char(allData[i][8])}</a></td>
                                </tr>`;
                        }
                        $("#table_id_data3 tbody").append(row);
                       
                       
                        let typeId = ex; 
                        let zoneId = zone;
                        let divId = division;
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        if(in_item_insp_flag == 'PS')
                            card_type = 'Rly User & Train Operation';
                        else if(in_item_insp_flag == 'ES')
                            card_type = 'Employee Safety';
                        else if(in_item_insp_flag == 'OTH')
                            card_type = 'Other Items';
                        else if(in_item_insp_flag == 'NI')
                            card_type = 'Night Inspection';
                        else if(in_item_insp_flag == 'SI')
                            card_type = 'Surprise Inspection';
                        else if(in_item_insp_flag == 'PS')
                            card_type = 'Drive Inspection';
                        
                        
                        card_data = in_status_flag.substring(0,1) + (in_status_flag.substring(1,in_status_flag.length)).toLowerCase();
                       
                        
                        if(GLOBALLOC == 'T')
                        {
                            if(check == 'null')
                            zoneId=ex + '/Others';
                            else
                            zoneId=check;
                        }
                        if(typeId == 'IR'){
                        $("#demo3").text('IR : Inspection List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo3").text('RB : Inspection List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo3").text('PU: Inspection List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        //console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo3").text('PU/'+divId+ ': Inspection List of '+card_type+' '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo3").text(typeId+ ' : Inspection List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo3").text(zoneId+ ' : Inspection List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo3").text(divId+ ' : Inspection List of '+card_type+' '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                  
                       
                $("#btnmodal3").click();
                newTableDt =  $('#table_id_data3').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            //console.log("datefrom1",e1)
                            //console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            //console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            //console.log("doc",doc)
                            //console.log("doc",doc.defaultStyle)
                            //console.log("doc2",doc.styles.tableBodyEven)
                            //console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       

                },
                error : function(err)
                {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    alert('some error exists')
                }
            });
}


function allinspectionreport_data(categ,in_status_flag)
{
    
                let data = {
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    categ:categ,
                    in_status_flag:in_status_flag
                    }


   window.open ("{% url 'overallPendencyReport' %}?data="+JSON.stringify(data));

}

function fetchdata_firstCard(in_item_insp_flag,in_type)
{
    $('#excelButton').empty();
    let rowdata = `<button onclick="fetchdata_firstCard_excel('${in_item_insp_flag}', '${in_type}')"  class="btn btn-success btn" >EXCEL</button>`;
    $('#excelButton').append(rowdata)
    $('#pdfButton').empty();
    let rowdatapdf = `<button onclick="fetchdata_firstCard_pdf('${in_item_insp_flag}', '${in_type}')"  class="btn btn-danger btn" >PDF</button>`;
    $('#pdfButton').append(rowdatapdf)
                $('#main').hide();
                $('#secondary').show();
                in_status_flag = 'PENDING';
                let data = {
                    typ: 'cardData',
                    typ_ssto : in_type,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    $("#table_id_data thead").empty()
                        $("#table_id_data thead").append(`<tr><th style="width: 10%; text-align: center;"> S.No  </th>
                            <th style="width: 10%; text-align: center;">Insp. Date </th>
                        <th style="width: 10%; text-align: center;">Insp. Note No. </th>
                        <th style="width: 25%; text-align: center;">Insp. Observation </th>
                        <th style="width: 25%; text-align: center;">Marked Officer </th>
                        <th style="width: 20%; text-align: center;">Location</th></tr>`)

               
                       
                        if (newTableDt instanceof $.fn.dataTable.Api)
                        {
                            newTableDt.destroy();
                           
                        }
                        $("#table_id_data tbody").empty();
                        let allData = response.allDatadet, row = '', i = 0;
                        
                        for(i;i<allData.length;i++)
                        {
                            row += `<tr><td>${i+1}</td><td>${formatDate(allData[i][0])}</td>
                                <td style="text-align:left;"><a href="/inspectionReportHtml/${allData[i][2]}/" target = "blank">${allData[i][3]}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][4]}">${truncate30Char(allData[i][4])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][5]}">${truncate30Char(allData[i][5])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][8]}">${truncate30Char(allData[i][9])}</a></td>
                                </tr>`;
                        }
                        $("#table_id_data tbody").append(row);
                       
                        
                        let typeId = $('#typeID').val(); 
                        let zoneId = $('#zoneID').val();
                        let divId = $('#divID').val();
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        if(in_item_insp_flag == 'PS')
                            card_type = 'Rly User & Train Operation';
                        else if(in_item_insp_flag == 'ES')
                            card_type = 'Employee Safety';
                        else if(in_item_insp_flag == 'OTH')
                            card_type = 'Other Items';
                        else if(in_item_insp_flag == 'NI')
                            card_type = 'Night Inspection';
                        else if(in_item_insp_flag == 'SI')
                            card_type = 'Surprise Inspection';
                        else if(in_item_insp_flag == 'PS')
                            card_type = 'Drive Inspection';
                        
                        if(in_type == 'SEM')
                            card_data = 'Section';
                        else if(in_type == 'STM')
                            card_data = 'Station';
                        else if(in_type == 'TRN')
                            card_data = 'Train';
                        else 
                            card_data = 'Others';
                       
                        if(typeId == 'IR'){
                        $("#demo").text('IR : Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo").text('RB : Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        //console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo").text(typeId+ ' : Pending List of '+card_type+' for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : Pending List of '+card_type+' for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(zoneId+'/'+divId+ ' : Pending List of '+card_type+' for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
               
                       
                       
                $("#btnmodal").click();
                newTableDt =  $('#table_id_data').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            //console.log("datefrom1",e1)
                            //console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            //console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            //console.log("doc",doc)
                            //console.log("doc",doc.defaultStyle)
                            //console.log("doc2",doc.styles.tableBodyEven)
                            //console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       

                },
                error : function(err)
                {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    alert('some error exists')
                }
            });

}

function backbuttondata2()
{
    // //console.log(prevCheck2,prevTy2)
    checkModalClick2 = 0;
    lprevCheck = prevCheck2[prevCheck2.length - 2]
    lprevTy = prevTy2[prevTy2.length - 2]

    if(lprevCheck == '')
    {

        prevCheck2 = prevCheck2.splice(-0,1)
        prevTy2 = prevTy2.splice(0,-1)
        My_Card_data_firstCard(undefined,undefined,'y');
        
    }
    else
    {
   
        prevCheck2 = prevCheck2.splice(0,-1)
        prevTy2 = prevTy2.splice(0,-1)
        My_Card_data_firstCard(lprevCheck,lprevTy,'y');
    }
    // //console.log(prevCheck2,prevTy2)

}
var prevCheck2 = [''], prevTy2 = [''], checkModalClick2 = 1;


function My_Card_data_firstCard(check,ty,df)
{
    GLOBALLOC = 'F';
    $('#excelButton2').empty();
    let rowdata = `<button onclick="My_Card_data_firstCard_excel()"  class="btn btn-success btn" >EXCEL</button>`;
    $('#excelButton2').append(rowdata)
    $('#pdfButton2').empty();
    let rowdatapdf = `<button onclick="My_Card_data_firstCard_pdf()"  class="btn btn-danger btn" >PDF</button>`;
    $('#pdfButton2').append(rowdatapdf)
               
  
    $('#backbutton2').empty();
    if(check != undefined)
    {
       
        let backBtn = ` <button type="button" class="btn btn-secondary btn-sm" onclick="backbuttondata2()" value="Back">Back</button>`
        $('#backbutton2').append(backBtn);
        if(df != 'y' && prevCheck2[prevCheck2.length-1] != check)
        {
        prevCheck2.push(check);
        prevTy2.push(ty);
        }
    }
    else {
        prevCheck2 = [''];
        prevTy2 = [''];
    }

    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
    // alert(ex+' '+zone+' '+division)
    
    
                $('#main').hide();
                $('#secondary').show();
                in_status_flag = 'PENDING';
                let data = {
                    typ: 'tableData2',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#main').show();
                    $('#secondary').hide();
                  
                    $("#table_id_data2 thead").empty()
                   
                $("#table_id_data2 thead").append(`
                    <tr>
                        <th style="width: 20%; text-align: center;" colspan="1" rowspan="2"> Rly/Org.</th>
                        <th style="width: 20%; text-align: center;" colspan="6">Station Count </th>
                        <th style="width: 20%; text-align: center;" colspan="6">Section Count </th>
                        <th style="width: 20%; text-align: center;" colspan="6">Train Count</th>
                        <th style="width: 20%; text-align: center;" colspan="6">Others Count</th>
                   
                    </tr>
                    <tr>
                    
                    <th style="width: 3%; text-align: center;">R&T </th>
                    <th style="width: 3%; text-align: center;">ES</th>
                    <th style="width: 5%; text-align: center;">OTH </th>
                    <th style="width: 3%; text-align: center;">SI</th>
                    <th style="width: 3%; text-align: center;">NI </th>
                    <th style="width: 3%; text-align: center;">SD</th>

                    <th style="width: 3%; text-align: center;">R&T </th>
                    <th style="width: 3%; text-align: center;">ES</th>
                    <th style="width: 5%; text-align: center;">OTH </th>
                    <th style="width: 3%; text-align: center;">SI</th>
                    <th style="width: 3%; text-align: center;">NI </th>
                    <th style="width: 3%; text-align: center;">SD</th>
                    <th style="width: 3%; text-align: center;">R&T </th>
                    <th style="width: 3%; text-align: center;">ES</th>
                    <th style="width: 5%; text-align: center;">OTH </th>
                    <th style="width: 3%; text-align: center;">SI</th>
                    <th style="width: 3%; text-align: center;">NI </th>
                    <th style="width: 3%; text-align: center;">SD</th>
                    <th style="width: 3%; text-align: center;">R&T </th>
                    <th style="width: 3%; text-align: center;">ES</th>
                    <th style="width: 5%; text-align: center;">OTH </th>
                    <th style="width: 3%; text-align: center;">SI</th>
                    <th style="width: 3%; text-align: center;">NI </th>
                    <th style="width: 3%; text-align: center;">SD</th>

                   
                    </tr>
                `)
                //fetchdata_firstCard('PS','STM')
                       
                        if (newTableDt instanceof $.fn.dataTable.Api)
                        {
                            newTableDt.destroy();
                           
                        }
                        $("#table_id_data2 tbody").empty();
                        let allData = response.allDatadet, row = '', i = 0;
                       
                        for(i;i<allData.length;i++)
                        {
                            if(response.location_data_type != '0')
                            {
                                GLOBALLOC = 'T';
                            }
                            row += `<tr>
                                <td style="text-align:left;">

                                    <a href="#" 
                                    onclick="My_Card_data_firstCard('${allData[i][0]}','${allData[i][1]}')" 
                                    class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][0]}">
                                    ${truncate30Char2(allData[i][0])}</a></td>

                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('PS','STM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][2]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('ES','STM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][3]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('OTH','STM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][4]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('SI','STM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][5]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('NI','STM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][6]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('DI','STM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][7]}</a></td>
                                
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('PS','SEM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][8]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('ES','SEM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][9]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('OTH','SEM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][10]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('SI','SEM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][11]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('NI','SEM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][12]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('DI','SEM','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][13]}</a></td>
                                
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('PS','TRN','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][14]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('ES','TRN','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][15]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('OTH','TRN','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][16]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('SI','TRN','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][17]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('NI','TRN','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][18]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('DI','TRN','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][19]}</a></td>
                                
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('PS','OTH','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][20]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('ES','OTH','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][21]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('OTH','OTH','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][22]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('SI','OTH','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][23]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('NI','OTH','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][24]}</a></td>
                                <td style="text-align:left;"><a href="#" onclick="fetchdata_firstCard_details('DI','OTH','${allData[i][0]}','${allData[i][1]}')" class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="Click to View Details"> ${allData[i][25]}</a></td>
                                
                               

                                </tr>`;
                                

                           
                            // row += `<tr>
                            //     <td style="text-align:left;">

                            //         <a href="#" 
                            //         onclick="My_Card_data_firstCard('${allData[i][0]}','${allData[i][1]}')" 
                            //         class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][0]}">
                            //         ${truncate30Char2(allData[i][0])}</a></td>

                            //     <td style="text-align:left;">${allData[i][2]}</td>
                            //     <td style="text-align:left;">${allData[i][3]}</td>
                            //     <td style="text-align:left;"> ${allData[i][4]}</td>
                            //     <td style="text-align:left;">${allData[i][5]}</td>
                            //     <td style="text-align:left;">${allData[i][6]}</td>
                            //     <td style="text-align:left;">${allData[i][7]}</td>
                                
                            //     <td style="text-align:left;">${allData[i][8]}</td>
                            //     <td style="text-align:left;">${allData[i][9]}</td>
                            //     <td style="text-align:left;"> ${allData[i][10]}</td>
                            //     <td style="text-align:left;">${allData[i][11]}</td>
                            //     <td style="text-align:left;">${allData[i][12]}</td>
                            //     <td style="text-align:left;">${allData[i][13]}</td>
                                
                            //     <td style="text-align:left;">${allData[i][14]}</td>
                            //     <td style="text-align:left;">${allData[i][15]}</td>
                            //     <td style="text-align:left;"> ${allData[i][16]}</td>
                            //     <td style="text-align:left;">${allData[i][17]}</td>
                            //     <td style="text-align:left;">${allData[i][18]}</td>
                            //     <td style="text-align:left;">${allData[i][19]}</td>
                                
                            //     <td style="text-align:left;">${allData[i][20]}</td>
                            //     <td style="text-align:left;">${allData[i][21]}</td>
                            //     <td style="text-align:left;"> ${allData[i][22]}</td>
                            //     <td style="text-align:left;">${allData[i][23]}</td>
                            //     <td style="text-align:left;">${allData[i][24]}</td>
                            //     <td style="text-align:left;">${allData[i][25]}</td>
                                
                               

                            //     </tr>`;
                                

                            }
                        $("#table_id_data2 tbody").append(row);
                        
                        
                        let typeId = ex; 
                        let zoneId = zone;
                        let divId = division;
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        // if(in_item_insp_flag == 'PS')
                        //     card_type = 'Rly User & Train Operation';
                        // else if(in_item_insp_flag == 'ES')
                        //     card_type = 'Employee Safety';
                        // else if(in_item_insp_flag == 'OTH')
                        //     card_type = 'Other Items';
                        // else if(in_item_insp_flag == 'NI')
                        //     card_type = 'Night Inspection';
                        // else if(in_item_insp_flag == 'SI')
                        //     card_type = 'Surprise Inspection';
                        // else if(in_item_insp_flag == 'PS')
                        //     card_type = 'Drive Inspection';
                        card_type =''
                        in_type = SSTOTYPE;

                        if(in_type == 'SEM')
                            card_data = 'Section';
                        else if(in_type == 'STM')
                            card_data = 'Station';
                        else if(in_type == 'TRN')
                            card_data = 'Train';
                        else if(in_type == 'OTH')
                            card_data = 'Others';
                        else
                            card_data = 'All'
                       
                        if(typeId == 'IR'){
                        $("#demo2").text('IR : Pending List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo2").text('RB : Pending List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo2").text('PU: Pending List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        //console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo2").text('PU/'+divId+ ': Pending List of '+card_type+' Count for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo2").text(typeId+ ' : Pending List of '+card_type+' Count for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo2").text(zoneId+ ' : Pending List of '+card_type+' Count for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo2").text(divId+ ' : Pending List of '+card_type+' Count for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
               
                       
                if(check == undefined && checkModalClick2 == 1)      
                    {
                        
                        $("#btnmodal2").click();

                    }
                    checkModalClick2 = 1;
                newTableDt =  $('#table_id_data2').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            //console.log("datefrom1",e1)
                            //console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            //console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            //console.log("doc",doc)
                            //console.log("doc",doc.defaultStyle)
                            //console.log("doc2",doc.styles.tableBodyEven)
                            //console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       

                },
                error : function(err)
                {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    alert('some error exists')
                }
            });
}


function fetchdata_firstCard_details(in_item_insp_flag,in_type,check,ty)
{
    $('#excelButton').empty();
    let rowdata = `<button onclick="fetchdata_firstCard_details_excel('${in_item_insp_flag}', '${in_type}','${check}','${ty}')"  class="btn btn-success btn" >EXCEL</button>`;
    $('#excelButton').append(rowdata)
    $('#pdfButton').empty();
    let rowdatapdf = `<button onclick="fetchdata_firstCard_details_pdf('${in_item_insp_flag}', '${in_type}','${check}','${ty}')"  class="btn btn-danger btn" >PDF</button>`;
    $('#pdfButton').append(rowdatapdf)
    document.getElementById('modaldismis2').click();
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
                $('#main').hide();
                $('#secondary').show();
                in_status_flag = 'PENDING';
                let data = {
                    typ: 'cardData',
                    typ_ssto : in_type,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                }
                $.ajax({
                method: "POST",
                url: "{% url 'pendencyDashboard' %}",
                dataType: 'json',
                data: data,
                success: function (response) {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    $("#table_id_data thead").empty()
                        $("#table_id_data thead").append(`<tr><th style="width: 10%; text-align: center;"> S.No  </th>
                            <th style="width: 10%; text-align: center;">Insp. Date </th>
                        <th style="width: 10%; text-align: center;">Insp. Note No. </th>
                        <th style="width: 25%; text-align: center;">Insp. Observation </th>
                        <th style="width: 25%; text-align: center;">Marked Officer </th>
                        <th style="width: 20%; text-align: center;">Location</th></tr>`)

               
                       
                        if (newTableDt instanceof $.fn.dataTable.Api)
                        {
                            newTableDt.destroy();
                           
                        }
                        $("#table_id_data tbody").empty();
                        let allData = response.allDatadet, row = '', i = 0;
                        
                        for(i;i<allData.length;i++)
                        {
                            row += `<tr><td>${i+1}</td><td>${formatDate(allData[i][0])}</td>
                                <td style="text-align:left;"><a href="/inspectionReportHtml/${allData[i][2]}/" target = "blank">${allData[i][3]}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][4]}">${truncate30Char(allData[i][4])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][5]}">${truncate30Char(allData[i][5])}</a></td>
                                <td style="text-align:left;"><a class="js-btn-tooltip " data-toggle="tooltip" data-placement="top" title="${allData[i][8]}">${truncate30Char(allData[i][9])}</a></td>
                                </tr>`;
                        }
                        $("#table_id_data tbody").append(row);
                       
                        
                        let typeId = ex; 
                        let zoneId = zone;
                        let divId = division;
                        let searchDate = $('#startDate').val();
                        let searchDateTo = $('#endDate').val();
                        
                        if(in_item_insp_flag == 'PS')
                            card_type = 'Rly User & Train Operation';
                        else if(in_item_insp_flag == 'ES')
                            card_type = 'Employee Safety';
                        else if(in_item_insp_flag == 'OTH')
                            card_type = 'Other Items';
                        else if(in_item_insp_flag == 'NI')
                            card_type = 'Night Inspection';
                        else if(in_item_insp_flag == 'SI')
                            card_type = 'Surprise Inspection';
                        else if(in_item_insp_flag == 'PS')
                            card_type = 'Drive Inspection';
                        
                        if(in_type == 'SEM')
                            card_data = 'Section';
                        else if(in_type == 'STM')
                            card_data = 'Station';
                        else if(in_type == 'TRN')
                            card_data = 'Train';
                        else 
                            card_data = 'Others';
                        
                        
                            if(GLOBALLOC == 'T')
                        {
                            if(check == 'null')
                            zoneId=ex + '/Others';
                            else
                            zoneId=check;
                        }
                        if(typeId == 'IR'){
                        $("#demo").text('IR : Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'RB'){
                        $("#demo").text('RB : Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if (typeId == 'PU' && divId == ''){
                        $("#demo").text('PU: Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        //console.log(divId)
                        }
                        else if (typeId == 'PU' && divId !== '') {
                        $("#demo").text('PU/'+divId+ ': Pending List of '+card_type+' for '+card_data+' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(typeId == 'ZR' && zoneId == ''){
                            $("#demo").text(typeId+ ' : Pending List of '+card_type+' for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId == ''){
                            $("#demo").text(zoneId+ ' : Pending List of '+card_type+' for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
                        else if(divId !== ''){
                            $("#demo").text(divId+ ' : Pending List of '+card_type+' for '+card_data+ ' From '+searchDate+' To '+searchDateTo)
                        }
               
                       
                       
                $("#btnmodal").click();
                newTableDt =  $('#table_id_data').DataTable({
                    "iDisplayLength": 10,
                   
                    // "ordering": false,
                    "lengthChange": true,
                    "lengthMenu": [10,15, 30, 50, 75, 100],
                    dom: 'Blfrtip',
                   
                    buttons: [
                    {
                        extend: 'excel',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                           
                            var e2 = $('#dateto').val()
                            if(typeId == 'All'){
                                var stre ='Rly/org : List of '+card_type+' ('+card_data+') From '+searchDate+' To '+searchDateTo
                            }
                            else{
                                var stre=typeId+' : List of '+card_type+' ('+card_data+ ') From '+searchDate+' To '+searchDateTo
                            }
                            return stre
                        },
                        // orientation: 'landscape',
                        // pageSize: 'LEGAL',
                       
                    },
                    {
                        extend:'pdfHtml5',
                        title: function (e) {
                            var e1 = $('#datefrom').val()
                            var e2 = $('#dateto').val()
                            //console.log("datefrom1",e1)
                            //console.log("datefrom1",datefrom)
                            var stre = 'Inspection Report from ' + e1 + ' to ' + e2;
                            //console.log('insode inspection report',stre)
                            return stre
                        },
                        exportOptions: {
                            alignment: 'right',
                            },
                        customize: function ( doc ) {
                            //console.log("doc",doc)
                            //console.log("doc",doc.defaultStyle)
                            //console.log("doc2",doc.styles.tableBodyEven)
                            //console.log("doc3",doc.styles.tableBodyOdd)
                            doc.content.splice(0,1);
                           
                            doc.styles.tableBodyEven.alignment = 'center';
                            doc.styles.tableBodyOdd.alignment = 'center';
                        },
                        text :'Pdf',
                        title:"Inspection Report ",
                                    fontSize : 'LEGAL'
                       
                    },
                    {
                        extend: 'print',
                        footer:true,
                        title: function (e) {
                            var s1 = $('#datefrom').val()
                            var s2 = $('#dateto').val()
                            var str = 'Inspection Report from ' + s1 + ' to ' + s2 +' for '+mydata;
                            return str
                        },
                        customize: function ( doc ) {
                            $(doc.document.body).find('tableid').css('text-align', 'center');

                            //  $(doc.document.body).find('table').css('border', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-left', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-top', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-right', '1px solid #000');
                            //  $(doc.document.body).find('table td').css('border-bottom', '1px solid #000');
                            },
                            "pagingType": "simple",
                            "sEmptyTable": 'No data available in table',

                            // "bSort": true,

                            "oLanguage": {
                                "sInfoEmpty": "Page 0 of 0 ",
                            },
                            "language": {
                                "info": "Page _PAGE_ of _PAGES_",
                                "paginate": {
                                    "previous": "Prev",
                                },
                            },
                    },
                    ],
                });
       

                },
                error : function(err)
                {
                    $('#main').show();
                    $('#secondary').hide();
                   
                    alert('some error exists')
                }
            });

}



function formatDate(date) {
    var d = new Date(date),
      month = '' + (d.getMonth() + 1),
      day = '' + d.getDate(),
      year = d.getFullYear();

    if (month.length < 2)
      month = '0' + month;
    if (day.length < 2)
      day = '0' + day;
    let newyear = String(year).slice(2, 5)
    return [day, month, newyear].join('/');
}

function truncate30Char(str)
{   
    
    if(str == null)
    {
        return ''
    }

    str = str.trim();
    if(str.length>30)
    {
        return (str.substring(0,30) + '...');
    }
    else{
        return str;
    }
}

function truncate30Char2(str)
{   
    
    if(str == null)
    {
        return 'Other'
    }

    str = str.trim();
    if(str.length>30)
    {
        return (str.substring(0,30) + '...');
    }
    else{
        return str;
    }
}
var newTableDt = null;

function fetchCardData_excel(in_item_insp_flag,in_status_flag)
{

               
                let data = $.param({
                    typ: 'cardData',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "pendencyDashboard_excel" %}?' + data;

    // Redirect to the final URL
    window.location.href = finalURL;

            }

function fetchCardData_pdf(in_item_insp_flag,in_status_flag)
{
               
                let data = $.param({
                    typ: 'cardData',
                    typ_ssto : SSTOTYPE,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "pendencyDashboard_pdf" %}?' + data+'&_blank';

    // Redirect to the final URL
    window.open( finalURL);

            }
function fetchdata_firstCard_excel(in_item_insp_flag,in_type)
{

                in_status_flag = 'PENDING';
                let data = $.param({
                    typ: 'cardData',
                    typ_ssto : in_type,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "fetchdata_firstCard_excel" %}?' + data;

    // Redirect to the final URL
    window.location.href = finalURL;
            }


function fetchdata_firstCard_pdf(in_item_insp_flag,in_type)
{

                in_status_flag = 'PENDING';
                let data =$.param({
                    typ: 'cardData',
                    typ_ssto : in_type,
                    typeId: $('#typeID').val(),  
                    zoneId: $('#zoneID').val(),
                    divId: $('#divID').val(),
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "fetchdata_firstCard_pdf" %}?' + data+'&_blank';

    // Redirect to the final URL
    window.open( finalURL);
            }
function fetchdata2_data_excel(in_item_insp_flag,check,ty,df)
{

    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
                in_status_flag = 'PENDING';
                let data = $.param({
                    typ: 'tableData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "fetchdata2_data_excel" %}?' + data;

    // Redirect to the final URL
    window.location.href = finalURL;
            }


function fetchdata2_data_pdf(in_item_insp_flag,check,ty,df)
{

    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
                in_status_flag = 'PENDING';
                let data = $.param({
                    typ: 'tableData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "fetchdata2_data_pdf" %}?' + data+'&_blank';

    // Redirect to the final URL
    window.open( finalURL);
            }

function My_Card_data_firstCard_excel(check,ty,df)
{
   
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
                in_status_flag = 'PENDING';
                let data = $.param({
                    typ: 'tableData2',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "My_Card_data_firstCard_excel" %}?' + data;

    // Redirect to the final URL
    window.location.href = finalURL;
            }

function My_Card_data_firstCard_pdf(check,ty,df)
{
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
                in_status_flag = 'PENDING';
                let data = $.param({
                    typ: 'tableData2',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "My_Card_data_firstCard_pdf" %}?' + data+'&_blank';

    // Redirect to the final URL
    window.open( finalURL);
            }

            
function fetchdata_firstCard_details_excel(in_item_insp_flag,in_type,check,ty)
{
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;

                in_status_flag = 'PENDING';
                let data = $.param({
                    typ: 'cardData',
                    typ_ssto : in_type,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                })
                let finalURL = '{% url "fetchdata_firstCard_details_excel" %}?' + data;

                // Redirect to the final URL
                window.location.href = finalURL;
            }

function fetchdata_firstCard_details_pdf(in_item_insp_flag,in_type,check,ty)
{
    document.getElementById('modaldismis2').click();
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
                in_status_flag = 'PENDING';
                let data = $.param({
                    typ: 'cardData',
                    typ_ssto : in_type,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "fetchdata_firstCard_details_pdf" %}?' + data+'&_blank';

                // Redirect to the final URL
                window.open( finalURL);
            }

function fetchCardData_insp_excel(check,ty,in_status_flag,in_item_insp_flag)
{
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
    
    
                    let data = $.param({
                    typ: 'inspData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_status_flag:in_status_flag,
                    in_item_type_flag:in_item_insp_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    });
                    let finalURL = '{% url "fetchCardData_insp_excel" %}?' + data;

                // Redirect to the final URL
                window.location.href = finalURL;
                }

function fetchCardData_insp_pdf(check,ty,in_status_flag,in_item_insp_flag)
{
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
    
    
                    let data = $.param({
                    typ: 'inspData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_status_flag:in_status_flag,
                    in_item_type_flag:in_item_insp_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                    });
                    let finalURL = '{% url "fetchCardData_insp_pdf" %}?' + data+'&_blank';

                // Redirect to the final URL
                window.open( finalURL);
                }


function fetchCardData_details_excel(in_item_insp_flag,check,ty,in_status_flag)
{
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
  
                let data = $.param({
                    typ: 'cardData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "fetchCardData_insp_excel" %}?' + data;

                // Redirect to the final URL
                window.location.href = finalURL;
            }

function fetchCardData_details_pdf(in_item_insp_flag,check,ty,in_status_flag)
{
    let ex = $('#typeID').val();
    let zone = $('#zoneID').val();
    let division = $('#divID').val();
    if(ty != undefined)
        ex = ty
    if(ty == 'DIV' || ty == 'WS')
        division = check;
    if(ty == 'PU' || ty == 'ZR' || ty == 'RB')
        zone = check;
  
                let data = $.param({
                    typ: 'cardData',
                    typ_ssto : SSTOTYPE,
                    typeId: ex,  
                    zoneId: zone,
                    divId: division,
                    searchDate : $('#startDate').val(),
                    searchDateTo:$('#endDate').val(),
                    searchDepartment : JSON.stringify($('#searchDepartment').val()),
                    searchDesignation : JSON.stringify($('#searchDesignation').val()),
                    searchLevel : JSON.stringify($('#searchLevel').val()),
                    officerType: officerType,
                    in_item_insp_flag:in_item_insp_flag,
                    in_status_flag:in_status_flag,
                    GLOBALLOC:GLOBALLOC,
                    GLOBALLOCVAL: check,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                });
                let finalURL = '{% url "fetchCardData_insp_pdf" %}?' + data+'&_blank';

                // Redirect to the final URL
                window.open( finalURL);
            }


</script>
    </body>
{% endblock %}