{% extends 'base.html' %}
{% block content %}
{% load static %}
<!DOCTYPE html>
<html lang="en">


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rating</title>
  <script src="{% static '/js/jquery-3.4.1.min.js' %}"></script>
  <script src="{% static '/js/popper.min.js' %}"></script>
  <script src="{% static '/js/Chart.min.js' %}"></script>
  <script src="{% static '/js/jquery-3.3.1.slim.min.js' %}"></script>
  <script src="{% static '/js/bootstrap.min.js' %}"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
  <script src="{% static '/js/jquery-ui.js' %}"></script>
  <script src="{% static '/js/jquery-1.12.4.js' %}"></script>
  <script src="{% static '/js/select2.min.js' %}"></script>
  <link rel="stylesheet" type="text/css" href="{% static '/css/select2.min.css' %}" />
  <script src="{% static '/js/moment.min.js' %}"></script>
  <script src="{% static '/js/jquery-3.3.1.js' %}"></script>
  <script src="{% static '/js/sweetalert.min.js' %}"></script>
  <script src="{% static '/js/jquery.min.js' %}"></script>
  <script src="{% static '/js/bootstrap.min1.js' %}"></script>
  <script src="{% static '/js/jquery.min1.js' %}"></script>
  <script src="{% static '/js/jquery-ui.min.js' %}"></script>
  <script src="{% static '/js/jspdf.min.js' %}"></script>
  <script src="{% static '/DataTables/datatables.min.js' %}"></script>
  <link rel="stylesheet" type="text/css" href="{% static '/DataTables/datatables.min.css' %}" />



  <link rel="stylesheet" type="text/css" href="{% static '/css/bootstrap.min.css' %}" />
  <link rel="stylesheet" type="text/css" href="{% static '/css/jquery-ui.css' %}" />

  <script src="{% static '/js/jquery.timepicker.min.js' %}"></script>
  <link rel="stylesheet" type="text/css" href="{% static '/css/jquery.timepicker.min.css' %}" />

  <!-- swasti link -->

  <script type="text/javascript" src="{% static '/daterangepicker-master/moment.min.js'%}"></script>
  <script type="text/javascript" src="{% static '/datepicker-master/moment.min.js'%}"></script>
  <script type="text/javascript" src="{% static '/daterangepicker-master/daterangepicker.js'%}"></script>

  <link rel="stylesheet" type="text/css" href="{%static '/daterangepicker-master/daterangepicker.css'%}" />
  <!-- <link href="https://cdnjs.cl
  ps://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"> -->

  <link rel="stylesheet" type="text/css" href="{% static '/css/forms_common.css' %}" />

</head>
<style>
  input {
    border: 1px solid transparent;
    background-color: #f1f1f1;
    padding: 10px;
    font-size: 16px;
  }

  input[type=text] {
    background-color: #f1f1f1;
    width: 100%;
  }


  .autocomplete-items {
    position: absolute;
    border: 1px solid #d4d4d4;
    border-bottom: none;
    border-top: none;
    z-index: 99;
    /*position the autocomplete items to be the same width as the container:*/
    top: 100%;
    left: 0;
    right: 0;
  }

  .autocomplete-items div {
    padding: 10px;
    cursor: pointer;
    background-color: #fff;
    border-bottom: 1px solid #d4d4d4;
  }

  /*when hovering an item:*/
  .autocomplete-items div:hover {
    background-color: #e9e9e9;
  }

  /*when navigating through the items using the arrow keys:*/
  .autocomplete-active {
    background-color: DodgerBlue !important;
    color: #ffffff;
  }


</style>

<style>


/* use display:inline-flex to prevent whitespace issues. alternatively, you can put all the children of .rating-group on a single line */
.rating-group {
  display: inline-flex;
}

/* make hover effect work properly in IE */
.rating__icon {
  pointer-events: none;
}

/* hide radio inputs */
.rating__input {
 position: absolute !important;
 left: -9999px !important;
}

/* set icon padding and size */
.rating__label {
  cursor: pointer;
  /* if you change the left/right padding, update the margin-right property of .rating__label--half as well. */
  padding: 0 0.1em;
  font-size: 1rem;
}

/* add padding and positioning to half star labels */
.rating__label--half {
  padding-right: 0;
  margin-right: -1.25em;
  z-index: 2;
}

/* set default star color */
.rating__icon--star {
  color: orange;
}

/* set color of none icon when unchecked */
.rating__icon--none {
  color: #eee;
}

/* if none icon is checked, make it red */
.rating__input--none:checked + .rating__label .rating__icon--none {
  color: red;
}

/* if any input is checked, make its following siblings grey */
.rating__input:checked ~ .rating__label .rating__icon--star {
  color: #ddd;
}


</style>

<!-- Style for wrap class -->

<style>
  .wrap.active {
  display: block;
  visibility: visible;
  box-shadow: 2px 3px 16px silver;
  transition: all 600ms;
  transform: translateY(0px);
  transition: all 0.5s;
}
.wrap {
  position: fixed;
  overflow: hidden;
  top: 10%;
  right: 10%;
  bottom: 85px;
  left: 10%;
  padding: 12px;
  display: block !important;
  border-radius: 4px;
  transform: translateY(20px);
  transition: all 0.5s;
  visibility: hidden;
  z-index: 9999;
  height: 85vh;
}

.wrap-1.active {
  display: block;
  visibility: visible;
  box-shadow: 2px 3px 16px silver;
  transition: all 600ms;
  transform: translateY(0px);
  transition: all 0.5s;
}
.wrap-1 {
  position: fixed;
  overflow: hidden;
  top: 10%;
  right: 10%;
  bottom: 85px;
  left: 10%;
  padding: 12px;
  display: block !important;
  border-radius: 4px;
  transform: translateY(20px);
  transition: all 0.5s;
  visibility: hidden;
  z-index: 9999;
  height: 85vh;
}
.wrap.active .content,.wrap-1.active .content  {
  position: relative;
  z-index: 1;
  opacity: 1;
  transition: all 600ms cubic-bezier(0.55, 0.055, 0.675, 0.19);
}
.wrap .content, .wrap-1 .content {
  opacity: 0;
}
.wrap.active:before, .wrap-1.active:before {
  height: 2000px;
  width: 2000px;
  border-radius: 50%;
  top: 50%;
  left: 50%;
  margin-left: -1000px;
  margin-top: -1000px;
  display: block;
  -webkit-transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
  transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
}
.wrap:before, .wrap-1:before {
  position: fixed;
  width: 1px;
  height: 1px;
  background: white;
  content: "";
  bottom: 10px;
  left: 50%;
  top: 95%;
  color: #fff;
  border-radius: 50%;
  -webkit-transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
  transition: all 600ms cubic-bezier(0.215, 0.61, 0.355, 1);
}
.wrap::-webkit-scrollbar, .wrap-1::-webkit-scrollbar {
  width: 10px;  /* Remove scrollbar space */
  background: #dedede;
}
/* Optional: show position indicator in red */
.wrap::-webkit-scrollbar-thumb,.wrap-1::-webkit-scrollbar-thumb {
  background: #FF0000;
}
</style>


<body>
  <script type="text/javascript">
    $(".sidebar").addClass('close');
</script>
    <div>
        <h3 id="h6" class="report_heading">Performance Rating</h3>
    </div>

    <div class="container">
      {% if selType == 'Insp' %}
        <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" data-toggle="tab" href="#defaultId" onclick="setTypeValue('inspectionType');">Based on Inspection Type</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-toggle="tab" href="#defaultId" onclick="setTypeValue('categoryType');">Based on Inspection Type and Category Type</a>
            </li>
          </ul>

          <div class="tab-content">
            <div id="defaultId" class="container-fluid  tab-pane active">
             <br>
      
              <table style="width: 100%;" class="table table-sm table-hover table-bordered table-data" id="show_details" >
                <thead>
                  <tr>
                    <th style="width:10%;" rowspan="2">Inspection Type</th>
                    <th style="width:10%;" rowspan="2">Actor Type</th>
                    <th style="width:40%;text-align: center;" colspan="4">Best 5</th>
                    <th style="width:40%;text-align: center;" colspan="4"> Worst 5</th>
                  </tr>
                  <tr>
                    <th style="width:10%;">Actor Value</th>
                    <th style="width:10%;">Total Inspected/ Total Score Per Inspection</th>
                    <th style="width:10%;">Score Obtained</th>
                    <th style="width:10%;">Average</th>

                    <th style="width:10%;">Actor Value</th>
                    <th style="width:10%;">Total Inspected/ Total Score Per Inspection</th>
                    <th style="width:10%;">Score Obtained</th>
                    <th style="width:10%;">Average</th>
                  </tr>
                </thead>
                <tbody id="details121">
                  {% for i in performance %}
                  <tr> 
                    {% if i.inspChk == '1' %}
                    <td style="width:10%;" rowspan="{{i.actlen}}">{{i.insp}}</td>
                    {% endif %}

                    {% if i.achk == '1' %}
                    <td style="width:10%;" rowspan="{{i.len}}">
                      <a onclick="openAllPerformance('{{i.insp}}','{{i.actor}}')" href="#">{{i.actor}}</a> 
                    
                    </td>
                    {% endif %}

                    <td style="width:10%;">{{i.bvalue}}</td>
                    <td style="width:10%;">{{i.bdiffInsp}} / 
                      <a onclick="getAllQuestions('{{i.actor}}','{{i.insp}}')" href="#">{{i.bsperinsp}}</a>
                    
                    </td>
                    <td style="width:10%;">{{i.bposScore}}</td>
                    <td style="width:10%;">{{i.bavg}}</td>
                    <td style="width:10%;">{{i.wvalue}}</td>
                    <td style="width:10%;">{{i.wdiffInsp}} / {{i.wsperinsp}}</td>
                    <td style="width:10%;">{{i.wposScore}}</td>
                    <td style="width:10%;">{{i.wavg}}</td>
                  </tr>
                  {% endfor %} 
                </tbody>
              </table>
            </div>
          </div>
      {% else %}
      <ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
          <a class="nav-link" data-toggle="tab" href="#defaultId" onclick="setTypeValue('inspectionType');">Based on Inspection Type</a>
        </li>
        <li class="nav-item">
          <a class="nav-link active" data-toggle="tab" href="#defaultId" onclick="setTypeValue('categoryType');">Based on Inspection Type and Category Type</a>
        </li>
      </ul>

      <div class="tab-content">
        <div id="defaultId" class="container-fluid  tab-pane active">
          <form id="form" hidden>
            <div class="container inpt-container mt-5" id="filterForm">
              <div class="row">
                <div class="col-lg-2">
                  <div class="form-group">
                    <label class="lbl-caption">Date Wise</label>
                    <input readonly type="text" autocomplete="off" placeholder="Select Date Range"
                      class="form-control dateofInsp" name="dateofInsp" id="date1">
                  </div>
                </div>
  
                <div class="col-lg-2">
                  <div class="form-group">
                    <label class="lbl-caption">Reported By</label>
                    <select class="form-control" data-live-search="true" id="reportedby" data-actions-box="true">
                      <option value="Select">All</option>
                      {% for i in rep_by %}
                      <option value="{{i.designation}}">{{i.designation}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
  
                <div class="col-lg-2">
                  <div class="form-group">
                    <label class="lbl-caption">Action By</label>
                    <select class="form-control" data-live-search="true" id="actionby" data-actions-box="true">
                      <option value="Select">All</option>
                      {% for i in desg_no %}
                      <option value="{{i.designation}}">{{i.designation}}</option>
                      {% endfor %}
                    </select>
                  </div>
                </div>
  
                <div class="col-lg-2">
                  <div class="form-group">
                    <label class="lbl-caption">Priority</label>
                    <select class="form-control" id="prio" data-live-search="true">
                      <option value="Select">All</option>
                      <option value="Low">Low</option>
                      <option value="High">High</option>
                      <option value="Medium">Medium</option>
                    </select>
                  </div>
                </div>
  
                <div class="col-lg-2">
                  <div class="form-group autocomplete">
                    <label id="inspcode" class="lbl-caption">Status</label>
                    <select class="form-control" id="status" data-live-search="true" data-actions-box="true">
                      <option value="Select">All</option>
                      <option value="Pending">Pending</option>
                      <option value="Closed">Closed</option>
                    </select>
                  </div>
                </div>
  
                <div class="col-lg-2 col-md-12 col-sm-12 ">
                  <div class="row text-center">
                    <div class="form-group mx-auto">
                      <div class="btn-toolbar mx-1" role="toolbar">
                        <div class="btn-group" role="group">
                          <button type="button" class="btn btn-warning btn-sm" type="reset" id="btnReset"
                            style="margin-top:15px ;white-space: normal; word-wrap: break-word;" value="submit"
                            onclick="searchCompliance()">Continue</button>
                          <button type="button" class="btn btn-secondary btn-sm" type="reset" id="btnReset"
                            style="margin-top:15px ;white-space: normal; word-wrap: break-word;" value="submit"
                            onclick="myFunction()">Reset</button>
                        </div>
                      </div>
  
                      <div class="btn-toolbar mx-1 " role="toolbar">
                        <div class="btn-group" role="group">
                          <button type="button" name="submitpdf" id="submitpdf"
                            style="margin-top:15px ;white-space: normal; word-wrap: break-word;"
                            class="btn btn-danger btn-sm" value="PDF" onclick="pdfShow()">PDF <i
                              class="fa fa-file-pdf"></i></button>
                          <button type="button" name="submitexcel"
                            style="margin-top:15px ;white-space: normal; word-wrap: break-word;" id="submitexcel"
                            class="btn btn-success btn-sm" value="excel" onclick="excelShow()">Excel <i
                              class="fa fa-file-excel"></i></button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
  
              </div>
            </div>
          </form>
  
          <div class="container mt-5" hidden>
            <div class="row"
              style="background-image: radial-gradient(circle farthest-side, #fceabb, #f8b500);  color: black ;font-weight: bold;height: 40px; vertical-align: middle;">
              <div class="col-lg-6 my-1">
                <div class="row ml-1">
                  Show
                  <div class="col-lg-5">
                    <select name="category" class="form-control-sm" id="selectedCategory" style="width:100%;">
                      <option value="" selected="selected" disabled>Select</option>
                      <option>10</option>
                      <option>50</option>
                    </select>
                  </div>
                  Entries
                </div>
              </div>
  
              <div class="col-lg-6 my-1">
                <div class="row float-right mr-2">
                  <button class="btn btn-sm bg-white mr-2" style="height:30px; margin-top: 2px;" type="button"
                    id="filterButton" value="filter" onclick="show_filters(this.val)">
                    <i class="fa fa-filter fa-sm"></i>
                    Toggle Filter
                  </button>
  
                  <div class="form-inline float-right">
                    <div>
                      <input type="text" class="form-control form-control-sm" id="myInput" placeholder="Search Text...">
                    </div>
                    <div>
                      <i class="fa-solid fa-print my-2 mx-2" onclick="window.print();"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
  
          <table style="width: 100%;" class="table table-sm table-hover table-bordered table-data" id="show_details">
            <thead>
              <tr>
                <th style="width:10%;">Inspection Type</th>
                <!-- <th style="width:5%;">Forward</th> -->

                <th  style="width:10%;">Category</th>
                <th style="width:10%;">Actor Type</th>
                <th style="width:20%;">Actor Value</th>

                <th style="width:20%;">Total Inspected/ Total Score Per Inspection</th>
                <th style="width:5%;">Score Obtained</th>
                <th style="width:5%;">Average</th>

                <th style="width:20%;">Rating (out of 10)</th>
              </tr>
            </thead>
            <tbody id="details121">
              {% for i in performance %}
              <tr> 
                <td style="width:10%;">{{i.insp}}</td>
                <!-- <td style="width:5%;">
                  <a href="https://wa.me/+917004257936?text=Your Average Score is - {{i.avg}}"> <img alt="Chat on WhatsApp" src="WhatsAppButtonGreenLarge.png" title="Single Send" /></a>
                  <a href="https://wa.me/?text=Your Average Score is - {{i.avg}}"> <img alt="Chat on WhatsApp" src="WhatsAppButtonGreenLarge.png" title="Multiple Send" /></i></a>
                
                </td> -->
                <td style="width:10%;">{{i.category}}</td>
                <td style="width:10%;">{{i.actor}}</td>
                <td style="width:20%;">{{i.value}}</td>

                <td style="width:20%;">{{i.diffInsp}} / {{i.sperinsp}}</td>
                <td style="width:5%;">{{i.posScore}}</td>
                <td style="width:5%;">{{i.avg}}</td>

                <td style="width:20%;">
                  <div id="half-stars-example" >
                    <div class="rating-group" >
                        <input class="rating__input rating__input--none" name="rating2{{forloop.counter}}" id="rating2-0" value="0" type="radio" {% if i.rating == '0' %} checked {% endif %}>
                        <label aria-label="0 stars" class="rating__label" for="rating2-0"  disabled>&nbsp;</label>
                        <label aria-label="0.5 stars" class="rating__label rating__label--half" for="rating2-05"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-05" value="0.5" type="radio"  disabled {% if i.rating == '0.5' %} checked {% endif %}>
                        <label aria-label="1 star" class="rating__label" for="rating2-10"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-10" value="1" type="radio" disabled {% if i.rating == '1' %} checked {% endif %}>
                        <label aria-label="1.5 stars" class="rating__label rating__label--half" for="rating2-15"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-15" value="1.5" type="radio" disabled {% if i.rating == '1.5' %} checked {% endif %}>
                        <label aria-label="2 stars" class="rating__label" for="rating2-20"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-20" value="2" type="radio" disabled {% if i.rating == '2' %} checked {% endif %}>
                        <label aria-label="2.5 stars" class="rating__label rating__label--half" for="rating2-25"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-25" value="2.5" type="radio" disabled {% if i.rating == '2.5' %} checked {% endif %}>
                        <label aria-label="3 stars" class="rating__label" for="rating2-30"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-30" value="3" type="radio" disabled {% if i.rating == '3' %} checked {% endif %}>
                        <label aria-label="3.5 stars" class="rating__label rating__label--half" for="rating2-35"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-35" value="3.5" type="radio" disabled {% if i.rating == '3.5' %} checked {% endif %}>
                        <label aria-label="4 stars" class="rating__label" for="rating2-40"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-40" value="4" type="radio" disabled {% if i.rating == '4' %} checked {% endif %}>
                        <label aria-label="4.5 stars" class="rating__label rating__label--half" for="rating2-45"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-45" value="4.5" type="radio" disabled {% if i.rating == '4.5' %} checked {% endif %}>
                        <label aria-label="5 stars" class="rating__label" for="rating2-50"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-50" value="5" type="radio" disabled {% if i.rating == '5' %} checked {% endif %}>
                     <label aria-label="5.5 stars" class="rating__label rating__label--half" for="rating2-55"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-55" value="5.5" type="radio" disabled {% if i.rating == '5.5' %} checked {% endif %}>
                      <label aria-label="6 stars" class="rating__label" for="rating2-60"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-60" value="6" type="radio" disabled {% if i.rating == '6' %} checked {% endif %}>
                
                        <label aria-label="6.5 stars" class="rating__label rating__label--half" for="rating2-65"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-65" value="6.5" type="radio" disabled {% if i.rating == '6.5' %} checked {% endif %}>
                      <label aria-label="7 stars" class="rating__label" for="rating2-70"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-70" value="7" type="radio" disabled {% if i.rating == '7' %} checked {% endif %}>
                
                        <label aria-label="7.5 stars" class="rating__label rating__label--half" for="rating2-75"><i class="rating__icon rating__icon--star fa fa-star-half"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-75" value="7.5" type="radio" disabled {% if i.rating == '7.5' %} checked {% endif %}>
                      <label aria-label="8 stars" class="rating__label" for="rating2-80"><i class="rating__icon rating__icon--star fa fa-star"></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-80" value="8" type="radio" disabled {% if i.rating == '8' %} checked {% endif %}>
                
                        <label aria-label="8.5 stars" class="rating__label rating__label--half" for="rating2-85" ><i class="rating__icon rating__icon--star fa fa-star-half" ></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-85" value="8.5" type="radio" disabled {% if i.rating == '8.5' %} checked {% endif %}>
                      <label aria-label="9 stars" class="rating__label" for="rating2-90" ><i class="rating__icon rating__icon--star fa fa-star" ></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-90" value="9" type="radio" disabled {% if i.rating == '9' %} checked {% endif %}>
                
                        <label aria-label="9.5 stars" class="rating__label rating__label--half" for="rating2-95" ><i class="rating__icon rating__icon--star fa fa-star-half" ></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-95" value="9.5" type="radio"   disabled {% if i.rating == '9.5' %} checked {% endif %}>
                      <label aria-label="10 stars" class="rating__label" for="rating2-100" disabled><i class="rating__icon rating__icon--star fa fa-star" ></i></label>
                        <input class="rating__input" name="rating2{{forloop.counter}}" id="rating2-100" value="10" type="radio" disabled {% if i.rating == '10' %} checked {% endif %}>
                      </div>
                
                </div>
                  
                  
                  
                  </td>
              </tr>
              {% endfor %} </tbody>
          </table>
        </div>
      </div>
      {% endif %}
    </div>



<form method="post">
  {%csrf_token%}
  <input type="submit" name="submit" value="inspectionType" id="inspectionType" hidden>
  <input type="submit" name="submit" value="categoryType" id="categoryType" hidden>
  <input type="hidden" name="typeValue" value="{{typeValue}}" id="typeValue" >
</form>



<div class="wrap">
  <div class="content">
    <button class="btn btn-danger" onclick="closePpln();">&times;</button>
    <iframe src="" style="width:100%;height:82vh;border:0px;" id="frmDash"></iframe>
  </div>
</div>


    <script>

function getAllQuestions(id,insp)
{
    let actor = id;
    urls='/openAllQuestions/'+String(actor)+'/'+String(insp)
    
    $("#frmDash").attr("src",urls);
    $(".wrap").toggleClass('active');
}

  function openAllPerformance(insp,actor){
   
    urls='/openAllPerformance/'+String(insp)+'/'+String(actor)
    
    $("#frmDash").attr("src",urls);
    $(".wrap").toggleClass('active');
  }
      function closePpln()
    {
        $(".wrap").toggleClass('active');
    }


      function setTypeValue(val)
      {
        if(val != $('#typeValue').val())
        {
          $('#typeValue').val(val);
          document.getElementById(val).click();
        }
      }


      function show_filters(val) {
        $('#filterForm').toggle();
      }
      
      $(function () {
        var currentdate = new Date();
        $(".dateofInsp").daterangepicker({
          maxDate: currentdate,
          autoApply: true,
          autoUpdateInput: false,
          autoclose: true,
          dateFormat: "dd/mm/yy",
          endDate: "currentdate",
          changeMonth: true,
          changeYear: true,
          todayHighlight: true,
          clearBtn: true
        });
        $(".dateofInsp").on('apply.daterangepicker', function (ev, picker) {
          $(this).val(picker.startDate.format('DD/MM/YY') + '-' + picker.endDate.format('DD/MM/YY'));
        });
  
      });
 
      $(document).ready(function () {
        
        if($('#typeValue').val() == 'categoryType')
        {
        table = $('#show_details').DataTable({
              pageLength: 10,
              "lengthChange": false,
              searching: false,
              pagingType: "simple",
              "language": {
                "info": "Page _PAGE_ of _PAGES_",

              },
              "order": [[0, 'desc']]
            });

        $("#myInput").on("keyup", function () {
          var value = $(this).val().toLowerCase();
          $("#details121 tr").filter(function () {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
  
        });

        var currentdate = new Date();
        $(".modaldate").datepicker({
          minDate: currentdate,
          autoclose: true,
          dateFormat: "dd-mm-yy",
          endDate: "currentdate",
          changeMonth: true,
          changeYear: true,
          todayHighlight: true,
          clearBtn: true
        });
      
      }
      })

      function pdfShow() {
        var date1 = $('#date1').val();
        var reportedby = $('#reportedby').val();
        var prio = $('#prio').val();
        var actionby = $('#actionby').val();
        var status = $('#status').val();
        submitbtn = $('#submitpdf').val();
        window.open("{% url 'DeficiencyReportpdf' %}" + "?date=" + date1 + "&reportedby=" + reportedby + '&prio=' + prio + '&actionby=' + actionby + '&status=' + status + '&submitbtn=' + submitbtn + '&_blank');
      }
      function excelShow() {
        var date1 = $('#date1').val();
        var reportedby = $('#reportedby').val();
        var prio = $('#prio').val();
        var actionby = $('#actionby').val();
        var status = $('#status').val();
        submitbtn = $('#submitexcel').val();
        window.location.href = "{% url 'DeficiencyReportpdf' %}" + "?date=" + date1 + "&reportedby=" + reportedby + '&prio=' + prio + '&actionby=' + actionby + '&status=' + status + '&submitbtn=' + submitbtn;
      }


    </script>
  
 

</body>

</html>
{% endblock content %}